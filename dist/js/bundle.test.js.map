{"version":3,"sources":["dist/js/node_modules/browser-pack/_prelude.js","dist/js/dist/js/tmp/src/animation/animation-engine.ts","dist/js/dist/js/tmp/src/animation/animation-operation-events.ts","dist/js/dist/js/tmp/src/animation/animation-play-state.ts","dist/js/dist/js/tmp/src/carousel/carousel-base.ts","dist/js/dist/js/tmp/src/carousel/single-slide/single-slide-carousel.ts","dist/js/dist/js/tmp/src/collection/cancelable-collection-change-args.ts","dist/js/dist/js/tmp/src/collection/collection-change-args.ts","dist/js/dist/js/tmp/src/collection/collection-manager.ts","dist/js/dist/js/tmp/src/collection/html-children-manager.ts","dist/js/dist/js/tmp/src/collection/token-map.ts","dist/js/dist/js/tmp/src/main.test.ts","dist/js/dist/js/tmp/src/task/flow/task-flow-when.ts","dist/js/dist/js/tmp/src/task/flow/task-part-begin-constraint.ts","dist/js/dist/js/tmp/src/task/flow/task-part-constraint.ts","dist/js/dist/js/tmp/src/task/flow/task-part-end-constraint.ts","dist/js/dist/js/tmp/src/task/flow/task-part-time-constraint.ts","dist/js/dist/js/tmp/src/task/operation/operation-manager.ts","dist/js/dist/js/tmp/src/task/task-engine.ts","dist/js/dist/js/tmp/src/task/task-part-when-events.ts","dist/js/dist/js/tmp/src/task/task-part-when-operator.ts","dist/js/dist/js/tmp/src/test/animation/animation-engine.test.ts","dist/js/dist/js/tmp/src/test/carousel/single-slide-carousel.test.ts","dist/js/dist/js/tmp/src/test/collection/collection-manager.test.ts","dist/js/dist/js/tmp/src/test/collection/token-map.test.ts","dist/js/node_modules/@babel/runtime/helpers/assertThisInitialized.js","dist/js/node_modules/@babel/runtime/helpers/classCallCheck.js","dist/js/node_modules/@babel/runtime/helpers/createClass.js","dist/js/node_modules/@babel/runtime/helpers/get.js","dist/js/node_modules/@babel/runtime/helpers/getPrototypeOf.js","dist/js/node_modules/@babel/runtime/helpers/inherits.js","dist/js/node_modules/@babel/runtime/helpers/interopRequireDefault.js","dist/js/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","dist/js/node_modules/@babel/runtime/helpers/setPrototypeOf.js","dist/js/node_modules/@babel/runtime/helpers/superPropBase.js","dist/js/node_modules/@babel/runtime/helpers/typeof.js","dist/js/node_modules/events/events.js"],"names":[],"mappings":"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;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.test.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import { CAROUSEL_STYLES } from '../carousel/carousel-base';\r\nimport { OperationManager } from '../task/operation/operation-manager';\r\nimport { TaskEngine } from '../task/task-engine';\r\nimport { IAnimationCancelEventArgs } from './animation-cancel-event-args';\r\nimport { IAnimationFlowPart } from './animation-flow-part';\r\nimport { ANIMATION_OPERATION_EVENTS } from './animation-operation-events';\r\nimport { AnimationPlayStateValue } from './animation-play-state';\r\nimport { IAnimationStateChangeEventArgs } from './animation-state-change-event-args';\r\n\r\n/**\r\n * Represents a single animation engine.\r\n */\r\nexport class SingleAnimationEngine extends TaskEngine<IAnimationFlowPart> {\r\n\r\n    //#region Attributes\r\n\r\n    //#region Operators\r\n\r\n    /**\r\n     * Animation cancel operation manager.\r\n     */\r\n    protected animationCancelManager: OperationManager<IAnimationCancelEventArgs>;\r\n\r\n    /**\r\n     * Animation state change operation manager.\r\n     */\r\n    protected animationStateChangeManager: OperationManager<IAnimationStateChangeEventArgs>;\r\n\r\n    /**\r\n     * Creates a new instance.\r\n     */\r\n    public constructor() {\r\n        super();\r\n\r\n        this.animationCancelManager =\r\n            new OperationManager<IAnimationCancelEventArgs>(\r\n                ANIMATION_OPERATION_EVENTS.ANIMATION_CANCEL,\r\n                this.eventEmitter,\r\n            );\r\n        this.animationStateChangeManager =\r\n            new OperationManager<IAnimationStateChangeEventArgs>(\r\n                ANIMATION_OPERATION_EVENTS.ANIMATION_STATE_CHANGE,\r\n                this.eventEmitter,\r\n            );\r\n    }\r\n\r\n    //#region Public\r\n\r\n    /**\r\n     * Disposes the instance.\r\n     */\r\n    public dispose() {\r\n        this.animationCancelManager.dispose();\r\n        this.animationStateChangeManager.dispose();\r\n    }\r\n\r\n    //#region Operations\r\n\r\n    /**\r\n     * Cancels the animation.\r\n     * @param aliases Aliases of the parts to cancel or null to cancel all the parts.\r\n     */\r\n    public cancelAnimation(aliases: string[]): void {\r\n        this.eventEmitter.emit(\r\n            ANIMATION_OPERATION_EVENTS.ANIMATION_CANCEL,\r\n            { aliases : aliases } as IAnimationCancelEventArgs,\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Pauses the engine animation.\r\n     * @param aliases Aliases of the animation parts to pause or null to pause all the parts.\r\n     */\r\n    public pause(aliases: string[]): void {\r\n        this.eventEmitter.emit(\r\n            ANIMATION_OPERATION_EVENTS.ANIMATION_STATE_CHANGE,\r\n            {\r\n                aliases: aliases,\r\n                value: AnimationPlayStateValue.paused,\r\n            } as IAnimationStateChangeEventArgs,\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Resumes the engine animation.\r\n     * @param aliases Aliases of the animation parts to resume or null to resume all the parts.\r\n     */\r\n    public resume(aliases: string[]): void {\r\n        this.eventEmitter.emit(\r\n            ANIMATION_OPERATION_EVENTS.ANIMATION_STATE_CHANGE,\r\n            {\r\n                aliases: aliases,\r\n                value: AnimationPlayStateValue.running,\r\n            } as IAnimationStateChangeEventArgs,\r\n        );\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#endregion\r\n\r\n    /**\r\n     * Handles an animation part.\r\n     *\r\n     * @param animationFlow Animation flow that contains the anmation part to handle.\r\n     * @param part Animation part to handle.\r\n     * @param eventEmitter Event emitter for the animation.\r\n     *\r\n     * @returns Promise resolved once the animation of the part is finished.\r\n     */\r\n    protected handleTaskPart(part: IAnimationFlowPart): Promise<void> {\r\n        const that = this;\r\n        part.pendingOperations = {\r\n            cancel: {\r\n                isPending: false,\r\n                operationToken: this.animationCancelManager.subscribe(\r\n                    part.alias,\r\n                    function(eventArgs: IAnimationCancelEventArgs) {\r\n                        part.pendingOperations.cancel.isPending = true;\r\n                        that.animationCancelManager.unsubscribe(\r\n                            part.alias, part.pendingOperations.cancel.operationToken,\r\n                        );\r\n                    },\r\n                ),\r\n            },\r\n            pause: {\r\n                isPending: false,\r\n                operationToken: this.animationStateChangeManager.subscribe(\r\n                    part.alias,\r\n                    function(eventArgs: IAnimationStateChangeEventArgs) {\r\n                        part.pendingOperations.pause.isPending =\r\n                            eventArgs.value === AnimationPlayStateValue.paused;\r\n                    },\r\n                ),\r\n            },\r\n        };\r\n\r\n        return super.handleTaskPart(part);\r\n    }\r\n\r\n    /**\r\n     * Performs a task part.\r\n     * @param part Task part to be performed.\r\n     * @returns Promise resolved once the part task is performed.\r\n     */\r\n    protected performTask(part: IAnimationFlowPart): PromiseLike<{} | void> {\r\n\r\n        if (part.pendingOperations) {\r\n            this.animationCancelManager.unsubscribe(part.alias, part.pendingOperations.cancel.operationToken);\r\n            this.animationStateChangeManager.unsubscribe(part.alias, part.pendingOperations.pause.operationToken);\r\n        }\r\n\r\n        const promises: Array<Promise<void>> = new Array(part.elements.length);\r\n\r\n        // 2. Perform the animation.\r\n        for (var i = 0; i < part.elements.length; ++i) {\r\n            promises[i] = this.handleAnimationOverElement(part.elements[i], part);\r\n        }\r\n\r\n        if (part.pendingOperations) {\r\n            if (part.pendingOperations.pause.isPending) {\r\n                this.pause([part.alias]);\r\n                part.pendingOperations.pause.isPending = false;\r\n            }\r\n\r\n            if (part.pendingOperations.cancel.isPending) {\r\n                this.cancelAnimation([part.alias]);\r\n                part.pendingOperations.cancel.isPending = false;\r\n            }\r\n        }\r\n\r\n        return Promise.all(promises);\r\n    }\r\n\r\n    //#region Element animation\r\n\r\n    /**\r\n     * Handles the animation over an element.\r\n     *\r\n     * @param element element to be animated.\r\n     * @param part Part that contains the element to be animated.\r\n     *\r\n     * @returns Promise resolved once the animation over the element is finished.\r\n     */\r\n    protected handleAnimationOverElement(element: HTMLElement, part: IAnimationFlowPart): Promise<void> {\r\n        const styles: string[] = part.styles;\r\n\r\n        if (styles) {\r\n            if (styles.length < 1) {\r\n                throw new Error('It\\'s required to have at least one class to generate an animation.');\r\n            }\r\n        } else {\r\n            throw new Error('It\\'s required to have an array of styles to generate an animation.');\r\n        }\r\n\r\n        const that = this;\r\n\r\n        return new Promise<void>(function(resolve, reject) {\r\n            try {\r\n                const animationFunctions: Array<((event: TransitionEvent) => void)> = new Array();\r\n                var currentAnimationIndex: number = null;\r\n\r\n                const onAnimationCancel = function(args: IAnimationCancelEventArgs) {\r\n                    // Resume the animation if it is paused.\r\n                    onAnimationPlayStateChange({aliases: args.aliases, value: AnimationPlayStateValue.running});\r\n\r\n                    element.classList.add(CAROUSEL_STYLES.CLEAR_ANIMATION);\r\n\r\n                    if (null != currentAnimationIndex) {\r\n                        element.classList.remove(styles[currentAnimationIndex]);\r\n                    }\r\n\r\n                    that.unregisterAnimationListener(element, animationFunctions[currentAnimationIndex]);\r\n                    element.classList.remove(CAROUSEL_STYLES.CLEAR_ANIMATION);\r\n\r\n                    that.animationCancelManager.unsubscribe(part.alias, cancelToken);\r\n                    that.animationStateChangeManager.unsubscribe(part.alias, playStateChangetoken);\r\n\r\n                    resolve();\r\n                };\r\n\r\n                const cancelToken = that.animationCancelManager.subscribe(part.alias, onAnimationCancel);\r\n\r\n                const onAnimationPlayStateChange = function(args: IAnimationStateChangeEventArgs) {\r\n                    if (AnimationPlayStateValue.paused === args.value) {\r\n                        if (!element.classList.contains(CAROUSEL_STYLES.ANIMATION_PAUSED)) {\r\n                            element.classList.add(CAROUSEL_STYLES.ANIMATION_PAUSED);\r\n                        }\r\n                    } else if (AnimationPlayStateValue.running === args.value) {\r\n                        if (element.classList.contains(CAROUSEL_STYLES.ANIMATION_PAUSED)) {\r\n                            element.classList.remove(CAROUSEL_STYLES.ANIMATION_PAUSED);\r\n                        }\r\n                    }\r\n                };\r\n\r\n                const playStateChangetoken =\r\n                    that.animationStateChangeManager.subscribe(part.alias, onAnimationPlayStateChange);\r\n\r\n                for (var i = 1; i < styles.length; ++i) {\r\n                    animationFunctions.push(function(index) {\r\n                        return function(event: TransitionEvent) {\r\n                            element.classList.remove(styles[index - 1]);\r\n                            that.unregisterAnimationListener(element, animationFunctions[index - 1]);\r\n                            that.registerAnimationListener(element, animationFunctions[index]);\r\n                            element.classList.add(styles[index]);\r\n                            currentAnimationIndex = index;\r\n                        };\r\n                    } (i));\r\n                }\r\n\r\n                // Add the clear function\r\n                animationFunctions.push(function(event: TransitionEvent) {\r\n                    element.classList.add(CAROUSEL_STYLES.CLEAR_ANIMATION);\r\n                    element.classList.remove(styles[styles.length - 1]);\r\n                    element.classList.remove(CAROUSEL_STYLES.CLEAR_ANIMATION);\r\n                    that.unregisterAnimationListener(element, animationFunctions[animationFunctions.length - 1]);\r\n                    currentAnimationIndex = null;\r\n                    that.animationCancelManager.unsubscribe(part.alias, cancelToken);\r\n                    that.animationStateChangeManager.unsubscribe(part.alias, playStateChangetoken);\r\n                    resolve();\r\n                });\r\n\r\n                that.registerAnimationListener(element, animationFunctions[0]);\r\n                element.classList.add(styles[0]);\r\n                currentAnimationIndex = 0;\r\n            } catch (ex) {\r\n                reject(ex);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handles the end of a transition over an element.\r\n     * @param element Element whose event will be handled.\r\n     * @param listener Event listener.\r\n     */\r\n    private registerAnimationListener(element: HTMLElement, listener: (element: TransitionEvent) => void): void {\r\n        element.addEventListener('animationend', listener);\r\n        element.addEventListener('webkitAnimationEnd', listener);\r\n    }\r\n\r\n    /**\r\n     * Unsubscribes an event handler from the list of listeners of an element\r\n     * @param element Target element.\r\n     * @param listener Listener to be unsubscribed.\r\n     */\r\n    private unregisterAnimationListener(element: HTMLElement, listener: (element: TransitionEvent) => void): void {\r\n        element.removeEventListener('animationend', listener);\r\n        element.removeEventListener('webkitAnimationEnd', listener);\r\n    }\r\n\r\n    //#endregion\r\n}\r\n","export const ANIMATION_OPERATION_EVENTS = {\r\n    /**\r\n     * Forces the cancelation of the current animation.\r\n     */\r\n    ANIMATION_CANCEL: 'anim.cancel',\r\n    /**\r\n     * Changes the animation play state of the elements of the animation.\r\n     */\r\n    ANIMATION_STATE_CHANGE: 'anim.state.change',\r\n};\r\n","/**\r\n * Represents the play state of an animation\r\n */\r\nexport enum AnimationPlayStateValue {\r\n    /**\r\n     * Value to represent a paused status.\r\n     */\r\n    paused,\r\n    /**\r\n     * Value to represent a running status.\r\n     */\r\n    running,\r\n}\r\n","/**\n * Carousel classes used for multiple purposes.\n */\nexport const CAROUSEL_STYLES = {\n    ANIMATION_PAUSED: 'sora-animation-paused',\n    CAROUSEL: 'sora-carousel',\n    CLEAR_ANIMATION: 'sora-clear-animations',\n    SLIDE: 'sora-slide',\n    WRAPPER: 'sora-wrapper',\n};\n\n/**\n * Represents a generic carousel.\n *\n * 1. Any carousel has elements.\n * 2. Any carousel has a topology.\n * 3. Any carousel has transitions.\n */\nexport abstract class CarouselBase {\n    /**\n     * Carousel handler.\n     * 3. Any carousel has transitions.\n     * @param action action to be handled\n     * @param options options for the action.\n     */\n    public abstract handle(action: string, options: {[key: string]: any}): void;\n}\n","import { EventEmitter } from 'events';\nimport { SingleAnimationEngine } from '../../animation/animation-engine';\nimport { IAnimationFlowPart } from '../../animation/animation-flow-part';\nimport { AnimationPlayStateValue } from '../../animation/animation-play-state';\nimport { CancelableCollectionChangeEventArgs } from '../../collection/cancelable-collection-change-args';\nimport { CollectionChangeEventArgs } from '../../collection/collection-change-args';\nimport { COLLECTION_MANAGER_EVENTS } from '../../collection/collection-manager';\nimport { HtmlChildrenManager } from '../../collection/html-children-manager';\nimport { ITaskFlow } from '../../task/flow/task-flow';\nimport {\n    CAROUSEL_STYLES,\n    CarouselBase,\n} from '../carousel-base';\nimport {\n    ISingleSlideCarouselAnimationEndEventArgs,\n    ISingleSlideCarouselAnimationPlayStateChangeEventArgs,\n    ISingleSlideCarouselAnimationStartEventArgs,\n    ISingleSlideCarouselCancelAnimationEventArgs,\n} from './animation-events';\nimport { ICarouselAnimationChildrenStyles } from './carousel-animation';\nimport { ISingleSlideCarouselCreateWaitPromiseOptions } from './create-wait-promise-options';\nimport { ISingleSlideCarouselCreationOptions } from './creation-options';\nimport { ISingleSlideCarouselGoToAnimationStatus } from './go-to-animation-status';\nimport { ISingleSlideCarouselGotoOptions } from './go-to-options';\n\n/* #region Constants */\n\n/**\n * Actions avaiable for the SingleSlideCarousel.\n */\nexport const SINGLE_SLIDE_CAROUSEL_ACTIONS = {\n    GO_TO: 'to',\n    GO_TO_NEXT: 'next',\n    GO_TO_PREVIOUS: 'prev',\n};\n\n/**\n * Events directly handled by the carousel.\n */\nexport const SINGLE_SLIDE_CAROUSEL_EVENTS = {\n    ON_ANIMATION_END: 'car.anim.out',\n    ON_ANIMATION_PLAY_STATE_CHANGE: 'car.anim.state.ch',\n    ON_ANIMATION_START: 'car.anim.in',\n    ON_CANCEL_ANIMATION: 'car.anim.cancel',\n};\n\nexport const SINGLE_SLIDE_CAROUSEL_PARTS_ALIASES = {\n    ENTER: 'enter-part',\n    LEAVE: 'leave-part',\n};\n\n/**\n * Carousel classes used for multiple purposes.\n */\nexport const SINGLE_SLIDE_CAROUSEL_STYLES = {\n    /**\n     * Style to apply to hidden slides.\n     */\n    SLIDE_HIDDEN: 'sora-hidden',\n    /**\n     * Style to apply to achieve position: relative.\n     */\n    SORA_RELATIVE: 'sora-relative',\n};\n\n/* #endregion */\n\n/**\n * Represents a carousel with a single active slide at a time.\n */\nexport class SingleSlideCarousel extends CarouselBase {\n\n    //#region Attributes\n\n    /**\n     * Active index of the elements of the carousel.\n     */\n    protected activeIndex: number;\n\n    /**\n     * Current active animation\n     */\n    protected currentAnimation: ISingleSlideCarouselGotoOptions;\n\n    /**\n     * collection manager\n     */\n    protected elementsManager: HtmlChildrenManager;\n\n    /**\n     * Engine animation.\n     */\n    protected engineAnimation: SingleAnimationEngine;\n\n    /**\n     * Flag to determine if the carousel animation is paused.\n     */\n    protected paused: boolean;\n\n    //#endregion\n\n    //#region Events\n\n    /**\n     * Event emitter for this instance\n     */\n    protected eventEmitter: EventEmitter;\n\n    //#endregion\n\n    /**\n     * Creates a new instance of this class.\n     * @param element DOM element associated to the carousel.\n     */\n    public constructor(element: HTMLElement, options: ISingleSlideCarouselCreationOptions) {\n        super();\n\n        if (element == null) {\n            throw new Error('The element must not be null.');\n        }\n        if (!element.classList.contains(CAROUSEL_STYLES.CAROUSEL)) {\n            throw new Error('The carousel element must contain the class \"' + CAROUSEL_STYLES.CAROUSEL + '\".');\n        }\n\n        const soraWrapper = element.querySelector('.' + CAROUSEL_STYLES.WRAPPER);\n\n        if (soraWrapper == null) {\n            throw new Error('The element has no child with class \\'sora-wrapper\\'.');\n        }\n\n        const children: HTMLElement[] = new Array();\n\n        for (var i = 0; i < soraWrapper.children.length; ++i) {\n            if (soraWrapper.children[i].classList.contains(CAROUSEL_STYLES.SLIDE)) {\n                children.push(soraWrapper.children[i] as HTMLElement);\n            }\n        }\n\n        this.activeIndex = options.index || 0;\n        this.currentAnimation = null;\n        this.eventEmitter = new EventEmitter();\n        this.elementsManager = new HtmlChildrenManager(children, this.eventEmitter, soraWrapper as HTMLElement);\n\n        if (this.activeIndex < 0 || this.activeIndex >= this.elementsManager.getLength()) {\n            throw new Error('Invalid options.index. There is no element with index ' + options.index + '.');\n        }\n\n        for (var i = 0; i < children.length; ++i) {\n            if (i === this.activeIndex) {\n                children[i].classList.add(SINGLE_SLIDE_CAROUSEL_STYLES.SORA_RELATIVE);\n            } else {\n                children[i].classList.add(SINGLE_SLIDE_CAROUSEL_STYLES.SLIDE_HIDDEN);\n            }\n        }\n\n        const that = this;\n\n        // Add listeners\n        const onBeforeChange = function(eventArgs: CancelableCollectionChangeEventArgs<HTMLElement>) {\n            const indexMap = eventArgs.getIndexMap();\n            if (null == indexMap[that.activeIndex]) {\n                eventArgs.setPreventDefault();\n            }\n        };\n\n        const onAfterChange = function(eventArgs: CollectionChangeEventArgs<HTMLElement>) {\n            if (!eventArgs.getPreventDefault()) {\n                const indexMap = eventArgs.getIndexMap();\n                that.activeIndex = indexMap[that.activeIndex];\n            }\n        };\n\n        this.addListener(COLLECTION_MANAGER_EVENTS.collectionBeforeChange, onBeforeChange);\n        this.addListener(COLLECTION_MANAGER_EVENTS.collectionAfterChange, onAfterChange);\n\n        this.engineAnimation = new SingleAnimationEngine();\n    }\n\n    //#region Public\n\n    /**\n     * Subscribes a listener to an event of the carousel.\n     * @param event Event to listen.\n     * @param listener Listener to subscribe.\n     */\n    public addListener(event: string | symbol, listener: (... args: any[]) => void): void {\n        this.eventEmitter.addListener(event, listener);\n    }\n\n    /**\n     * Creates a promise that waits for a time. The amount of time\n     * @param options ISingleSlideCarouselCreateWaitPromiseOptions.\n     */\n    public createWaitPromise(options: ISingleSlideCarouselCreateWaitPromiseOptions): Promise<void> {\n        const that = this;\n        return new Promise<void>(function(resolve, reject) {\n            var lastTimeRun: number;\n            var timeToWait = options.millis;\n\n            if (that.paused) {\n                lastTimeRun = null;\n            } else {\n                var waitInterval = setInterval(function() {\n                    removeListeners();\n                    resolve();\n                }, timeToWait);\n                lastTimeRun = new Date().getTime();\n            }\n\n            var onCancelAnimation: () => void = null;\n\n            if (options.stopOnCancelAnimation) {\n                onCancelAnimation = function() {\n                    removeListeners();\n                    resolve();\n                };\n                that.addListener(SINGLE_SLIDE_CAROUSEL_EVENTS.ON_CANCEL_ANIMATION, onCancelAnimation);\n            }\n\n            const onPlayStateChange = function(args: ISingleSlideCarouselAnimationPlayStateChangeEventArgs) {\n                if (AnimationPlayStateValue.paused === args.value) {\n                    // Pause\n                    timeToWait = timeToWait - (new Date().getTime() - lastTimeRun);\n                    clearInterval(waitInterval);\n                } else if (AnimationPlayStateValue.running === args.value) {\n                    // Resume\n                    lastTimeRun = new Date().getTime();\n\n                    if (0 < timeToWait) {\n                        waitInterval = setInterval(function() {\n                            that.removeListener(\n                                SINGLE_SLIDE_CAROUSEL_EVENTS.ON_ANIMATION_PLAY_STATE_CHANGE,\n                                onPlayStateChange,\n                            );\n                            if (null != onCancelAnimation) {\n                                that.removeListener(\n                                    SINGLE_SLIDE_CAROUSEL_EVENTS.ON_CANCEL_ANIMATION,\n                                    onCancelAnimation,\n                                );\n                            }\n                            resolve();\n                        }, timeToWait);\n                    } else {\n                        removeListeners();\n                        resolve();\n                    }\n                }\n            };\n\n            const removeListeners = function() {\n                that.removeListener(SINGLE_SLIDE_CAROUSEL_EVENTS.ON_ANIMATION_PLAY_STATE_CHANGE, onPlayStateChange);\n                if (null != onCancelAnimation) {\n                    that.removeListener(\n                        SINGLE_SLIDE_CAROUSEL_EVENTS.ON_CANCEL_ANIMATION,\n                        onCancelAnimation,\n                    );\n                }\n            };\n\n            that.addListener(SINGLE_SLIDE_CAROUSEL_EVENTS.ON_ANIMATION_PLAY_STATE_CHANGE, onPlayStateChange);\n        });\n    }\n\n    /**\n     * Forces the carousel to change its active slide. Any animation will be canceled in the process.\n     * @param activeIndex Index of the new active slide of the carousel.\n     */\n    public forceActiveSlide(activeIndex: number) {\n        const eventArgs: ISingleSlideCarouselCancelAnimationEventArgs = { activeIndex: activeIndex };\n\n        this.engineAnimation.cancelAnimation(null);\n        // The call over cancelAnimation will resume any paused animation.\n        this.paused = false;\n        this.activeIndex = activeIndex;\n        this.resetCarouselStructure(activeIndex);\n\n        this.eventEmitter.emit(SINGLE_SLIDE_CAROUSEL_EVENTS.ON_CANCEL_ANIMATION, eventArgs);\n    }\n\n    /**\n     * Obtains the active slide of the carousel\n     */\n    public getActiveElement(): HTMLElement {\n        return this.elementsManager.getCollection()[this.activeIndex];\n    }\n\n    /**\n     * Obtains the active index in the elements array of the carousel\n     */\n    public getActiveIndex(): number {\n        return this.activeIndex;\n    }\n\n    /**\n     * Returns the collection manager of the instance.\n     * @returns Collection manager of the slide elements.\n     */\n    public getElementsManager(): HtmlChildrenManager {\n        return this.elementsManager;\n    }\n\n    /**\n     * Determines if the carousel has an active animation, even if the animation is Paused.\n     * @returns True if the carousel has an active animation.\n     */\n    public hasActiveAnimation(): boolean {\n        return null != this.currentAnimation;\n    }\n\n    public handle(action: string, options: {[key: string]: any}): ISingleSlideCarouselGoToAnimationStatus {\n        switch (action) {\n            case SINGLE_SLIDE_CAROUSEL_ACTIONS.GO_TO:\n                if (options == null || typeof options.index !== 'number') {\n                    throw new Error('Invalid options for \\'' + SINGLE_SLIDE_CAROUSEL_ACTIONS.GO_TO + '\\'.');\n                }\n                return this.handleGoTo(options as ISingleSlideCarouselGotoOptions);\n            case SINGLE_SLIDE_CAROUSEL_ACTIONS.GO_TO_NEXT:\n                options.index = (this.activeIndex + 1) % this.elementsManager.getLength();\n                return this.handle(SINGLE_SLIDE_CAROUSEL_ACTIONS.GO_TO, options);\n            case SINGLE_SLIDE_CAROUSEL_ACTIONS.GO_TO_PREVIOUS:\n                const elementsLength = this.elementsManager.getLength();\n                options.index = ((this.activeIndex - 1) % elementsLength + elementsLength) % elementsLength;\n                return this.handle(SINGLE_SLIDE_CAROUSEL_ACTIONS.GO_TO, options);\n        }\n    }\n\n    /**\n     * Returns true if the carousel animation is paused.\n     * @returns True if the carousel is paused and false in any other case.\n     */\n    public isPaused() {\n        return this.paused;\n    }\n\n    /**\n     * Pauses the animations currently handled by the carousel.\n     */\n    public pause(): void {\n        if (!this.paused) {\n            this.engineAnimation.pause(null);\n            this.paused = true;\n            this.eventEmitter.emit(\n                SINGLE_SLIDE_CAROUSEL_EVENTS.ON_ANIMATION_PLAY_STATE_CHANGE,\n                { value : AnimationPlayStateValue.paused } as ISingleSlideCarouselAnimationPlayStateChangeEventArgs,\n            );\n        }\n    }\n\n    /**\n     * Unsubscribes a listener to an event of the carousel.\n     * @param event Event associated.\n     * @param listener Listener to unsubscribe.\n     */\n    public removeListener(event: string | symbol, listener: (... args: any[]) => void): void {\n        this.eventEmitter.removeListener(event, listener);\n    }\n\n    /**\n     * Resumes the animations currently handled by the carousel.\n     */\n    public resume(): void {\n        if (this.paused) {\n            this.engineAnimation.resume(null);\n            this.paused = false;\n            this.eventEmitter.emit(\n                SINGLE_SLIDE_CAROUSEL_EVENTS.ON_ANIMATION_PLAY_STATE_CHANGE,\n                { value: AnimationPlayStateValue.running } as ISingleSlideCarouselAnimationPlayStateChangeEventArgs,\n            );\n        }\n    }\n\n    //#endregion\n\n    //#region Protected\n\n    /**\n     * Creates an animation flow based on animation options.\n     *\n     * @param enterElement Element to apply the enter animation.\n     * @param leaveElement Element to apply the leave animation.\n     * @param options Animation options.\n     *\n     * @returns Animation flow from the animation options.\n     */\n    protected generateGoToAnimationFlow(\n        enterElement: HTMLElement,\n        leaveElement: HTMLElement,\n        options: ISingleSlideCarouselGotoOptions,\n    ): ITaskFlow<IAnimationFlowPart> {\n        const innerParts: IAnimationFlowPart[] = [\n            {\n                alias: SINGLE_SLIDE_CAROUSEL_PARTS_ALIASES.ENTER,\n                elements: [ enterElement ],\n                styles: options.enterAnimation.slideStyles,\n                when: null,\n            },\n            {\n                alias: SINGLE_SLIDE_CAROUSEL_PARTS_ALIASES.LEAVE,\n                elements: [ leaveElement ],\n                styles: options.leaveAnimation.slideStyles,\n                when: null,\n            },\n        ];\n\n        const generateChildrenParts = function(\n            parentElement: HTMLElement,\n            childrenStyles: ICarouselAnimationChildrenStyles[],\n            aliasBase: string,\n        ) {\n            if (childrenStyles) {\n                for (var i = 0; i < childrenStyles.length; ++i) {\n                    innerParts.push({\n                        alias: aliasBase + i.toString(),\n                        elements: function(): HTMLElement[] {\n                            const elements: HTMLElement[] = new Array();\n                            const animationObject: ICarouselAnimationChildrenStyles = childrenStyles[i];\n                            const childrenElements = parentElement.querySelectorAll(animationObject.selector);\n\n                            for (const childrenElement of childrenElements) {\n                                elements.push(childrenElement as HTMLElement);\n                            }\n\n                            return elements;\n                        } (),\n                        styles: childrenStyles[i].styles,\n                        when: null,\n                    });\n                }\n            }\n        };\n\n        generateChildrenParts(\n            enterElement,\n            options.enterAnimation.childrenStyles,\n            SINGLE_SLIDE_CAROUSEL_PARTS_ALIASES.ENTER,\n        );\n        generateChildrenParts(\n            leaveElement,\n            options.leaveAnimation.childrenStyles,\n            SINGLE_SLIDE_CAROUSEL_PARTS_ALIASES.LEAVE,\n        );\n\n        const innerPartsMap: { [key: string]: IAnimationFlowPart } = { };\n\n        for (const innerPart of innerParts) {\n            innerPartsMap[innerPart.alias] = innerPart;\n        }\n        const animationFlow: ITaskFlow<IAnimationFlowPart> = {\n            parts: innerParts,\n        };\n\n        return animationFlow;\n    }\n\n    /**\n     * Resets the carousel structure. Sets a new active element for the carousel.\n     * @param activeIndex Current active index.\n     */\n    protected resetCarouselStructure(activeIndex: number) {\n        // This operation is atomic in a single-thread environment, so we can store the collection.\n        const collection = this.elementsManager.getCollection();\n        for (var i = 0; i < collection.length; ++i) {\n            while (collection[i].classList.length > 0) {\n                collection[i].classList.remove(collection[i].classList.item(0));\n            }\n\n            collection[i].classList.add(CAROUSEL_STYLES.SLIDE);\n\n            if (i === activeIndex) {\n                collection[i].classList.add(SINGLE_SLIDE_CAROUSEL_STYLES.SORA_RELATIVE);\n            } else {\n                collection[i].classList.add(SINGLE_SLIDE_CAROUSEL_STYLES.SLIDE_HIDDEN);\n            }\n        }\n    }\n\n    //#endregion\n\n    //#region Private\n\n    /**\n     * Handles the GoTo operation.\n     * @param options Options with the index and the custom animation to display.\n     */\n    private handleGoTo(options: ISingleSlideCarouselGotoOptions): ISingleSlideCarouselGoToAnimationStatus {\n        if (options.index < 0 || options.index >= this.elementsManager.getLength()) {\n            throw new Error('Invalid index. There is no element with index ' + options.index + '.');\n        }\n\n        if (options.index === this.activeIndex) {\n            throw new Error('Invalid index. It\\'s not allowed to go to the current active slide');\n        }\n        if (null == this.currentAnimation) {\n            this.currentAnimation = options;\n        } else {\n            throw new Error(\n                'It\\'s not allowed to start an animation while an existing animation over an slide element is active',\n            );\n        }\n\n        const oldActiveElement = this.elementsManager.getCollection()[this.activeIndex];\n        var newActiveIndex: number = options.index;\n\n        this.eventEmitter.emit(SINGLE_SLIDE_CAROUSEL_EVENTS.ON_ANIMATION_START, {\n            options: options,\n        } as ISingleSlideCarouselAnimationStartEventArgs);\n\n        const that = this;\n\n        const onBeforeChange = function(eventArgs: CancelableCollectionChangeEventArgs<HTMLElement>) {\n            const indexMap = eventArgs.getIndexMap();\n            if (null == indexMap[newActiveIndex]) {\n                eventArgs.setPreventDefault();\n            }\n        };\n\n        const onAfterChange = function(eventArgs: CollectionChangeEventArgs<HTMLElement>) {\n            if (!eventArgs.getPreventDefault()) {\n                const indexMap = eventArgs.getIndexMap();\n                newActiveIndex = indexMap[newActiveIndex];\n            }\n        };\n\n        this.addListener(COLLECTION_MANAGER_EVENTS.collectionBeforeChange, onBeforeChange);\n        this.addListener(COLLECTION_MANAGER_EVENTS.collectionAfterChange, onAfterChange);\n\n        const newActiveElement = this.elementsManager.getCollection()[newActiveIndex];\n\n        newActiveElement.classList.remove(SINGLE_SLIDE_CAROUSEL_STYLES.SLIDE_HIDDEN);\n\n        var animationCanceled = false;\n\n        const cancelAnimationHandler = function() {\n            animationCanceled = true;\n            that.currentAnimation = null;\n        };\n\n        const animationFlow = this.generateGoToAnimationFlow(newActiveElement, oldActiveElement, options);\n        const animationPromises: Array<Promise<void>> = this.engineAnimation.handle(animationFlow);\n        const ANIMATION_ENTER_INDEX: number = 0;\n        const ANIMATION_LEAVE_INDEX: number = 1;\n\n        const hideLeaveSlideAfterAnimationEnds = new Promise<void>(function(resolve, reject) {\n            animationPromises[ANIMATION_LEAVE_INDEX].then(function(animationOptions) {\n                if (!animationCanceled) {\n                    oldActiveElement.classList.add(SINGLE_SLIDE_CAROUSEL_STYLES.SLIDE_HIDDEN);\n                    oldActiveElement.classList.remove(SINGLE_SLIDE_CAROUSEL_STYLES.SORA_RELATIVE);\n                    newActiveElement.classList.add(SINGLE_SLIDE_CAROUSEL_STYLES.SORA_RELATIVE);\n                }\n                resolve();\n            }).catch(function(err) {\n                reject(err);\n            });\n        });\n\n        this.addListener(SINGLE_SLIDE_CAROUSEL_EVENTS.ON_CANCEL_ANIMATION, cancelAnimationHandler);\n\n        const soraHandlerStatus: Promise<void> = new Promise<void>(function(resolve, reject) {\n            Promise.all([\n                animationPromises[ANIMATION_ENTER_INDEX],\n                hideLeaveSlideAfterAnimationEnds,\n            ]).then(function() {\n                if (!animationCanceled) {\n                    that.activeIndex = newActiveIndex;\n                    that.currentAnimation = null;\n                }\n\n                that.removeListener(COLLECTION_MANAGER_EVENTS.collectionBeforeChange, onBeforeChange);\n                that.removeListener(COLLECTION_MANAGER_EVENTS.collectionAfterChange, onAfterChange);\n                that.removeListener(SINGLE_SLIDE_CAROUSEL_EVENTS.ON_CANCEL_ANIMATION, cancelAnimationHandler);\n\n                that.eventEmitter.emit(\n                    SINGLE_SLIDE_CAROUSEL_EVENTS.ON_ANIMATION_END,\n                    {} as ISingleSlideCarouselAnimationEndEventArgs,\n                );\n\n                resolve();\n            }).catch(function(err) {\n                reject(err);\n            });\n        });\n\n        return {\n            animationPromises: animationPromises,\n            partEndEventAccess: that.engineAnimation.getPartEndListenerAccess(),\n            partStartEventAccess: that.engineAnimation.getPartStartListenerAccess(),\n            soraHandlerStatus: soraHandlerStatus,\n        };\n    }\n}\n","import { CollectionChangeEventArgs } from './collection-change-args';\r\n\r\nexport class CancelableCollectionChangeEventArgs<T> extends CollectionChangeEventArgs<T> {\r\n    /**\r\n     * Creates a new instance.\r\n     * @param indexMap Index map, from old indexes to new indexes.\r\n     * @param newElements New Elements array.\r\n     */\r\n    public constructor(indexMap: {[oldIndex: number]: number}, newElements: T[]) {\r\n        super(indexMap, newElements, false);\r\n    }\r\n\r\n    /**\r\n     * Sets the prevent default action flag to true.\r\n     */\r\n    public setPreventDefault(): void {\r\n        this.preventDefault = true;\r\n    }\r\n}\r\n","export class CollectionChangeEventArgs<T> {\r\n    /**\r\n     * Map from old indexes to new indexes\r\n     */\r\n    protected indexMap: {[oldIndex: number]: number};\r\n    /**\r\n     * new Elements array\r\n     */\r\n    protected newElements: T[];\r\n\r\n    /**\r\n     * Flag to prevent the default action (update the collection)\r\n     */\r\n    protected preventDefault: boolean;\r\n\r\n    /**\r\n     * Creates a new instance.\r\n     * @param indexMap Index map, from old indexes to new indexes.\r\n     * @param newElements New Elements array.\r\n     */\r\n    public constructor(indexMap: {[oldIndex: number]: number}, newElements: T[], preventDefault: boolean) {\r\n        this.indexMap = indexMap;\r\n        this.newElements = newElements;\r\n        this.preventDefault = preventDefault;\r\n    }\r\n\r\n    /**\r\n     * Returns a clone copy of the index map.\r\n     * The index map keys are the old indexes of the collection.\r\n     * The index map values are the new indexes for the old ones.\r\n     */\r\n    public getIndexMap(): {[oldIndex: number]: number} {\r\n        return Object.assign({}, this.indexMap);\r\n    }\r\n\r\n    /**\r\n     * Returns a clone copy of the collection that could be the new collection.\r\n     */\r\n    public getNewElements(): {[index: number]: T} {\r\n        return Object.assign({}, this.newElements);\r\n    }\r\n\r\n    /**\r\n     * Returns the prevent default action flag.\r\n     */\r\n    public getPreventDefault(): boolean {\r\n        return this.preventDefault;\r\n    }\r\n}\r\n","import { EventEmitter } from 'events';\r\nimport { CancelableCollectionChangeEventArgs } from './cancelable-collection-change-args';\r\nimport { CollectionChangeEventArgs } from './collection-change-args';\r\n\r\nexport const COLLECTION_MANAGER_EVENTS = {\r\n    collectionAfterChange: 'coll.ch.a',\r\n    collectionBeforeChange: 'coll.ch.b',\r\n};\r\n\r\n/**\r\n * Collection manager.\r\n * Handles a collection of items and emits events on modifications of the managed collection.\r\n */\r\nexport class CollectionManager<T> {\r\n\r\n    /**\r\n     * Collection to manage\r\n     */\r\n    protected collection: T[];\r\n\r\n    /**\r\n     * Event emitter used to emit events\r\n     */\r\n    protected eventEmitter: EventEmitter;\r\n\r\n    /**\r\n     * Creates a new instance of the class.\r\n     * @param collection Collection to manage.\r\n     * @param eventEmitter Event emitter used to emit events.\r\n     */\r\n    public constructor(collection: T[], eventEmitter: EventEmitter) {\r\n        this.collection = collection;\r\n        this.eventEmitter = eventEmitter;\r\n    }\r\n\r\n    //#region Public\r\n\r\n    /**\r\n     * Returns the collection of elements managed.\r\n     * This is the real collection managed by the instance.\r\n     * Only read operations should be performed directly in the collection.\r\n     */\r\n    public getCollection(): T[] {\r\n        return this.collection;\r\n    }\r\n\r\n    /**\r\n     * Obtains the length of the collection.\r\n     * @returns Length of the collection managed.\r\n     */\r\n    public getLength(): number {\r\n        return this.collection.length;\r\n    }\r\n\r\n    /**\r\n     * Inserts a collection of elements at the selected indexes.\r\n     * @param elements Collection of index-element pairs representing the elements to be inserted.\r\n     */\r\n    public insertElements(elements: {[index: number]: T}): void {\r\n        this.internalInsertElements(elements);\r\n    }\r\n\r\n    /**\r\n     * Removes elements of the collection.\r\n     * @param indexes Indexes of the collection to be removed.\r\n     */\r\n    public removeElements(indexes: number[]): void {\r\n        this.internalRemoveElements(indexes);\r\n    }\r\n\r\n    //#endregion\r\n\r\n    /**\r\n     * Inserts a collection of elements at the selected indexes.\r\n     * @param elements Collection of index-element pairs representing the elements to be inserted.\r\n     */\r\n    protected internalInsertElements(elements: {[index: number]: T}): void {\r\n        var keys: number[] = new Array();\r\n        for (const elemIndex in elements) {\r\n            if (elements.hasOwnProperty(elemIndex)) {\r\n                const numberElemIndex = Number(elemIndex);\r\n                if (numberElemIndex < 0) {\r\n                    throw new Error('The index param should be greater or equals zero.');\r\n                }\r\n\r\n                if (numberElemIndex > this.collection.length) {\r\n                    throw new Error(\r\n                        'The index param should be less or equals the number of elements of the collection.',\r\n                    );\r\n                }\r\n                keys.push(numberElemIndex);\r\n            }\r\n        }\r\n\r\n        keys = keys.sort(function(number1, number2) {\r\n            return number1 - number2;\r\n        });\r\n\r\n        if (0 === keys.length) {\r\n            return;\r\n        }\r\n\r\n        const newElements: T[] = new Array(this.collection.length + keys.length);\r\n        const indexMap: {[oldIndex: number]: number} = {};\r\n\r\n        if (1 === keys.length) {\r\n            const index = keys[0];\r\n            const element = elements[index];\r\n\r\n            for (var i = 0; i < index; ++i) {\r\n                newElements[i] = this.collection[i];\r\n                indexMap[i] = i;\r\n            }\r\n\r\n            newElements[index] = element;\r\n\r\n            for (var i = index + 1; i < newElements.length; ++i) {\r\n                newElements[i] = this.collection[i - 1];\r\n                indexMap[i - 1] = i;\r\n            }\r\n        } else {\r\n            for (var i = 0; i < keys[0]; ++i) {\r\n                newElements[i] = this.collection[i];\r\n                indexMap[i] = i;\r\n            }\r\n\r\n            newElements[keys[0]] = elements[keys[0]];\r\n\r\n            for (var i = 1; i < keys.length; ++i) {\r\n                const indexPrevious = keys[i - 1];\r\n                const index = keys[i];\r\n                for (var j = indexPrevious + 1; j < index; ++j) {\r\n                    newElements[j] = this.collection[j - i];\r\n                    indexMap[j - i] = j;\r\n                }\r\n\r\n                newElements[index] = elements[index];\r\n            }\r\n\r\n            for (var i = keys[keys.length - 1] + 1; i < newElements.length; ++i) {\r\n                newElements[i] = this.collection[i - keys.length];\r\n                indexMap[i - keys.length] = i;\r\n            }\r\n        }\r\n\r\n        this.internalTryToChangeCollection(indexMap, newElements);\r\n    }\r\n\r\n    /**\r\n     * Removes elements of the collection.\r\n     * @param indexes Indexes of the collection to be removed.\r\n     */\r\n    protected internalRemoveElements(indexes: number[]): void {\r\n        // Sort indexes.\r\n        indexes = indexes.sort(function(number1, number2) {\r\n            return number1 - number2;\r\n        });\r\n\r\n        const indexMap: {[oldIndex: number]: number} = {};\r\n        const newElements: T[] = new Array();\r\n        var counter = 0;\r\n        for (var i = 0; i < this.collection.length; ++i) {\r\n            if (i === indexes[counter]) {\r\n                ++counter;\r\n            } else {\r\n                newElements[i - counter] = this.collection[i];\r\n                indexMap[i] = i - counter;\r\n            }\r\n        }\r\n\r\n        this.internalTryToChangeCollection(indexMap, newElements);\r\n    }\r\n\r\n    /**\r\n     * Attemps to change the collection managed by this instance.\r\n     * @param indexMap Map from old indexes to new indexes.\r\n     * @param newElements New elements to manage if the change is not prevented.\r\n     */\r\n    protected internalTryToChangeCollection(\r\n        indexMap: {[oldIndex: number]: number} = {},\r\n        newElements: T[],\r\n    ): CollectionChangeEventArgs<T> {\r\n        const cancelableChangeEventArgs = new CancelableCollectionChangeEventArgs(indexMap, newElements);\r\n        this.eventEmitter.emit(COLLECTION_MANAGER_EVENTS.collectionBeforeChange, cancelableChangeEventArgs);\r\n\r\n        if (!cancelableChangeEventArgs.getPreventDefault()) {\r\n            this.collection = newElements;\r\n        }\r\n\r\n        const changeEventArgs = new CollectionChangeEventArgs<T>(\r\n            indexMap,\r\n            newElements,\r\n            cancelableChangeEventArgs.getPreventDefault(),\r\n        );\r\n        this.eventEmitter.emit(COLLECTION_MANAGER_EVENTS.collectionAfterChange, changeEventArgs);\r\n        return changeEventArgs;\r\n    }\r\n}\r\n","import { EventEmitter } from 'events';\r\nimport { CollectionChangeEventArgs } from './collection-change-args';\r\nimport { CollectionManager } from './collection-manager';\r\n\r\nexport class HtmlChildrenManager extends CollectionManager<HTMLElement> {\r\n    /**\r\n     * Parent element of the members of the collection\r\n     */\r\n    protected parentElement: HTMLElement;\r\n\r\n    public constructor(collection: HTMLElement[], eventEmitter: EventEmitter, parentElement: HTMLElement) {\r\n        super(collection, eventEmitter);\r\n\r\n        this.parentElement = parentElement;\r\n    }\r\n\r\n    /**\r\n     * Attemps to change the collection managed by this instance.\r\n     * @param indexMap Map from old indexes to new indexes.\r\n     * @param newElements New elements to manage if the change is not prevented.\r\n     */\r\n    protected internalTryToChangeCollection(\r\n        indexMap: {[oldIndex: number]: number} = {},\r\n        newElements: HTMLElement[],\r\n    ): CollectionChangeEventArgs<HTMLElement> {\r\n        const eventArgs = super.internalTryToChangeCollection(indexMap, newElements);\r\n\r\n        if (!eventArgs.getPreventDefault()) {\r\n            // Perform DOM modifications.\r\n            var deletionPivot = 0;\r\n            var insertionPivot = 0;\r\n            var oldIndexesCounter = 0;\r\n            var newIndexesCounter = 0;\r\n\r\n            // Important: Keys must be guaranteed to be ordered!\r\n            for (const key in indexMap) {\r\n                if (indexMap.hasOwnProperty(key)) {\r\n                    const keyNumber: number = Number(key);\r\n                    for (var i = oldIndexesCounter; i < keyNumber; ++i) {\r\n                        // Delete old elements\r\n                        this.parentElement.removeChild(this.parentElement.children[i + insertionPivot - deletionPivot]);\r\n                        ++deletionPivot;\r\n                    }\r\n\r\n                    const newIndex: number = indexMap[key];\r\n                    for (var i = newIndexesCounter; i < newIndex; ++i) {\r\n                        // Insert new elements.\r\n                        this.parentElement.insertBefore(newElements[i], this.parentElement.children[i]);\r\n                        ++insertionPivot;\r\n                    }\r\n\r\n                    oldIndexesCounter = keyNumber + 1;\r\n                    newIndexesCounter = newIndex + 1;\r\n                }\r\n            }\r\n\r\n            for (var i = newIndexesCounter; i < newElements.length; ++i) {\r\n                this.parentElement.appendChild(newElements[i]);\r\n            }\r\n        }\r\n\r\n        return eventArgs;\r\n    }\r\n}\r\n","export class TokenMap<T> {\r\n    //#region Properties\r\n\r\n    /**\r\n     * Inner map.\r\n     */\r\n    protected innerMap: Map<number, T>;\r\n\r\n    /**\r\n     * List of unused indexed bellow the maximun used index.\r\n     */\r\n    protected unusedIndexes: number[];\r\n\r\n    //#endregion\r\n\r\n    public constructor() {\r\n        this.innerMap = new Map<number, T>();\r\n        this.unusedIndexes = new Array();\r\n    }\r\n\r\n    /**\r\n     * Adds an element to the array collection.\r\n     * @param elem Element to be added to the array.\r\n     * @returns index in which the element is located.\r\n     */\r\n    public add(elem: T): number {\r\n        if (0 === this.unusedIndexes.length) {\r\n            const lastIndex: number = this.innerMap.size;\r\n            this.innerMap.set(lastIndex, elem);\r\n            return lastIndex;\r\n        } else {\r\n            const lastIndex: number = this.unusedIndexes[this.unusedIndexes.length - 1];\r\n            --this.unusedIndexes.length;\r\n            this.innerMap.set(lastIndex, elem);\r\n            return lastIndex;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Obtains the amount of elements inside the array.\r\n     * @returns Amount of elements inside the array.\r\n     */\r\n    public count(): number {\r\n        return this.innerMap.size;\r\n    }\r\n\r\n    /**\r\n     * Iterates over the array and applies a function.\r\n     * @param consumer Function to apply to any pair of index-element found (undefined values are discarted).\r\n     */\r\n    public foreach(consumer: (value: T, key: number) => void): void {\r\n        this.innerMap.forEach(function(value: T, key: number) {\r\n            consumer(value, key);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Obtains an element at the specified index.\r\n     * @param index Index of the element to obtaint.\r\n     * @returns Element obtianed at the specified index.\r\n     */\r\n    public get(index: number): T {\r\n        return this.innerMap.get(index);\r\n    }\r\n\r\n    /**\r\n     * Removes an element at the position specified.\r\n     * @param index Index of the element to be removed.\r\n     * @returns Result of the operation.\r\n     */\r\n    public remove(index: number): boolean {\r\n        if (this.innerMap.has(index)) {\r\n            this.innerMap.delete(index);\r\n            this.unusedIndexes[this.unusedIndexes.length] = index;\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n","import { AnimationEngineTests } from './test/animation/animation-engine.test';\r\nimport { SingleSlideCarouselTests } from './test/carousel/single-slide-carousel.test';\r\nimport { CollectionManagerTests } from './test/collection/collection-manager.test';\r\nimport { TokenMapTests } from './test/collection/token-map.test';\r\n\r\nconst soraTest = function() {\r\n    return {\r\n        performTests: function() {\r\n            new AnimationEngineTests().performTests();\r\n            new CollectionManagerTests().performTests();\r\n            new SingleSlideCarouselTests().performTests();\r\n            new TokenMapTests().performTests();\r\n        },\r\n    };\r\n} ();\r\n\r\nmodule.exports = soraTest;\r\n","/**\r\n * Constraint that determines the start of the task part.\r\n */\r\nexport interface ITaskPartWhenConstraint {\r\n    /**\r\n     * When entity to check once this constraint is ensured.\r\n     */\r\n    after: ITaskPartWhenConstraint;\r\n    /**\r\n     * Type of this constraint.\r\n     */\r\n    constraintType: string;\r\n}\r\n\r\n/**\r\n * Constraint that determines the start of the task part.\r\n */\r\nexport abstract class TaskPartWhenConstraint implements ITaskPartWhenConstraint {\r\n    /**\r\n     * When entity to check once this constraint is ensured.\r\n     */\r\n    public after: ITaskPartWhenConstraint;\r\n    /**\r\n     * Type of this constraint.\r\n     */\r\n    public constraintType: string;\r\n\r\n    /**\r\n     * Creates a new task part constraint.\r\n     * @param after Constraint to apply after this constraint is checked.\r\n     * @param constraintType Constraint type.\r\n     */\r\n    public constructor(after: ITaskPartWhenConstraint, constraintType: string) {\r\n        this.after = after;\r\n        this.constraintType = constraintType;\r\n    }\r\n}\r\n","import { ITaskPartWhenConstraint } from './task-flow-when';\r\nimport {\r\n    TASK_CONSTRAINT_TYPES,\r\n    TaskPartConstraint,\r\n} from './task-part-constraint';\r\n\r\n/**\r\n * Represents a when constraint that is checked once a task part starts.\r\n */\r\nexport class TaskPartBeginConstraint extends TaskPartConstraint {\r\n    public constructor(after: ITaskPartWhenConstraint, alias: string) {\r\n        super(after, alias, TASK_CONSTRAINT_TYPES.START);\r\n    }\r\n}\r\n","import {\r\n    ITaskPartWhenConstraint,\r\n    TaskPartWhenConstraint,\r\n} from './task-flow-when';\r\n\r\n/**\r\n * Task constraint types\r\n */\r\nexport const TASK_CONSTRAINT_TYPES = {\r\n    /**\r\n     * Requires the end of a task part.\r\n     */\r\n    END: 'anim.end',\r\n    /**\r\n     * Requires a group of constraints.\r\n     */\r\n    GROUP: 'group',\r\n    /**\r\n     * Requires the start of a task part.\r\n     */\r\n    START : 'anim.start',\r\n    /**\r\n     * Requires an amount of time.\r\n     */\r\n    WAIT_FOR: 'wait',\r\n};\r\n\r\nexport abstract class TaskPartConstraint extends TaskPartWhenConstraint {\r\n    /**\r\n     * Alias of the part affected by this constraint.\r\n     */\r\n    public alias: string;\r\n\r\n    /**\r\n     * Creates a new task part constraint.\r\n     * @param after Constraint to apply after this constraint is checked.\r\n     * @param alias Aliases of the parts affected by this constraint.\r\n     * @param constraintType Constraint type.\r\n     */\r\n    public constructor(after: ITaskPartWhenConstraint, alias: string, constraintType: string) {\r\n        super(after, constraintType);\r\n\r\n        this.alias = alias;\r\n    }\r\n}\r\n","import { ITaskPartWhenConstraint } from './task-flow-when';\r\nimport {\r\n    TASK_CONSTRAINT_TYPES,\r\n    TaskPartConstraint,\r\n} from './task-part-constraint';\r\n\r\n/**\r\n * Represents a when constraint that is checked once a task part ends.\r\n */\r\nexport class TaskPartEndConstraint extends TaskPartConstraint {\r\n    public constructor(after: ITaskPartWhenConstraint, alias: string) {\r\n        super(after, alias, TASK_CONSTRAINT_TYPES.END);\r\n    }\r\n}\r\n","import {\r\n    ITaskPartWhenConstraint,\r\n    TaskPartWhenConstraint,\r\n} from './task-flow-when';\r\nimport { TASK_CONSTRAINT_TYPES } from './task-part-constraint';\r\n\r\n/**\r\n * Represents a when constraint that is checked once an amount of time passes.\r\n */\r\nexport class TaskTimeConstraint extends TaskPartWhenConstraint {\r\n    /**\r\n     * Milliseconds to wait.\r\n     */\r\n    public millis: number;\r\n\r\n    public constructor(after: ITaskPartWhenConstraint, millis: number) {\r\n        super(after, TASK_CONSTRAINT_TYPES.WAIT_FOR);\r\n        this.millis = millis;\r\n    }\r\n}\r\n","import { EventEmitter } from 'events';\r\nimport { TokenMap } from '../../collection/token-map';\r\nimport { IOperationManagerAccess } from './operation-manager-access';\r\n\r\n/**\r\n * Operation arguments\r\n */\r\nexport interface IOperationArgs {\r\n    aliases: string[];\r\n}\r\n\r\n/**\r\n * Represents an operation manager. The operation is propagated using an event.\r\n * All the subscribers\r\n */\r\nexport class OperationManager<Args extends IOperationArgs> implements IOperationManagerAccess<Args> {\r\n\r\n    //#region Attributes\r\n\r\n    /**\r\n     * Function to be called to handle the event.\r\n     */\r\n    protected callFunction: (eventArgs: Args) => void;\r\n\r\n    /**\r\n     * Alias of the event.\r\n     */\r\n    protected eventAlias: string;\r\n\r\n    /**\r\n     * Event emmitter of the event.\r\n     */\r\n    protected eventEmitter: EventEmitter;\r\n\r\n    /**\r\n     * Object to storage all the functions subscribed.\r\n     */\r\n    protected subscriptionStorage: { [alias: string]: TokenMap<(eventArgs: Args) => void> };\r\n\r\n    //#endregion\r\n\r\n    /**\r\n     * Creates a new operation manager\r\n     * @param eventAlias Event alias.\r\n     * @param eventEmitter Event emitter.\r\n     */\r\n    public constructor(eventAlias: string, eventEmitter: EventEmitter) {\r\n        const that = this;\r\n        this.callFunction = function(eventArgs: Args): void {\r\n            if (eventArgs.aliases == null) {\r\n                for (const alias in that.subscriptionStorage) {\r\n                    if (that.subscriptionStorage.hasOwnProperty(alias)) {\r\n                        const subscribers = that.subscriptionStorage[alias];\r\n                        if (subscribers != null) {\r\n                            subscribers.foreach(function(value: (eventArgs: Args) => void) {\r\n                                value(eventArgs);\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                for (const alias of eventArgs.aliases) {\r\n                    const subscribers = that.subscriptionStorage[alias];\r\n                    if (subscribers != null) {\r\n                        subscribers.foreach(function(value: (eventArgs: Args) => void) {\r\n                            value(eventArgs);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        this.eventAlias = eventAlias;\r\n        this.eventEmitter = eventEmitter;\r\n        this.subscriptionStorage = {};\r\n\r\n        this.eventEmitter.addListener(this.eventAlias, this.callFunction);\r\n    }\r\n\r\n    /**\r\n     * Disposes the instance.\r\n     */\r\n    public dispose(): void {\r\n        this.eventEmitter.removeListener(this.eventAlias, this.callFunction);\r\n    }\r\n\r\n    /**\r\n     * Substribes a handler under an alias.\r\n     * @param alias Alias of the handler.\r\n     * @param handler Handler to be subscribed.\r\n     */\r\n    public subscribe(alias: string, handler: (eventArgs: Args) => void): number {\r\n        if (null == this.subscriptionStorage[alias]) {\r\n            this.subscriptionStorage[alias] = new TokenMap();\r\n        }\r\n        return this.subscriptionStorage[alias].add(handler);\r\n    }\r\n\r\n    /**\r\n     * Unsubscribes a handler under an alias.\r\n     * @param alias Alias of the handler.\r\n     * @param index Index of the handler.\r\n     */\r\n    public unsubscribe(alias: string, index: number): boolean {\r\n        if (null == this.subscriptionStorage[alias]) {\r\n            return false;\r\n        } else {\r\n            return this.subscriptionStorage[alias].remove(index);\r\n        }\r\n    }\r\n}\r\n","import { EventEmitter } from 'events';\r\nimport { ITaskFlow } from './flow/task-flow';\r\nimport { ITaskFlowPart } from './flow/task-flow-part';\r\nimport {\r\n    ITaskFlowPartEndArgs,\r\n    ITaskFlowPartStartArgs,\r\n} from './flow/task-flow-part-event-args';\r\nimport { ITaskPartWhenConstraint } from './flow/task-flow-when';\r\nimport { TaskPartBeginConstraint } from './flow/task-part-begin-constraint';\r\nimport { TASK_CONSTRAINT_TYPES } from './flow/task-part-constraint';\r\nimport { TaskPartEndConstraint } from './flow/task-part-end-constraint';\r\nimport { TaskGroupConstraint } from './flow/task-part-group-constraint';\r\nimport { TaskTimeConstraint } from './flow/task-part-time-constraint';\r\nimport { OperationManager } from './operation/operation-manager';\r\nimport { IOperationManagerAccess } from './operation/operation-manager-access';\r\nimport { TASK_PART_WHEN_EVENTS } from './task-part-when-events';\r\nimport { TaskPartWhenOperator } from './task-part-when-operator';\r\n\r\n/**\r\n * Represents a task engine.\r\n */\r\nexport abstract class TaskEngine<TPart extends ITaskFlowPart> {\r\n    //#region Attributes\r\n\r\n    /**\r\n     * Task currently managed.\r\n     */\r\n    protected currentTask: ITaskFlow<TPart>;\r\n\r\n    /**\r\n     * Event emitter to use\r\n     */\r\n    protected eventEmitter: EventEmitter;\r\n\r\n    //#region Operations\r\n\r\n    /**\r\n     * Manager that handles the part end event.\r\n     */\r\n    protected partEndManager: OperationManager<ITaskFlowPartEndArgs<TPart>>;\r\n\r\n    /**\r\n     * Manager that handles the part start event.\r\n     */\r\n    protected partStartManager: OperationManager<ITaskFlowPartStartArgs<TPart>>;\r\n\r\n    //#endregion\r\n\r\n    //#endregion\r\n\r\n    //#region Public\r\n\r\n    /**\r\n     * Creates a new instance.\r\n     */\r\n    public constructor() {\r\n        this.eventEmitter = new EventEmitter();\r\n\r\n        this.partEndManager = new OperationManager<ITaskFlowPartEndArgs<TPart>>(\r\n            TASK_PART_WHEN_EVENTS.END,\r\n            this.eventEmitter,\r\n        );\r\n        this.partStartManager = new OperationManager<ITaskFlowPartStartArgs<TPart>>(\r\n            TASK_PART_WHEN_EVENTS.START,\r\n            this.eventEmitter,\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Obtains the access of the part end event.\r\n     * @returns Access of the part end event.\r\n     */\r\n    public getPartEndListenerAccess(): IOperationManagerAccess<ITaskFlowPartEndArgs<TPart>> {\r\n        const that = this;\r\n        return {\r\n            subscribe: function(\r\n                alias: string,\r\n                handler: (eventArgs: ITaskFlowPartEndArgs<TPart>) => void,\r\n            ): number {\r\n                return that.partEndManager.subscribe(alias, handler);\r\n            },\r\n            unsubscribe: function(alias: string, index: number): boolean {\r\n                return that.partEndManager.unsubscribe(alias, index);\r\n            },\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Obtains the access of the part start event.\r\n     * @returns Access of the part start event.\r\n     */\r\n    public getPartStartListenerAccess(): IOperationManagerAccess<ITaskFlowPartStartArgs<TPart>> {\r\n        const that = this;\r\n        return {\r\n            subscribe: function(\r\n                alias: string,\r\n                handler: (eventArgs: ITaskFlowPartStartArgs<TPart>) => void,\r\n            ): number {\r\n                return that.partStartManager.subscribe(alias, handler);\r\n            },\r\n            unsubscribe: function(alias: string, index: number): boolean {\r\n                return that.partStartManager.unsubscribe(alias, index);\r\n            },\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Handles a task flow.\r\n     * @param taskFlow Task flow to be managed.\r\n     * @returns Task part promises.\r\n     */\r\n    public handle(taskFlow: ITaskFlow<TPart>): Array<Promise<void>> {\r\n        if (taskFlow == null) {\r\n            throw new Error('It\\'s required a task flow.');\r\n        }\r\n        if (taskFlow.parts == null) {\r\n            throw new Error('It\\'s required a task flow with parts.');\r\n        }\r\n\r\n        this.currentTask = taskFlow;\r\n        const partPromises: Array<Promise<void>> = new Array(taskFlow.parts.length);\r\n\r\n        for (var i = 0; i < taskFlow.parts.length; ++i) {\r\n            partPromises[i] = this.handleTaskPart(taskFlow.parts[i]);\r\n        }\r\n\r\n        return partPromises;\r\n    }\r\n\r\n    //#endregion\r\n\r\n    /**\r\n     * Handles a task part.\r\n     *\r\n     * @param part Task part to handle.\r\n     *\r\n     * @returns Promise resolved once the part of the task is finished.\r\n     */\r\n    protected handleTaskPart(part: TPart): Promise<void> {\r\n        const that = this;\r\n\r\n        return new Promise<void>(function(resolve, reject) {\r\n            that.handleTaskPartWhen(part.when).then(function() {\r\n                // 1. Emit the start of task part.\r\n                that.eventEmitter.emit(\r\n                    TASK_PART_WHEN_EVENTS.START,\r\n                    {\r\n                        aliases: [part.alias],\r\n                        part: part,\r\n                    } as ITaskFlowPartStartArgs<TPart>,\r\n                );\r\n\r\n                const promise: PromiseLike<{} | void> = that.performTask(part);\r\n\r\n                promise.then(function() {\r\n                    // 3. Emit the end of the task part and resolve the promise.\r\n                    that.eventEmitter.emit(\r\n                        TASK_PART_WHEN_EVENTS.END,\r\n                        {\r\n                            aliases: [part.alias],\r\n                            part: part,\r\n                        } as ITaskFlowPartEndArgs<TPart>,\r\n                    );\r\n                    resolve();\r\n                });\r\n            }).catch(function(err: any) {\r\n                reject(err);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Performs a task part.\r\n     * @param part Task part to be performed.\r\n     * @returns Promise resolved once the part task is performed.\r\n     */\r\n    protected abstract performTask(part: TPart): PromiseLike<{} | void>;\r\n\r\n    //#region TaskPartWhenconstraint\r\n\r\n    /**\r\n     * Handles the when entity of a task part.\r\n     *\r\n     * @param whenEntity When entity to handle.\r\n     *\r\n     * @returns Promise resolved once the when entity is checked.\r\n     */\r\n    protected handleTaskPartWhen(whenEntity: ITaskPartWhenConstraint): Promise<void> {\r\n        const that = this;\r\n        return new Promise<void>(function(resolve, reject) {\r\n            if (null == whenEntity) {\r\n                resolve();\r\n            } else {\r\n                switch (whenEntity.constraintType) {\r\n                    case TASK_CONSTRAINT_TYPES.START:\r\n                        that.handleTaskPartWhenPartBegins(whenEntity as TaskPartBeginConstraint)\r\n                            .then(resolve);\r\n                        break;\r\n                    case TASK_CONSTRAINT_TYPES.END:\r\n                        that.handleTaskPartWhenPartEnds(whenEntity as TaskPartEndConstraint)\r\n                            .then(resolve);\r\n                        break;\r\n                    case TASK_CONSTRAINT_TYPES.GROUP:\r\n                        that.handleTaskPartWhenPartGroup(whenEntity as TaskGroupConstraint)\r\n                            .then(resolve);\r\n                        break;\r\n                    case TASK_CONSTRAINT_TYPES.WAIT_FOR:\r\n                        that.handleTaskPartWhenWaitFor(whenEntity as TaskTimeConstraint)\r\n                            .then(resolve);\r\n                        break;\r\n                    default:\r\n                        throw new Error('Unexpected when entity type.');\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handles the when entity (TaskPartBeginConstraint) of a task part.\r\n     *\r\n     * @param whenEntity When entity to handle.\r\n     * @returns Promise resolved once the when entity is checked.\r\n     */\r\n    protected handleTaskPartWhenPartBegins(whenEntity: TaskPartBeginConstraint): Promise<void> {\r\n        const that = this;\r\n        return new Promise<void>(function(resolve, reject) {\r\n            const eventHandler = function() {\r\n                that.partStartManager.unsubscribe(whenEntity.alias, token);\r\n                if (null == whenEntity.after) {\r\n                    resolve();\r\n                } else {\r\n                    that.handleTaskPartWhen(whenEntity.after)\r\n                        .then(resolve);\r\n                }\r\n            };\r\n            const token: number = that.partStartManager.subscribe(whenEntity.alias, eventHandler);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handles the when entity (TaskPartEndConstraint) of a task part.\r\n     *\r\n     * @param whenEntity When entity to handle.\r\n     * @returns Promise resolved once the when entity is checked.\r\n     */\r\n    protected handleTaskPartWhenPartEnds(whenEntity: TaskPartEndConstraint): Promise<void> {\r\n        const that = this;\r\n        return new Promise<void>(function(resolve, reject) {\r\n            const eventHandler = function() {\r\n                that.partEndManager.unsubscribe(whenEntity.alias, token);\r\n                if (null == whenEntity.after) {\r\n                    resolve();\r\n                } else {\r\n                    that.handleTaskPartWhen(whenEntity.after)\r\n                        .then(resolve);\r\n                }\r\n            };\r\n            const token: number = that.partEndManager.subscribe(whenEntity.alias, eventHandler);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handles the when entity (TaskGroupConstraint) of a task part.\r\n     *\r\n     * @param whenEntity When entity to handle.\r\n     *\r\n     * @returns Promise resolved once the when entity is checked.\r\n     */\r\n    protected handleTaskPartWhenPartGroup(whenEntity: TaskGroupConstraint): Promise<void> {\r\n        const that = this;\r\n        return new Promise<void>(function(resolve, reject) {\r\n            const childPromises: Array<Promise<void>> = new Array(whenEntity.constraints.length);\r\n\r\n            for (var i = 0; i < whenEntity.constraints.length; ++i) {\r\n                childPromises[i] = new Promise<void>(function(resolve, reject) {\r\n                    that.handleTaskPartWhen(whenEntity.constraints[i])\r\n                        .then(resolve);\r\n                });\r\n            }\r\n\r\n            if (TaskPartWhenOperator.AND === whenEntity.operator) {\r\n                Promise.all(childPromises)\r\n                    .then(function() {\r\n                        resolve();\r\n                    });\r\n            } else if (TaskPartWhenOperator.OR === whenEntity.operator) {\r\n                Promise.race(childPromises)\r\n                .then(function() {\r\n                    resolve();\r\n                });\r\n            } else {\r\n                reject('Unexpected operator.');\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handles the when entity (TaskTimeConstraint) of a task part.\r\n     *\r\n     * @param whenEntity When entity to handle.\r\n     *\r\n     * @returns Promise resolved once the when entity is checked.\r\n     */\r\n    protected handleTaskPartWhenWaitFor(whenEntity: TaskTimeConstraint): Promise<void> {\r\n        const that = this;\r\n        return new Promise<void>(function(resolve, reject) {\r\n            setTimeout(function() {\r\n                if (whenEntity.after == null) {\r\n                    resolve();\r\n                } else {\r\n                    that.handleTaskPartWhen(whenEntity.after)\r\n                        .then(resolve);\r\n                }\r\n            }, whenEntity.millis);\r\n        });\r\n    }\r\n\r\n    //#endregion\r\n}\r\n","/**\r\n * Prefixes used to ganerate alias for events over task parts.\r\n */\r\nexport const TASK_PART_WHEN_EVENTS = {\r\n    /**\r\n     * Prefix for any event raised once a task part is ended.\r\n     */\r\n    END: 'part.end',\r\n    /**\r\n     * Prefix for any event raised once a task part is started.\r\n     */\r\n    START: 'part.start',\r\n};\r\n","/**\r\n * Logical operator to apply.\r\n */\r\nexport enum TaskPartWhenOperator {\r\n    /**\r\n     * And operator.\r\n     */\r\n    AND,\r\n    /**\r\n     * Or operator.\r\n     */\r\n    OR,\r\n}\r\n","import { SingleAnimationEngine } from '../../animation/animation-engine';\r\nimport { IAnimationFlowPart } from '../../animation/animation-flow-part';\r\nimport { ITaskFlow } from '../../task/flow/task-flow';\r\nimport { ITaskFlowPartArgs } from '../../task/flow/task-flow-part-event-args';\r\nimport { TaskPartBeginConstraint } from '../../task/flow/task-part-begin-constraint';\r\nimport { TaskPartEndConstraint } from '../../task/flow/task-part-end-constraint';\r\nimport { TaskTimeConstraint } from '../../task/flow/task-part-time-constraint';\r\nimport { IOperationManagerAccess } from '../../task/operation/operation-manager-access';\r\nimport { ITest } from '../ITest';\r\n\r\nexport class AnimationEngineTests implements ITest {\r\n\r\n    //#region Public\r\n\r\n    public performTests(): void {\r\n        describe('Animation Engine Tests', () => {\r\n            this.itMustBeInitializable();\r\n            this.itMustBeAbleToPerformASimpleAnimation();\r\n            this.itMustBeAbleToPerformMultipleAnimations();\r\n            this.itMustBeAbleToPerformAnimationsWhenAnimationEnds();\r\n            this.itMustBeAbleToPerformAnimationsWhenAnimationStarts();\r\n            this.itMustBeAbleToPerformAnimationAfterMillis();\r\n        });\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Protected\r\n\r\n    protected checkAnimation<\r\n        TArgs extends ITaskFlowPartArgs<TPart>,\r\n        TPart extends IAnimationFlowPart,\r\n    >(\r\n        additionalOperations: (eventArgs: TArgs) => void,\r\n        operationManagerAccess: IOperationManagerAccess<TArgs>,\r\n        part: TPart,\r\n    ): () => boolean {\r\n        var eventRaised: boolean = false;\r\n        const eventHandler = function(eventArgs: TArgs) {\r\n            eventRaised = true;\r\n            eventArgs.part.styles.forEach(function(style: string) {\r\n                expect(part.styles).toContain(style);\r\n            });\r\n            expect(operationManagerAccess.unsubscribe(\r\n                part.alias,\r\n                handlerToken,\r\n            )).toBe(true);\r\n            if (null != additionalOperations) {\r\n                additionalOperations(eventArgs);\r\n            }\r\n        };\r\n        const handlerToken: number =\r\n            operationManagerAccess.subscribe(\r\n                part.alias,\r\n                eventHandler,\r\n            );\r\n        return function() { return eventRaised; };\r\n    }\r\n\r\n    protected generateDivElement(): HTMLElement {\r\n        const r = Math.ceil(Math.random() * 256);\r\n        const g = Math.ceil(Math.random() * 256);\r\n        const b = Math.ceil(Math.random() * 256);\r\n        const element: HTMLElement = document.createElement('div');\r\n        element.style.backgroundColor = 'rgb(' + r.toString() + ', ' + g.toString() + ', ' + b.toString() + ')';\r\n        const height: number = 100;\r\n        element.style.height = height + 'px';\r\n        return element;\r\n    }\r\n\r\n    //#endregion\r\n\r\n    private itMustBeInitializable(): void {\r\n        it('mustBeInitializable', () => {\r\n            const animationEngine: SingleAnimationEngine = new SingleAnimationEngine();\r\n            expect(animationEngine).not.toBeNull();\r\n        });\r\n    }\r\n\r\n    private itMustBeAbleToPerformASimpleAnimation() {\r\n        it('mustBeAbleToPerformASimpleAnimation', (done) => {\r\n            const element = this.generateDivElement();\r\n            document.body.appendChild(element);\r\n            const animationEngine: SingleAnimationEngine = new SingleAnimationEngine();\r\n            const taskFlow: ITaskFlow<IAnimationFlowPart> = {\r\n                parts: [\r\n                    {\r\n                        alias: 'elem',\r\n                        elements: [ element ],\r\n                        styles: [ 'sora-fade-out-animation' ],\r\n                        when: null,\r\n                    },\r\n                ],\r\n            };\r\n            const partStartAccess = animationEngine.getPartStartListenerAccess();\r\n            const partEndAccess = animationEngine.getPartEndListenerAccess();\r\n            const partEndToken = this.checkAnimation(\r\n                null,\r\n                partEndAccess,\r\n                taskFlow.parts[0],\r\n            );\r\n            const partStartToken = this.checkAnimation(\r\n                null,\r\n                partStartAccess,\r\n                taskFlow.parts[0],\r\n            );\r\n            const promises: Array<Promise<void>> = animationEngine.handle(taskFlow);\r\n            Promise.all(promises).then(function() {\r\n                expect(partEndToken()).toBe(true);\r\n                expect(partStartToken()).toBe(true);\r\n                document.body.removeChild(element);\r\n                done();\r\n            }).catch(function(err) {\r\n                done.fail(err);\r\n            });\r\n        });\r\n    }\r\n\r\n    private itMustBeAbleToPerformMultipleAnimations() {\r\n        it('mustBeAbleToPerformMultipleAnimations', (done) => {\r\n            const element1 = this.generateDivElement();\r\n            const element2 = this.generateDivElement();\r\n            document.body.appendChild(element1);\r\n            document.body.appendChild(element2);\r\n            const animationEngine: SingleAnimationEngine = new SingleAnimationEngine();\r\n            const taskFlow: ITaskFlow<IAnimationFlowPart> = {\r\n                parts: [\r\n                    {\r\n                        alias: 'elem0',\r\n                        elements: [ element1 ],\r\n                        styles: [ 'sora-fade-out-animation' ],\r\n                        when: null,\r\n                    },\r\n                    {\r\n                        alias: 'elem1',\r\n                        elements: [ element2 ],\r\n                        styles: [ 'sora-fade-out-animation' ],\r\n                        when: null,\r\n                    },\r\n                ],\r\n            };\r\n            const partStartAccess = animationEngine.getPartStartListenerAccess();\r\n            const partEndAccess = animationEngine.getPartEndListenerAccess();\r\n            const partEndToken1 = this.checkAnimation(\r\n                null,\r\n                partEndAccess,\r\n                taskFlow.parts[0],\r\n            );\r\n            const partEndToken2 = this.checkAnimation(\r\n                null,\r\n                partEndAccess,\r\n                taskFlow.parts[1],\r\n            );\r\n            const partStartToken1 = this.checkAnimation(\r\n                null,\r\n                partStartAccess,\r\n                taskFlow.parts[0],\r\n            );\r\n            const partStartToken2 = this.checkAnimation(\r\n                null,\r\n                partStartAccess,\r\n                taskFlow.parts[1],\r\n            );\r\n            const promises: Array<Promise<void>> = animationEngine.handle(taskFlow);\r\n            Promise.all(promises).then(function() {\r\n                expect(partEndToken1()).toBe(true);\r\n                expect(partEndToken2()).toBe(true);\r\n                expect(partStartToken1()).toBe(true);\r\n                expect(partStartToken2()).toBe(true);\r\n                document.body.removeChild(element1);\r\n                document.body.removeChild(element2);\r\n                done();\r\n            }).catch(function(err) {\r\n                done.fail(err);\r\n            });\r\n        });\r\n    }\r\n\r\n    private itMustBeAbleToPerformAnimationsWhenAnimationEnds() {\r\n        it('mustBeAbleToPerformAnimationsWhenAnimationEnds', (done) => {\r\n            const element0 = this.generateDivElement();\r\n            const element1 = this.generateDivElement();\r\n            document.body.appendChild(element0);\r\n            document.body.appendChild(element1);\r\n            const animationEngine: SingleAnimationEngine = new SingleAnimationEngine();\r\n            const taskFlow: ITaskFlow<IAnimationFlowPart> = {\r\n                parts: [\r\n                    {\r\n                        alias: 'elem0',\r\n                        elements: [ element0 ],\r\n                        styles: [ 'sora-fade-out-animation' ],\r\n                        when: new TaskPartEndConstraint(null, 'elem1'),\r\n                    },\r\n                    {\r\n                        alias: 'elem1',\r\n                        elements: [ element1 ],\r\n                        styles: [ 'sora-fade-out-animation' ],\r\n                        when: null,\r\n                    },\r\n                ],\r\n            };\r\n            const partStartAccess = animationEngine.getPartStartListenerAccess();\r\n            const partEndAccess = animationEngine.getPartEndListenerAccess();\r\n            const partEndToken0 = this.checkAnimation(\r\n                null,\r\n                partEndAccess,\r\n                taskFlow.parts[0],\r\n            );\r\n            const partEndToken1 = this.checkAnimation(\r\n                null,\r\n                partEndAccess,\r\n                taskFlow.parts[1],\r\n            );\r\n            const partStartToken0 = this.checkAnimation(\r\n                function(eventArgs) { expect(partEndToken1()).toBe(true); },\r\n                partStartAccess,\r\n                taskFlow.parts[0],\r\n            );\r\n            const partStartToken1 = this.checkAnimation(\r\n                null,\r\n                partStartAccess,\r\n                taskFlow.parts[1],\r\n            );\r\n            const promises: Array<Promise<void>> = animationEngine.handle(taskFlow);\r\n            Promise.all(promises).then(function() {\r\n                expect(partEndToken0()).toBe(true);\r\n                expect(partEndToken1()).toBe(true);\r\n                expect(partStartToken0()).toBe(true);\r\n                expect(partStartToken1()).toBe(true);\r\n                document.body.removeChild(element0);\r\n                document.body.removeChild(element1);\r\n                done();\r\n            }).catch(function(err) {\r\n                done.fail(err);\r\n            });\r\n        });\r\n    }\r\n\r\n    private itMustBeAbleToPerformAnimationsWhenAnimationStarts() {\r\n        it('mustBeAbleToPerformAnimationsWhenAnimationStarts', (done) => {\r\n            const element0 = this.generateDivElement();\r\n            const element1 = this.generateDivElement();\r\n            document.body.appendChild(element0);\r\n            document.body.appendChild(element1);\r\n            const animationEngine: SingleAnimationEngine = new SingleAnimationEngine();\r\n            const taskFlow: ITaskFlow<IAnimationFlowPart> = {\r\n                parts: [\r\n                    {\r\n                        alias: 'elem0',\r\n                        elements: [ element0 ],\r\n                        styles: [ 'sora-fade-out-animation' ],\r\n                        when: new TaskPartBeginConstraint(null, 'elem1'),\r\n                    },\r\n                    {\r\n                        alias: 'elem1',\r\n                        elements: [ element1 ],\r\n                        styles: [ 'sora-fade-out-animation' ],\r\n                        when: null,\r\n                    },\r\n                ],\r\n            };\r\n            const partStartAccess = animationEngine.getPartStartListenerAccess();\r\n            const partEndAccess = animationEngine.getPartEndListenerAccess();\r\n            const partEndToken0 = this.checkAnimation(\r\n                null,\r\n                partEndAccess,\r\n                taskFlow.parts[0],\r\n            );\r\n            const partEndToken1 = this.checkAnimation(\r\n                null,\r\n                partEndAccess,\r\n                taskFlow.parts[1],\r\n            );\r\n            const partStartToken0 = this.checkAnimation(\r\n                function(eventArgs) { expect(partStartToken1()).toBe(true); },\r\n                partStartAccess,\r\n                taskFlow.parts[0],\r\n            );\r\n            const partStartToken1 = this.checkAnimation(\r\n                null,\r\n                partStartAccess,\r\n                taskFlow.parts[1],\r\n            );\r\n            const promises: Array<Promise<void>> = animationEngine.handle(taskFlow);\r\n            Promise.all(promises).then(function() {\r\n                expect(partEndToken0()).toBe(true);\r\n                expect(partEndToken1()).toBe(true);\r\n                expect(partStartToken0()).toBe(true);\r\n                expect(partStartToken1()).toBe(true);\r\n                document.body.removeChild(element0);\r\n                document.body.removeChild(element1);\r\n                done();\r\n            }).catch(function(err) {\r\n                done.fail(err);\r\n            });\r\n        });\r\n    }\r\n\r\n    private itMustBeAbleToPerformAnimationAfterMillis() {\r\n        it('mustBeAbleToPerformAnimationAfterMillis', (done) => {\r\n            const element = this.generateDivElement();\r\n            document.body.appendChild(element);\r\n            const animationEngine: SingleAnimationEngine = new SingleAnimationEngine();\r\n            const timeToWait = 1000;\r\n            const taskFlow: ITaskFlow<IAnimationFlowPart> = {\r\n                parts: [\r\n                    {\r\n                        alias: 'elem',\r\n                        elements: [ element ],\r\n                        styles: [ 'sora-fade-out-animation' ],\r\n                        when: new TaskTimeConstraint(null, timeToWait),\r\n                    },\r\n                ],\r\n            };\r\n            const partStartAccess = animationEngine.getPartStartListenerAccess();\r\n            const partEndAccess = animationEngine.getPartEndListenerAccess();\r\n            const partEndToken = this.checkAnimation(\r\n                null,\r\n                partEndAccess,\r\n                taskFlow.parts[0],\r\n            );\r\n            const partStartToken = this.checkAnimation(\r\n                null,\r\n                partStartAccess,\r\n                taskFlow.parts[0],\r\n            );\r\n            const now = new Date();\r\n            const promises: Array<Promise<void>> = animationEngine.handle(taskFlow);\r\n            Promise.all(promises).then(function() {\r\n                expect(new Date().getTime() - now.getTime()).toBeGreaterThanOrEqual(timeToWait);\r\n                expect(partEndToken()).toBe(true);\r\n                expect(partStartToken()).toBe(true);\r\n                document.body.removeChild(element);\r\n                done();\r\n            }).catch(function(err) {\r\n                done.fail(err);\r\n            });\r\n        });\r\n    }\r\n}\r\n","import { IAnimationFlowPart } from '../../animation/animation-flow-part';\r\nimport { CAROUSEL_STYLES } from '../../carousel/carousel-base';\r\nimport { ICarouselAnimation } from '../../carousel/single-slide/carousel-animation';\r\nimport { ISingleSlideCarouselGoToAnimationStatus } from '../../carousel/single-slide/go-to-animation-status';\r\nimport {\r\n    SINGLE_SLIDE_CAROUSEL_ACTIONS,\r\n    SINGLE_SLIDE_CAROUSEL_PARTS_ALIASES,\r\n    SINGLE_SLIDE_CAROUSEL_STYLES,\r\n    SingleSlideCarousel,\r\n} from '../../carousel/single-slide/single-slide-carousel';\r\nimport { ITaskFlowPartArgs } from '../../task/flow/task-flow-part-event-args';\r\nimport { IOperationManagerAccess } from '../../task/operation/operation-manager-access';\r\nimport { ITest } from '../ITest';\r\n\r\ninterface IGoToAndCheckData {\r\n    goActionStatus: ISingleSlideCarouselGoToAnimationStatus;\r\n    newElement: HTMLElement;\r\n    oldElement: HTMLElement;\r\n}\r\n\r\nexport class SingleSlideCarouselTests implements ITest {\r\n\r\n    protected longTimeLimit: number;\r\n\r\n    public constructor() {\r\n        this.longTimeLimit = 100000000;\r\n    }\r\n\r\n    public performTests(): void {\r\n        describe('SingleSlideCarousel Tests', () => {\r\n            this.itMustBeInitializable();\r\n            this.itMustBeAbleToCancelAnimation();\r\n            this.itMustBeAbleToGoToSlides();\r\n            this.itMustBeAbleToGoToSlidesWhileAddingElements();\r\n            this.itMustBeAbleToGoToSlidesWhileRemovingAnimationElements();\r\n            this.itMustBeAbleToGoToSlidesWhileRemovingOtherElements();\r\n            this.itMustBeAbleToHandleChildrenAnimations();\r\n            this.itMustBeAbleToPauseAndResumeAnimation();\r\n            this.itMustBeAbleToRunComplexAnimations();\r\n        });\r\n    }\r\n\r\n    protected generateBasicCarousel(): HTMLElement {\r\n        const divElement: HTMLElement = document.createElement('div');\r\n        divElement.classList.add(CAROUSEL_STYLES.CAROUSEL);\r\n        divElement.innerHTML =\r\n`<div class=\"sora-wrapper\">\r\n    <div class=\"sora-slide\">\r\n        <span>Content 1</span>\r\n    </div>\r\n    <div class=\"sora-slide\">\r\n        <span>Content 2</span>\r\n    </div>\r\n    <div class=\"sora-slide\">\r\n        <span>Content 3</span>\r\n    </div>\r\n</div>`\r\n        ;\r\n\r\n        return divElement;\r\n    }\r\n\r\n    private performGoAndCheck(\r\n        action: string,\r\n        carousel: SingleSlideCarousel,\r\n        enterAnimation: ICarouselAnimation,\r\n        leaveAnimation: ICarouselAnimation,\r\n        shouldCheck: boolean = true,\r\n    ): IGoToAndCheckData {\r\n\r\n        expect([\r\n            SINGLE_SLIDE_CAROUSEL_ACTIONS.GO_TO_NEXT,\r\n            SINGLE_SLIDE_CAROUSEL_ACTIONS.GO_TO_PREVIOUS,\r\n        ]).toContain(action);\r\n\r\n        const currentActiveElement = carousel.getActiveElement();\r\n        const activeIndex = carousel.getActiveIndex();\r\n        const indexes = carousel.getElementsManager().getLength();\r\n        const nextIndex = function(action): number {\r\n            if (SINGLE_SLIDE_CAROUSEL_ACTIONS.GO_TO_NEXT === action) {\r\n                return (activeIndex + 1) % indexes;\r\n            } else if (SINGLE_SLIDE_CAROUSEL_ACTIONS.GO_TO_PREVIOUS === action) {\r\n                return ((activeIndex - 1) + indexes) % indexes;\r\n            } else {\r\n                throw new Error('Unexpected action');\r\n            }\r\n        } (action);\r\n\r\n        const nextElement = carousel.getElementsManager().getCollection()[nextIndex];\r\n\r\n        const goActionStatus = carousel.handle(\r\n            action,\r\n            {\r\n                enterAnimation: enterAnimation,\r\n                leaveAnimation: leaveAnimation,\r\n            },\r\n        );\r\n\r\n        const checkFunction = function<\r\n            TArgs extends ITaskFlowPartArgs<TPart>,\r\n            TPart extends IAnimationFlowPart,\r\n        >(\r\n            partAlias: string,\r\n            animation: ICarouselAnimation,\r\n            operationManagerAccess: IOperationManagerAccess<TArgs>,\r\n        ): () => boolean {\r\n            var eventRaised: boolean = false;\r\n            const eventHandler = function(eventArgs: TArgs) {\r\n                eventRaised = true;\r\n                eventArgs.part.styles.forEach(function(style: string) {\r\n                    expect(animation.slideStyles).toContain(style);\r\n                });\r\n                expect(operationManagerAccess.unsubscribe(\r\n                    partAlias,\r\n                    handlerToken,\r\n                )).toBe(true);\r\n            };\r\n            const handlerToken: number =\r\n                operationManagerAccess.subscribe(\r\n                    partAlias,\r\n                    eventHandler,\r\n                );\r\n            return function() { return eventRaised; };\r\n        };\r\n\r\n        // Check the end of the enter animation.\r\n        const enterAnimationEndStatus = checkFunction(\r\n            SINGLE_SLIDE_CAROUSEL_PARTS_ALIASES.ENTER,\r\n            enterAnimation,\r\n            goActionStatus.partEndEventAccess,\r\n        );\r\n\r\n        // Check the end of the leave animation\r\n        const leaveAnimationEndStatus = checkFunction(\r\n            SINGLE_SLIDE_CAROUSEL_PARTS_ALIASES.LEAVE,\r\n            leaveAnimation,\r\n            goActionStatus.partEndEventAccess,\r\n        );\r\n\r\n        // Check the start of the enter animation.\r\n        const enterAnimationStartStatus = checkFunction(\r\n            SINGLE_SLIDE_CAROUSEL_PARTS_ALIASES.ENTER,\r\n            enterAnimation,\r\n            goActionStatus.partStartEventAccess,\r\n        );\r\n\r\n        // Check the start of the leave animation.\r\n        const leaveAnimationStartStatus = checkFunction(\r\n            SINGLE_SLIDE_CAROUSEL_PARTS_ALIASES.LEAVE,\r\n            leaveAnimation,\r\n            goActionStatus.partStartEventAccess,\r\n        );\r\n\r\n        goActionStatus.soraHandlerStatus.then(function() {\r\n            expect(enterAnimationEndStatus()).toBe(true);\r\n            expect(leaveAnimationEndStatus()).toBe(true);\r\n            expect(enterAnimationStartStatus()).toBe(true);\r\n            expect(leaveAnimationStartStatus()).toBe(true);\r\n            if (shouldCheck) {\r\n                expect(currentActiveElement.classList).not.toContain(SINGLE_SLIDE_CAROUSEL_STYLES.SORA_RELATIVE);\r\n                expect(currentActiveElement.classList).toContain(SINGLE_SLIDE_CAROUSEL_STYLES.SLIDE_HIDDEN);\r\n                expect(nextElement.classList).toContain(SINGLE_SLIDE_CAROUSEL_STYLES.SORA_RELATIVE);\r\n                expect(nextElement.classList).not.toContain(SINGLE_SLIDE_CAROUSEL_STYLES.SLIDE_HIDDEN);\r\n            }\r\n        });\r\n\r\n        return {\r\n            goActionStatus: goActionStatus,\r\n            newElement: nextElement,\r\n            oldElement : currentActiveElement,\r\n        };\r\n    }\r\n\r\n    private performGoNext(\r\n        carousel: SingleSlideCarousel,\r\n        enterAnimation: ICarouselAnimation,\r\n        leaveAnimation: ICarouselAnimation,\r\n        shouldCheck: boolean = true,\r\n    ): IGoToAndCheckData {\r\n        return this.performGoAndCheck(\r\n            SINGLE_SLIDE_CAROUSEL_ACTIONS.GO_TO_NEXT,\r\n            carousel,\r\n            enterAnimation,\r\n            leaveAnimation,\r\n            shouldCheck,\r\n        );\r\n    }\r\n\r\n    private performGoPrevious(\r\n        carousel: SingleSlideCarousel,\r\n        enterAnimation: ICarouselAnimation,\r\n        leaveAnimation: ICarouselAnimation,\r\n        shouldCheck: boolean = true,\r\n    ): IGoToAndCheckData {\r\n        return this.performGoAndCheck(\r\n            SINGLE_SLIDE_CAROUSEL_ACTIONS.GO_TO_PREVIOUS,\r\n            carousel,\r\n            enterAnimation,\r\n            leaveAnimation,\r\n            shouldCheck,\r\n        );\r\n    }\r\n\r\n    private itMustBeInitializable(): void {\r\n        const that = this;\r\n        it('mustBeInitializable', () => {\r\n            const divElement: HTMLElement = that.generateBasicCarousel();\r\n            const carousel: SingleSlideCarousel = new SingleSlideCarousel(divElement, { index: 0 });\r\n            expect(carousel).not.toBeNull();\r\n            const wrapper = divElement.querySelectorAll('.' + CAROUSEL_STYLES.WRAPPER);\r\n            expect(wrapper.length).toBe(1);\r\n            const children = divElement.querySelectorAll(\r\n                '.' + CAROUSEL_STYLES.WRAPPER + ' > .' + CAROUSEL_STYLES.SLIDE,\r\n            );\r\n            expect(children.length).toBe(3);\r\n            expect(children[0].classList).toContain(SINGLE_SLIDE_CAROUSEL_STYLES.SORA_RELATIVE);\r\n            expect(children[0].classList).not.toContain(SINGLE_SLIDE_CAROUSEL_STYLES.SLIDE_HIDDEN);\r\n\r\n            for (var i = 1; i < children.length; ++i) {\r\n                expect(children[i].classList).not.toContain(SINGLE_SLIDE_CAROUSEL_STYLES.SORA_RELATIVE);\r\n                expect(children[i].classList).toContain(SINGLE_SLIDE_CAROUSEL_STYLES.SLIDE_HIDDEN);\r\n            }\r\n        });\r\n    }\r\n\r\n    private itMustBeAbleToCancelAnimation(): void {\r\n        const that = this;\r\n        it('mustBeAbleToCancelAnimation', (done) => {\r\n            function goNext(carousel: SingleSlideCarousel): IGoToAndCheckData {\r\n                return that.performGoNext(\r\n                    carousel,\r\n                    { slideStyles: ['sora-fade-in-animation'] },\r\n                    { slideStyles: ['sora-fade-out-animation'] },\r\n                    false,\r\n                );\r\n            }\r\n\r\n            const divElement: HTMLElement = that.generateBasicCarousel();\r\n            const carousel: SingleSlideCarousel = new SingleSlideCarousel(divElement, { index: 0 });\r\n            document.body.appendChild(divElement);\r\n\r\n            const executionPromise = new Promise<void>(function(resolve, reject) {\r\n                const animationStatus = goNext(carousel);\r\n                carousel.forceActiveSlide(2);\r\n                const thirdElement = carousel.getElementsManager().getCollection()[2];\r\n\r\n                expect(thirdElement.classList).not.toContain(SINGLE_SLIDE_CAROUSEL_STYLES.SLIDE_HIDDEN);\r\n                expect(thirdElement.classList).toContain(SINGLE_SLIDE_CAROUSEL_STYLES.SORA_RELATIVE);\r\n\r\n                Promise.all([\r\n                    animationStatus.goActionStatus.soraHandlerStatus,\r\n                ]).then(function() {\r\n                    const oldActiveElement = animationStatus.oldElement;\r\n                    const newActiveElement = animationStatus.newElement;\r\n\r\n                    expect(newActiveElement).toBe(carousel.getElementsManager().getCollection()[1]);\r\n                    expect(newActiveElement.classList).not.toContain(SINGLE_SLIDE_CAROUSEL_STYLES.SORA_RELATIVE);\r\n                    expect(newActiveElement.classList).toContain(SINGLE_SLIDE_CAROUSEL_STYLES.SLIDE_HIDDEN);\r\n\r\n                    expect(oldActiveElement).toBe(carousel.getElementsManager().getCollection()[0]);\r\n                    expect(oldActiveElement.classList).not.toContain(SINGLE_SLIDE_CAROUSEL_STYLES.SORA_RELATIVE);\r\n                    expect(oldActiveElement.classList).toContain(SINGLE_SLIDE_CAROUSEL_STYLES.SLIDE_HIDDEN);\r\n\r\n                    resolve();\r\n                }).catch(function(err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n\r\n            executionPromise.then(function() {\r\n                document.body.removeChild(divElement);\r\n                done();\r\n            }).catch(function(err) {\r\n                done.fail(err);\r\n            });\r\n        });\r\n    }\r\n\r\n    private itMustBeAbleToGoToSlides(): void {\r\n        const that = this;\r\n        it('mustBeAbleToGoToSlides', function(done) {\r\n            function goNext(carousel: SingleSlideCarousel): IGoToAndCheckData {\r\n                return that.performGoNext(\r\n                    carousel,\r\n                    { slideStyles: ['sora-fade-in-animation'] },\r\n                    { slideStyles: ['sora-fade-out-animation'] },\r\n                );\r\n            }\r\n            function goPrevious(carousel: SingleSlideCarousel): IGoToAndCheckData {\r\n                return that.performGoPrevious(\r\n                    carousel,\r\n                    { slideStyles: ['sora-fade-in-animation'] },\r\n                    { slideStyles: ['sora-fade-out-animation'] },\r\n                );\r\n            }\r\n\r\n            const divElement: HTMLElement = that.generateBasicCarousel();\r\n            const carousel: SingleSlideCarousel = new SingleSlideCarousel(divElement, { index: 0 });\r\n            document.body.appendChild(divElement);\r\n\r\n            const executionPromise = new Promise<void>(function(resolve, reject) {\r\n                const animationStatus = goNext(carousel);\r\n\r\n                const oldActiveElement = animationStatus.oldElement;\r\n                const newActiveElement = animationStatus.newElement;\r\n\r\n                expect(oldActiveElement).toBe(carousel.getElementsManager().getCollection()[0]);\r\n                expect(newActiveElement).toBe(carousel.getElementsManager().getCollection()[1]);\r\n\r\n                Promise.all([\r\n                    animationStatus.goActionStatus.soraHandlerStatus,\r\n                ]).then(function() {\r\n                    const animationStatus = goPrevious(carousel);\r\n\r\n                    const oldActiveElement = animationStatus.oldElement;\r\n                    const newActiveElement = animationStatus.newElement;\r\n\r\n                    expect(oldActiveElement).toBe(carousel.getElementsManager().getCollection()[1]);\r\n                    expect(newActiveElement).toBe(carousel.getElementsManager().getCollection()[0]);\r\n\r\n                    Promise.all([\r\n                        animationStatus.goActionStatus.soraHandlerStatus,\r\n                    ]).then(function() {\r\n                        resolve();\r\n                    }).catch(function(err) {\r\n                        reject(err);\r\n                    });\r\n                }).catch(function(err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n\r\n            executionPromise.then(function() {\r\n                document.body.removeChild(divElement);\r\n                done();\r\n            }).catch(function(err) {\r\n                done.fail(err);\r\n            });\r\n        }, this.longTimeLimit);\r\n    }\r\n\r\n    private itMustBeAbleToGoToSlidesWhileAddingElements() {\r\n        const that = this;\r\n        it('mustBeAbleToGoToSlidesWhileAddingElements', function(done) {\r\n            function goNext(carousel: SingleSlideCarousel): IGoToAndCheckData {\r\n                return that.performGoNext(\r\n                    carousel,\r\n                    { slideStyles: ['sora-fade-in-animation'] },\r\n                    { slideStyles: ['sora-fade-out-animation'] },\r\n                );\r\n            }\r\n            function goPrevious(carousel: SingleSlideCarousel): IGoToAndCheckData {\r\n                return that.performGoPrevious(\r\n                    carousel,\r\n                    { slideStyles: ['sora-fade-in-animation'] },\r\n                    { slideStyles: ['sora-fade-out-animation'] },\r\n                );\r\n            }\r\n\r\n            const divElement: HTMLElement = that.generateBasicCarousel();\r\n            const carousel: SingleSlideCarousel = new SingleSlideCarousel(divElement, { index: 0 });\r\n            document.body.appendChild(divElement);\r\n\r\n            const executionPromise = new Promise<void>(function(resolve, reject) {\r\n                var animationStatus = goNext(carousel);\r\n\r\n                const element0 = document.createElement('div');\r\n                element0.classList.add(CAROUSEL_STYLES.SLIDE);\r\n                element0.classList.add(SINGLE_SLIDE_CAROUSEL_STYLES.SLIDE_HIDDEN);\r\n                element0.innerHTML = 'New Content 0';\r\n                const element1 = document.createElement('div');\r\n                element1.classList.add(CAROUSEL_STYLES.SLIDE);\r\n                element1.classList.add(SINGLE_SLIDE_CAROUSEL_STYLES.SLIDE_HIDDEN);\r\n                element1.innerHTML = 'New Content 1';\r\n                const element2 = document.createElement('div');\r\n                element2.classList.add(CAROUSEL_STYLES.SLIDE);\r\n                element2.classList.add(SINGLE_SLIDE_CAROUSEL_STYLES.SLIDE_HIDDEN);\r\n                element2.innerHTML = 'New Content 2';\r\n                const element3 = document.createElement('div');\r\n                element3.classList.add(CAROUSEL_STYLES.SLIDE);\r\n                element3.classList.add(SINGLE_SLIDE_CAROUSEL_STYLES.SLIDE_HIDDEN);\r\n                element3.innerHTML = 'New Content 3';\r\n                carousel.getElementsManager().insertElements({\r\n                    0: element0,\r\n                    1: element1,\r\n                    2: element2,\r\n                    3: element3,\r\n                });\r\n\r\n                expect(carousel.getElementsManager().getLength()).toBe(7);\r\n\r\n                Promise.all([\r\n                    animationStatus.goActionStatus.soraHandlerStatus,\r\n                ]).then(function() {\r\n                    const oldActiveElement = animationStatus.oldElement;\r\n                    const newActiveElement = animationStatus.newElement;\r\n\r\n                    expect(newActiveElement).toBe(carousel.getElementsManager().getCollection()[5]);\r\n                    expect(oldActiveElement).toBe(carousel.getElementsManager().getCollection()[4]);\r\n\r\n                    animationStatus = goPrevious(carousel);\r\n\r\n                    Promise.all([\r\n                        animationStatus.goActionStatus.soraHandlerStatus,\r\n                    ]).then(function() {\r\n                        const oldActiveElement = animationStatus.oldElement;\r\n                        const newActiveElement = animationStatus.newElement;\r\n\r\n                        expect(newActiveElement).toBe(carousel.getElementsManager().getCollection()[4]);\r\n                        expect(oldActiveElement).toBe(carousel.getElementsManager().getCollection()[5]);\r\n\r\n                        animationStatus = goPrevious(carousel);\r\n\r\n                        Promise.all([\r\n                            animationStatus.goActionStatus.soraHandlerStatus,\r\n                        ]).then(function() {\r\n                            const oldActiveElement = animationStatus.oldElement;\r\n                            const newActiveElement = animationStatus.newElement;\r\n\r\n                            expect(newActiveElement).toBe(carousel.getElementsManager().getCollection()[3]);\r\n                            expect(oldActiveElement).toBe(carousel.getElementsManager().getCollection()[4]);\r\n\r\n                            resolve();\r\n                        }).catch(function(err) {\r\n                            reject(err);\r\n                        });\r\n                    }).catch(function(err) {\r\n                        reject(err);\r\n                    });\r\n                }).catch(function(err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n\r\n            executionPromise.then(function() {\r\n                document.body.removeChild(divElement);\r\n                done();\r\n            }).catch(function(err) {\r\n                done.fail(err);\r\n            });\r\n\r\n        }, this.longTimeLimit);\r\n    }\r\n\r\n    private itMustBeAbleToGoToSlidesWhileRemovingAnimationElements() {\r\n        const that = this;\r\n        it('mustBeAbleToGoToSlidesWhileRemovingAnimationElements', function(done) {\r\n            function goNext(carousel: SingleSlideCarousel): IGoToAndCheckData {\r\n                return that.performGoNext(\r\n                    carousel,\r\n                    { slideStyles: ['sora-fade-in-animation'] },\r\n                    { slideStyles: ['sora-fade-out-animation'] },\r\n                );\r\n            }\r\n\r\n            const divElement: HTMLElement = that.generateBasicCarousel();\r\n            const carousel: SingleSlideCarousel = new SingleSlideCarousel(divElement, { index: 0 });\r\n            document.body.appendChild(divElement);\r\n\r\n            const executionPromise = new Promise<void>(function(resolve, reject) {\r\n                const animationStatus = goNext(carousel);\r\n                carousel.getElementsManager().removeElements([0, 1]);\r\n                expect(carousel.getElementsManager().getCollection().length).toBe(3);\r\n\r\n                Promise.all([\r\n                    animationStatus.goActionStatus.soraHandlerStatus,\r\n                ]).then(function() {\r\n                    const oldActiveElement = animationStatus.oldElement;\r\n                    const newActiveElement = animationStatus.newElement;\r\n\r\n                    expect(oldActiveElement).toBe(carousel.getElementsManager().getCollection()[0]);\r\n                    expect(newActiveElement).toBe(carousel.getElementsManager().getCollection()[1]);\r\n\r\n                    resolve();\r\n                }).catch(function(err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n\r\n            executionPromise.then(function() {\r\n                document.body.removeChild(divElement);\r\n                done();\r\n            }).catch(function(err) {\r\n                done.fail(err);\r\n            });\r\n        }, this.longTimeLimit);\r\n    }\r\n\r\n    private itMustBeAbleToGoToSlidesWhileRemovingOtherElements() {\r\n        const that = this;\r\n        it('mustBeAbleToGoToSlidesWhileRemovingOtherElements', function(done) {\r\n            function goNext(carousel: SingleSlideCarousel): IGoToAndCheckData {\r\n                return that.performGoNext(\r\n                    carousel,\r\n                    { slideStyles: ['sora-fade-in-animation'] },\r\n                    { slideStyles: ['sora-fade-out-animation'] },\r\n                );\r\n            }\r\n\r\n            const divElement: HTMLElement = that.generateBasicCarousel();\r\n            const carousel: SingleSlideCarousel = new SingleSlideCarousel(divElement, { index: 0 });\r\n            document.body.appendChild(divElement);\r\n\r\n            const executionPromise = new Promise<void>(function(resolve, reject) {\r\n                const animationStatus = goNext(carousel);\r\n                carousel.getElementsManager().removeElements([2]);\r\n                expect(carousel.getElementsManager().getCollection().length).toBe(2);\r\n\r\n                Promise.all([\r\n                    animationStatus.goActionStatus.soraHandlerStatus,\r\n                ]).then(function() {\r\n                    const oldActiveElement = animationStatus.oldElement;\r\n                    const newActiveElement = animationStatus.newElement;\r\n\r\n                    expect(oldActiveElement).toBe(carousel.getElementsManager().getCollection()[0]);\r\n                    expect(newActiveElement).toBe(carousel.getElementsManager().getCollection()[1]);\r\n\r\n                    resolve();\r\n                }).catch(function(err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n\r\n            executionPromise.then(function() {\r\n                document.body.removeChild(divElement);\r\n                done();\r\n            }).catch(function(err) {\r\n                done.fail(err);\r\n            });\r\n        }, this.longTimeLimit);\r\n    }\r\n\r\n    private itMustBeAbleToHandleChildrenAnimations() {\r\n        const that = this;\r\n\r\n        it('mustBeAbleToHandleChildrenAnimations', function(done) {\r\n            function goNext(carousel: SingleSlideCarousel): IGoToAndCheckData {\r\n                return that.performGoNext(carousel,\r\n                    {\r\n                        childrenStyles: [ {\r\n                            selector: 'span',\r\n                            styles: [ 'sora-fade-in-animation' ],\r\n                        } ],\r\n                        slideStyles: [ 'sora-fade-in-animation' ],\r\n                    },\r\n                    {\r\n                        childrenStyles: [ {\r\n                            selector: 'span',\r\n                            styles: [ 'sora-fade-out-animation' ],\r\n                        } ],\r\n                        slideStyles: [ 'sora-fade-out-animation' ],\r\n                    },\r\n                );\r\n            }\r\n\r\n            function goPrevious(carousel: SingleSlideCarousel): IGoToAndCheckData {\r\n                return that.performGoPrevious(carousel,\r\n                    {\r\n                        childrenStyles: [ {\r\n                            selector: 'span',\r\n                            styles: [ 'sora-fade-in-animation' ],\r\n                        } ],\r\n                        slideStyles: [ 'sora-fade-in-animation' ],\r\n                    },\r\n                    {\r\n                        childrenStyles: [ {\r\n                            selector: 'span',\r\n                            styles: [ 'sora-fade-out-animation' ],\r\n                        } ],\r\n                        slideStyles: [ 'sora-fade-out-animation' ],\r\n                    },\r\n                );\r\n            }\r\n\r\n            const divElement: HTMLElement = that.generateBasicCarousel();\r\n            const carousel: SingleSlideCarousel = new SingleSlideCarousel(divElement, { index: 0 });\r\n            document.body.appendChild(divElement);\r\n\r\n            const executionPromise = new Promise<void>(function(resolve, reject) {\r\n                var animationStatus = goNext(carousel);\r\n                Promise.all([\r\n                    animationStatus.goActionStatus.soraHandlerStatus,\r\n                ]).then(function() {\r\n                    const oldActiveElement = animationStatus.oldElement;\r\n                    const newActiveElement = animationStatus.newElement;\r\n                    expect(oldActiveElement).toBe(carousel.getElementsManager().getCollection()[0]);\r\n                    expect(newActiveElement).toBe(carousel.getElementsManager().getCollection()[1]);\r\n\r\n                    animationStatus = goPrevious(carousel);\r\n\r\n                    Promise.all([\r\n                        animationStatus.goActionStatus.soraHandlerStatus,\r\n                    ]).then(function() {\r\n                        const oldActiveElement = animationStatus.oldElement;\r\n                        const newActiveElement = animationStatus.newElement;\r\n                        expect(oldActiveElement).toBe(carousel.getElementsManager().getCollection()[1]);\r\n                        expect(newActiveElement).toBe(carousel.getElementsManager().getCollection()[0]);\r\n\r\n                        resolve();\r\n                    }).catch(function(err) {\r\n                        reject(err);\r\n                    });\r\n                }).catch(function(err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n\r\n            executionPromise.then(function() {\r\n                document.body.removeChild(divElement);\r\n                done();\r\n            }).catch(function(err) {\r\n                done.fail(err);\r\n            });\r\n        }, this.longTimeLimit);\r\n    }\r\n\r\n    private itMustBeAbleToPauseAndResumeAnimation() {\r\n        const that = this;\r\n\r\n        it('mustBeAbleToPauseAndResumeAnimation', function(done) {\r\n            function goNext(carousel: SingleSlideCarousel): IGoToAndCheckData {\r\n                return that.performGoNext(\r\n                    carousel,\r\n                    { slideStyles: ['sora-fade-in-animation', 'sora-offset-left-in-animation' ]},\r\n                    { slideStyles: ['sora-fade-out-animation', 'sora-offset-left-out-animation' ] },\r\n                );\r\n            }\r\n\r\n            const divElement: HTMLElement = that.generateBasicCarousel();\r\n            const carousel: SingleSlideCarousel = new SingleSlideCarousel(divElement, { index: 0 });\r\n            document.body.appendChild(divElement);\r\n\r\n            const executionPromise = new Promise<void>(function(resolve, reject) {\r\n                const currentIndex = carousel.getActiveIndex();\r\n                const animationStatus = goNext(carousel);\r\n\r\n                const oldActiveElement = animationStatus.oldElement;\r\n                const newActiveElement = animationStatus.newElement;\r\n                expect(oldActiveElement).toBe(carousel.getElementsManager().getCollection()[0]);\r\n                expect(newActiveElement).toBe(carousel.getElementsManager().getCollection()[1]);\r\n\r\n                carousel.pause();\r\n                expect(carousel.isPaused()).toBe(true);\r\n                expect(carousel.getActiveIndex()).toBe(currentIndex);\r\n\r\n                new Promise<void>(function(resolveCh, reject) {\r\n                    setTimeout(() => {\r\n                        expect(carousel.isPaused()).toBe(true);\r\n                        expect(carousel.getActiveIndex()).toBe(currentIndex);\r\n                        resolveCh();\r\n                    }, 2000);\r\n                }).then(function() {\r\n                    carousel.resume();\r\n                });\r\n\r\n                Promise.all([\r\n                    animationStatus.goActionStatus.soraHandlerStatus,\r\n                ]).then(function() {\r\n                    resolve();\r\n                }).catch(function(err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n\r\n            executionPromise.then(function() {\r\n                document.body.removeChild(divElement);\r\n                done();\r\n            }).catch(function(err) {\r\n                done.fail(err);\r\n            });\r\n        }, this.longTimeLimit);\r\n    }\r\n\r\n    private itMustBeAbleToRunComplexAnimations() {\r\n        const that = this;\r\n\r\n        it('mustBeAbleToRunComplexAnimations', function(done) {\r\n            function goNext(carousel: SingleSlideCarousel): IGoToAndCheckData {\r\n                return that.performGoNext(\r\n                    carousel,\r\n                    { slideStyles: ['sora-fade-in-animation', 'sora-offset-left-in-animation' ]},\r\n                    { slideStyles: ['sora-fade-out-animation', 'sora-offset-left-out-animation' ] },\r\n                );\r\n            }\r\n\r\n            function goPrevious(carousel: SingleSlideCarousel): IGoToAndCheckData {\r\n                return that.performGoPrevious(\r\n                    carousel,\r\n                    { slideStyles: ['sora-fade-in-animation', 'sora-offset-left-in-animation' ]},\r\n                    { slideStyles: ['sora-fade-out-animation', 'sora-offset-left-out-animation' ] },\r\n                );\r\n            }\r\n\r\n            const divElement: HTMLElement = that.generateBasicCarousel();\r\n            const carousel: SingleSlideCarousel = new SingleSlideCarousel(divElement, { index: 0 });\r\n            document.body.appendChild(divElement);\r\n\r\n            const executionPromise = new Promise<void>(function(resolve, reject) {\r\n                const animationStatus = goNext(carousel);\r\n                const oldActiveElement = animationStatus.oldElement;\r\n                const newActiveElement = animationStatus.newElement;\r\n                expect(oldActiveElement).toBe(carousel.getElementsManager().getCollection()[0]);\r\n                expect(newActiveElement).toBe(carousel.getElementsManager().getCollection()[1]);\r\n\r\n                Promise.all([\r\n                    animationStatus.goActionStatus.soraHandlerStatus,\r\n                ]).then(function() {\r\n                    const animationStatus = goPrevious(carousel);\r\n\r\n                    const oldActiveElement = animationStatus.oldElement;\r\n                    const newActiveElement = animationStatus.newElement;\r\n                    expect(oldActiveElement).toBe(carousel.getElementsManager().getCollection()[1]);\r\n                    expect(newActiveElement).toBe(carousel.getElementsManager().getCollection()[0]);\r\n\r\n                    Promise.all([\r\n                        animationStatus.goActionStatus.soraHandlerStatus,\r\n                    ]).then(function() {\r\n                        resolve();\r\n                    }).catch(function(err) {\r\n                        reject(err);\r\n                    });\r\n                }).catch(function(err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n\r\n            executionPromise.then(function() {\r\n                document.body.removeChild(divElement);\r\n                done();\r\n            }).catch(function(err) {\r\n                done.fail(err);\r\n            });\r\n        }, this.longTimeLimit);\r\n    }\r\n}\r\n","import { EventEmitter } from 'events';\r\nimport { CancelableCollectionChangeEventArgs } from '../../collection/cancelable-collection-change-args';\r\nimport { CollectionChangeEventArgs } from '../../collection/collection-change-args';\r\nimport {\r\n    COLLECTION_MANAGER_EVENTS,\r\n    CollectionManager,\r\n} from '../../collection/collection-manager';\r\nimport { ITest } from '../ITest';\r\n\r\nexport class CollectionManagerTests implements ITest {\r\n\r\n    public performTests(): void {\r\n        describe('Collection Manager Tests', () => {\r\n            this.itMustBeInitializable();\r\n            this.itMustBeAbleToAddElements();\r\n            this.itMustBeAbleToPreventDefaultActionWhenAddingElements();\r\n            this.itMustBeAbleToPreventDefaultActionWhenRemovingElements();\r\n            this.itMustBeAbleToRemoveElements();\r\n        });\r\n    }\r\n\r\n    private itMustBeInitializable(): void {\r\n        it('mustBeInitializable', () => {\r\n            const collection: number[] = new Array();\r\n            const eventEmitter = new EventEmitter();\r\n            const collectionManager = new CollectionManager(collection, eventEmitter);\r\n\r\n            expect(collectionManager).not.toBeNull();\r\n            expect(collectionManager.getCollection()).toBe(collection);\r\n        });\r\n    }\r\n\r\n    private itMustBeAbleToAddElements() {\r\n        it('mustBeAbleToAddElements', () => {\r\n            const collection: number[] = [2, 5, 7];\r\n            const eventEmitter = new EventEmitter();\r\n            const expected: number[] = [2, 10, 5, 8, 7];\r\n            const collectionManager = new CollectionManager<number>(collection, eventEmitter);\r\n\r\n            var beforeIsEmitted = false;\r\n            var afterIsEmitted = false;\r\n\r\n            eventEmitter.on(\r\n                COLLECTION_MANAGER_EVENTS.collectionBeforeChange,\r\n                function(eventArgs: CollectionChangeEventArgs<number>) {\r\n                    const indexMap = eventArgs.getIndexMap();\r\n                    for (var i = 0; i < collection.length; ++i) {\r\n                        expect(indexMap[i]).not.toBeNull();\r\n                    }\r\n                    beforeIsEmitted = true;\r\n                },\r\n            );\r\n\r\n            eventEmitter.on(\r\n                COLLECTION_MANAGER_EVENTS.collectionAfterChange,\r\n                function(eventArgs: CollectionChangeEventArgs<number>) {\r\n                    afterIsEmitted = true;\r\n                },\r\n            );\r\n\r\n            collectionManager.insertElements({\r\n                1: 10,\r\n                3: 8,\r\n            });\r\n\r\n            expect(beforeIsEmitted && afterIsEmitted).toBe(true);\r\n            const actual = collectionManager.getCollection();\r\n            expect(actual.length).toBe(expected.length);\r\n\r\n            for (var i = 0; i < expected.length; ++i) {\r\n                expect(actual[i]).toBe(expected[i]);\r\n            }\r\n        });\r\n    }\r\n\r\n    private itMustBeAbleToPreventDefaultActionWhenAddingElements() {\r\n        it('mustBeAbleToPreventDefaultActionWhenAddingElements', () => {\r\n            const collection: number[] = [2, 5, 7];\r\n            const eventEmitter = new EventEmitter();\r\n            const collectionManager = new CollectionManager<number>(collection, eventEmitter);\r\n            const expected = [2, 5, 7];\r\n\r\n            var beforeIsEmitted = false;\r\n            var afterIsEmitted = false;\r\n\r\n            eventEmitter.on(\r\n                COLLECTION_MANAGER_EVENTS.collectionBeforeChange,\r\n                    function(eventArgs: CancelableCollectionChangeEventArgs<number>) {\r\n                    beforeIsEmitted = true;\r\n                    eventArgs.setPreventDefault();\r\n                },\r\n            );\r\n\r\n            eventEmitter.on(\r\n                COLLECTION_MANAGER_EVENTS.collectionAfterChange,\r\n                function(eventArgs: CollectionChangeEventArgs<number>) {\r\n                    afterIsEmitted = true;\r\n                    expect(eventArgs.getPreventDefault()).toBe(true);\r\n                },\r\n            );\r\n\r\n            collectionManager.insertElements({\r\n                1: 10,\r\n                3: 8,\r\n            });\r\n\r\n            expect(beforeIsEmitted && afterIsEmitted).toBe(true);\r\n\r\n            const actual = collectionManager.getCollection();\r\n            expect(actual.length).toBe(expected.length);\r\n\r\n            for (var i = 0; i < expected.length; ++i) {\r\n                expect(actual[i]).toBe(expected[i]);\r\n            }\r\n        });\r\n    }\r\n\r\n    private itMustBeAbleToPreventDefaultActionWhenRemovingElements() {\r\n        it('mustBeAbleToPreventDefaultActionWhenRemovingElements', () => {\r\n            const collection: number[] = [2, 10, 5, 8, 7];\r\n            const indexesToBeRemoved = [1, 3];\r\n            const expected = [2, 10, 5, 8, 7];\r\n            const eventEmitter = new EventEmitter();\r\n            const collectionManager = new CollectionManager<number>(collection, eventEmitter);\r\n\r\n            var beforeIsEmitted = false;\r\n            var afterIsEmitted = false;\r\n\r\n            eventEmitter.on(\r\n                COLLECTION_MANAGER_EVENTS.collectionBeforeChange,\r\n                function(eventArgs: CancelableCollectionChangeEventArgs<number>) {\r\n                    eventArgs.setPreventDefault();\r\n                    beforeIsEmitted = true;\r\n                },\r\n            );\r\n\r\n            eventEmitter.on(\r\n                COLLECTION_MANAGER_EVENTS.collectionAfterChange,\r\n                function(eventArgs: CollectionChangeEventArgs<number>) {\r\n                    expect(eventArgs.getPreventDefault()).toBe(true);\r\n                    afterIsEmitted = true;\r\n                },\r\n            );\r\n\r\n            collectionManager.removeElements(indexesToBeRemoved);\r\n\r\n            expect(beforeIsEmitted && afterIsEmitted).toBe(true);\r\n\r\n            const actual = collectionManager.getCollection();\r\n            expect(actual.length).toBe(expected.length);\r\n\r\n            for (var i = 0; i < expected.length; ++i) {\r\n                expect(actual[i]).toBe(expected[i]);\r\n            }\r\n        });\r\n    }\r\n\r\n    private itMustBeAbleToRemoveElements() {\r\n        it('mustBeAbleToRemoveElements', () => {\r\n            const collection: number[] = [2, 10, 5, 8, 7];\r\n            const eventEmitter = new EventEmitter();\r\n            const collectionManager = new CollectionManager<number>(collection, eventEmitter);\r\n            var beforeIsEmitted = false;\r\n            var afterIsEmitted = false;\r\n\r\n            const indexesToBeRemoved = [1, 3];\r\n            const expected = [2, 5, 7];\r\n\r\n            eventEmitter.on(\r\n                COLLECTION_MANAGER_EVENTS.collectionBeforeChange,\r\n                function(eventArgs: CollectionChangeEventArgs<number>) {\r\n                    const indexMap = eventArgs.getIndexMap();\r\n                    for (const indexToBeRemoved of indexesToBeRemoved) {\r\n                        expect(indexMap[indexToBeRemoved]).toBeUndefined();\r\n                    }\r\n                    beforeIsEmitted = true;\r\n                });\r\n\r\n            eventEmitter.on(\r\n                COLLECTION_MANAGER_EVENTS.collectionAfterChange,\r\n                function(eventArgs: CollectionChangeEventArgs<number>) {\r\n                    afterIsEmitted = true;\r\n                },\r\n            );\r\n\r\n            collectionManager.removeElements(indexesToBeRemoved);\r\n            expect(beforeIsEmitted && afterIsEmitted).toBe(true);\r\n            const actual = collectionManager.getCollection();\r\n            expect(actual.length).toBe(expected.length);\r\n\r\n            for (var i = 0; i < expected.length; ++i) {\r\n                expect(actual[i]).toBe(expected[i]);\r\n            }\r\n        });\r\n    }\r\n}\r\n","\r\nimport { TokenMap } from '../../collection/token-map';\r\nimport { ITest } from '../ITest';\r\n\r\nexport class TokenMapTests implements ITest {\r\n\r\n    public performTests(): void {\r\n        describe('Token Map Tests', () => {\r\n            this.itMustBeInitializable();\r\n            this.itMustBeAbleToAddElements();\r\n            this.itMustBeAbleToAddAndRemoveElements();\r\n            this.itMustBeAbleToReuseUnusedIndexes();\r\n        });\r\n    }\r\n\r\n    private itMustBeInitializable(): void {\r\n        it('mustBeInitializable', () => {\r\n            const map = new TokenMap();\r\n            expect(map).not.toBe(null);\r\n            expect(map.count()).toBe(0);\r\n        });\r\n    }\r\n\r\n    private itMustBeAbleToAddElements(): void {\r\n        it('mustBeAbleToAddElements', () => {\r\n            const map = new TokenMap<{}>();\r\n            const elementsToAdd = 64;\r\n\r\n            for (var i = 0; i < elementsToAdd; ++i) {\r\n                expect(map.add(i)).toBe(i);\r\n            }\r\n\r\n            for (var i = 0; i < elementsToAdd; ++i) {\r\n                expect(map.get(i)).toBe(i);\r\n            }\r\n\r\n            expect(map.count()).toBe(elementsToAdd);\r\n        });\r\n    }\r\n\r\n    private itMustBeAbleToAddAndRemoveElements(): void {\r\n        it('mustBeAbleToAddAndRemoveElements', () => {\r\n            const map = new TokenMap<{}>();\r\n            const elementsToAdd = 64;\r\n            const elementsToRemove = 32;\r\n            for (var i = 0; i < elementsToAdd; ++i) {\r\n                expect(map.add(i)).toBe(i);\r\n            }\r\n\r\n            for (var i = 0; i < elementsToAdd; ++i) {\r\n                expect(map.get(i)).toBe(i);\r\n            }\r\n\r\n            for (var i = 0; i < elementsToRemove; ++i) {\r\n                expect(map.remove(i)).toBe(true);\r\n            }\r\n\r\n            expect(map.count()).toBe(elementsToAdd - elementsToRemove);\r\n        });\r\n    }\r\n\r\n    private itMustBeAbleToReuseUnusedIndexes(): void {\r\n        it('mustBeAbleToReuseUnusedIndexes', () => {\r\n            const map = new TokenMap<{}>();\r\n            const elementsToAdd = 64;\r\n            const elementsToRemove = 32;\r\n            for (var i = 0; i < elementsToAdd; ++i) {\r\n                expect(map.add(i)).toBe(i);\r\n            }\r\n\r\n            for (var i = 0; i < elementsToAdd; ++i) {\r\n                expect(map.get(i)).toBe(i);\r\n            }\r\n\r\n            for (var i = 0; i < elementsToRemove; ++i) {\r\n                expect(map.remove(i)).toBe(true);\r\n            }\r\n\r\n            for (var i = 0; i < elementsToRemove; ++i) {\r\n                expect(map.add(i)).toBeLessThan(elementsToRemove);\r\n            }\r\n\r\n            expect(map.count()).toBe(elementsToAdd);\r\n        });\r\n    }\r\n}\r\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar objectCreate = Object.create || objectCreatePolyfill\nvar objectKeys = Object.keys || objectKeysPolyfill\nvar bind = Function.prototype.bind || functionBindPolyfill\n\nfunction EventEmitter() {\n  if (!this._events || !Object.prototype.hasOwnProperty.call(this, '_events')) {\n    this._events = objectCreate(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nvar hasDefineProperty;\ntry {\n  var o = {};\n  if (Object.defineProperty) Object.defineProperty(o, 'x', { value: 0 });\n  hasDefineProperty = o.x === 0;\n} catch (err) { hasDefineProperty = false }\nif (hasDefineProperty) {\n  Object.defineProperty(EventEmitter, 'defaultMaxListeners', {\n    enumerable: true,\n    get: function() {\n      return defaultMaxListeners;\n    },\n    set: function(arg) {\n      // check whether the input is a positive number (whose value is zero or\n      // greater and not a NaN).\n      if (typeof arg !== 'number' || arg < 0 || arg !== arg)\n        throw new TypeError('\"defaultMaxListeners\" must be a positive number');\n      defaultMaxListeners = arg;\n    }\n  });\n} else {\n  EventEmitter.defaultMaxListeners = defaultMaxListeners;\n}\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    if (arguments.length > 1)\n      er = arguments[1];\n    if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Unhandled \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n      // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n      // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = objectCreate(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n          listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n          prepend ? [listener, existing] : [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n            existing.length + ' \"' + String(type) + '\" listeners ' +\n            'added. Use emitter.setMaxListeners() to ' +\n            'increase limit.');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        if (typeof console === 'object' && console.warn) {\n          console.warn('%s: %s', w.name, w.message);\n        }\n      }\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    switch (arguments.length) {\n      case 0:\n        return this.listener.call(this.target);\n      case 1:\n        return this.listener.call(this.target, arguments[0]);\n      case 2:\n        return this.listener.call(this.target, arguments[0], arguments[1]);\n      case 3:\n        return this.listener.call(this.target, arguments[0], arguments[1],\n            arguments[2]);\n      default:\n        var args = new Array(arguments.length);\n        for (var i = 0; i < args.length; ++i)\n          args[i] = arguments[i];\n        this.listener.apply(this.target, args);\n    }\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = bind.call(onceWrapper, state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = objectCreate(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else\n          spliceOne(list, position);\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = objectCreate(null);\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = objectCreate(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = objectKeys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = objectCreate(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (!events)\n    return [];\n\n  var evlistener = events[type];\n  if (!evlistener)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction objectCreatePolyfill(proto) {\n  var F = function() {};\n  F.prototype = proto;\n  return new F;\n}\nfunction objectKeysPolyfill(obj) {\n  var keys = [];\n  for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k)) {\n    keys.push(k);\n  }\n  return k;\n}\nfunction functionBindPolyfill(context) {\n  var fn = this;\n  return function () {\n    return fn.apply(context, arguments);\n  };\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkaXN0L2pzL3RtcC9zcmMvYW5pbWF0aW9uL2FuaW1hdGlvbi1lbmdpbmUudHMiLCJkaXN0L2pzL3RtcC9zcmMvYW5pbWF0aW9uL2FuaW1hdGlvbi1vcGVyYXRpb24tZXZlbnRzLnRzIiwiZGlzdC9qcy90bXAvc3JjL2FuaW1hdGlvbi9hbmltYXRpb24tcGxheS1zdGF0ZS50cyIsImRpc3QvanMvdG1wL3NyYy9jYXJvdXNlbC9jYXJvdXNlbC1iYXNlLnRzIiwiZGlzdC9qcy90bXAvc3JjL2Nhcm91c2VsL3NpbmdsZS1zbGlkZS9zaW5nbGUtc2xpZGUtY2Fyb3VzZWwudHMiLCJkaXN0L2pzL3RtcC9zcmMvY29sbGVjdGlvbi9jYW5jZWxhYmxlLWNvbGxlY3Rpb24tY2hhbmdlLWFyZ3MudHMiLCJkaXN0L2pzL3RtcC9zcmMvY29sbGVjdGlvbi9jb2xsZWN0aW9uLWNoYW5nZS1hcmdzLnRzIiwiZGlzdC9qcy90bXAvc3JjL2NvbGxlY3Rpb24vY29sbGVjdGlvbi1tYW5hZ2VyLnRzIiwiZGlzdC9qcy90bXAvc3JjL2NvbGxlY3Rpb24vaHRtbC1jaGlsZHJlbi1tYW5hZ2VyLnRzIiwiZGlzdC9qcy90bXAvc3JjL2NvbGxlY3Rpb24vdG9rZW4tbWFwLnRzIiwiZGlzdC9qcy90bXAvc3JjL21haW4udGVzdC50cyIsImRpc3QvanMvdG1wL3NyYy90YXNrL2Zsb3cvdGFzay1mbG93LXdoZW4udHMiLCJkaXN0L2pzL3RtcC9zcmMvdGFzay9mbG93L3Rhc2stcGFydC1iZWdpbi1jb25zdHJhaW50LnRzIiwiZGlzdC9qcy90bXAvc3JjL3Rhc2svZmxvdy90YXNrLXBhcnQtY29uc3RyYWludC50cyIsImRpc3QvanMvdG1wL3NyYy90YXNrL2Zsb3cvdGFzay1wYXJ0LWVuZC1jb25zdHJhaW50LnRzIiwiZGlzdC9qcy90bXAvc3JjL3Rhc2svZmxvdy90YXNrLXBhcnQtdGltZS1jb25zdHJhaW50LnRzIiwiZGlzdC9qcy90bXAvc3JjL3Rhc2svb3BlcmF0aW9uL29wZXJhdGlvbi1tYW5hZ2VyLnRzIiwiZGlzdC9qcy90bXAvc3JjL3Rhc2svdGFzay1lbmdpbmUudHMiLCJkaXN0L2pzL3RtcC9zcmMvdGFzay90YXNrLXBhcnQtd2hlbi1ldmVudHMudHMiLCJkaXN0L2pzL3RtcC9zcmMvdGFzay90YXNrLXBhcnQtd2hlbi1vcGVyYXRvci50cyIsImRpc3QvanMvdG1wL3NyYy90ZXN0L2FuaW1hdGlvbi9hbmltYXRpb24tZW5naW5lLnRlc3QudHMiLCJkaXN0L2pzL3RtcC9zcmMvdGVzdC9jYXJvdXNlbC9zaW5nbGUtc2xpZGUtY2Fyb3VzZWwudGVzdC50cyIsImRpc3QvanMvdG1wL3NyYy90ZXN0L2NvbGxlY3Rpb24vY29sbGVjdGlvbi1tYW5hZ2VyLnRlc3QudHMiLCJkaXN0L2pzL3RtcC9zcmMvdGVzdC9jb2xsZWN0aW9uL3Rva2VuLW1hcC50ZXN0LnRzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2suanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcy5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2dldC5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2dldFByb3RvdHlwZU9mLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2V0UHJvdG90eXBlT2YuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9zdXBlclByb3BCYXNlLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mLmpzIiwibm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNBQTs7QUFDQTs7QUFDQTs7QUFHQTs7QUFDQTs7SUFNYSxxQjs7Ozs7QUFtQlQsbUNBQUE7QUFBQTs7QUFBQTtBQUNJO0FBRUEsVUFBSyxzQkFBTCxHQUNJLElBQUksa0NBQUosQ0FDSSxxREFBMkIsZ0JBRC9CLEVBRUksTUFBSyxZQUZULENBREo7QUFLQSxVQUFLLDJCQUFMLEdBQ0ksSUFBSSxrQ0FBSixDQUNJLHFEQUEyQixzQkFEL0IsRUFFSSxNQUFLLFlBRlQsQ0FESjtBQVJKO0FBYUM7Ozs7OEJBT2E7QUFDVixXQUFLLHNCQUFMLENBQTRCLE9BQTVCO0FBQ0EsV0FBSywyQkFBTCxDQUFpQyxPQUFqQztBQUNIOzs7b0NBUXNCLE8sRUFBaUI7QUFDcEMsV0FBSyxZQUFMLENBQWtCLElBQWxCLENBQ0kscURBQTJCLGdCQUQvQixFQUVJO0FBQUUsUUFBQSxPQUFPLEVBQUc7QUFBWixPQUZKO0FBSUg7OzswQkFNWSxPLEVBQWlCO0FBQzFCLFdBQUssWUFBTCxDQUFrQixJQUFsQixDQUNJLHFEQUEyQixzQkFEL0IsRUFFSTtBQUNJLFFBQUEsT0FBTyxFQUFFLE9BRGI7QUFFSSxRQUFBLEtBQUssRUFBRSw0Q0FBd0I7QUFGbkMsT0FGSjtBQU9IOzs7MkJBTWEsTyxFQUFpQjtBQUMzQixXQUFLLFlBQUwsQ0FBa0IsSUFBbEIsQ0FDSSxxREFBMkIsc0JBRC9CLEVBRUk7QUFDSSxRQUFBLE9BQU8sRUFBRSxPQURiO0FBRUksUUFBQSxLQUFLLEVBQUUsNENBQXdCO0FBRm5DLE9BRko7QUFPSDs7O21DQWV3QixJLEVBQXdC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Q05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgeyBDQVJPVVNFTF9TVFlMRVMgfSBmcm9tICcuLi9jYXJvdXNlbC9jYXJvdXNlbC1iYXNlJztcclxuaW1wb3J0IHsgT3BlcmF0aW9uTWFuYWdlciB9IGZyb20gJy4uL3Rhc2svb3BlcmF0aW9uL29wZXJhdGlvbi1tYW5hZ2VyJztcclxuaW1wb3J0IHsgVGFza0VuZ2luZSB9IGZyb20gJy4uL3Rhc2svdGFzay1lbmdpbmUnO1xyXG5pbXBvcnQgeyBJQW5pbWF0aW9uQ2FuY2VsRXZlbnRBcmdzIH0gZnJvbSAnLi9hbmltYXRpb24tY2FuY2VsLWV2ZW50LWFyZ3MnO1xyXG5pbXBvcnQgeyBJQW5pbWF0aW9uRmxvd1BhcnQgfSBmcm9tICcuL2FuaW1hdGlvbi1mbG93LXBhcnQnO1xyXG5pbXBvcnQgeyBBTklNQVRJT05fT1BFUkFUSU9OX0VWRU5UUyB9IGZyb20gJy4vYW5pbWF0aW9uLW9wZXJhdGlvbi1ldmVudHMnO1xyXG5pbXBvcnQgeyBBbmltYXRpb25QbGF5U3RhdGVWYWx1ZSB9IGZyb20gJy4vYW5pbWF0aW9uLXBsYXktc3RhdGUnO1xyXG5pbXBvcnQgeyBJQW5pbWF0aW9uU3RhdGVDaGFuZ2VFdmVudEFyZ3MgfSBmcm9tICcuL2FuaW1hdGlvbi1zdGF0ZS1jaGFuZ2UtZXZlbnQtYXJncyc7XHJcblxyXG4vKipcclxuICogUmVwcmVzZW50cyBhIHNpbmdsZSBhbmltYXRpb24gZW5naW5lLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNpbmdsZUFuaW1hdGlvbkVuZ2luZSBleHRlbmRzIFRhc2tFbmdpbmU8SUFuaW1hdGlvbkZsb3dQYXJ0PiB7XHJcblxyXG4gICAgLy8jcmVnaW9uIEF0dHJpYnV0ZXNcclxuXHJcbiAgICAvLyNyZWdpb24gT3BlcmF0b3JzXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbmltYXRpb24gY2FuY2VsIG9wZXJhdGlvbiBtYW5hZ2VyLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYW5pbWF0aW9uQ2FuY2VsTWFuYWdlcjogT3BlcmF0aW9uTWFuYWdlcjxJQW5pbWF0aW9uQ2FuY2VsRXZlbnRBcmdzPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFuaW1hdGlvbiBzdGF0ZSBjaGFuZ2Ugb3BlcmF0aW9uIG1hbmFnZXIuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBhbmltYXRpb25TdGF0ZUNoYW5nZU1hbmFnZXI6IE9wZXJhdGlvbk1hbmFnZXI8SUFuaW1hdGlvblN0YXRlQ2hhbmdlRXZlbnRBcmdzPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmFuaW1hdGlvbkNhbmNlbE1hbmFnZXIgPVxyXG4gICAgICAgICAgICBuZXcgT3BlcmF0aW9uTWFuYWdlcjxJQW5pbWF0aW9uQ2FuY2VsRXZlbnRBcmdzPihcclxuICAgICAgICAgICAgICAgIEFOSU1BVElPTl9PUEVSQVRJT05fRVZFTlRTLkFOSU1BVElPTl9DQU5DRUwsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlcixcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvblN0YXRlQ2hhbmdlTWFuYWdlciA9XHJcbiAgICAgICAgICAgIG5ldyBPcGVyYXRpb25NYW5hZ2VyPElBbmltYXRpb25TdGF0ZUNoYW5nZUV2ZW50QXJncz4oXHJcbiAgICAgICAgICAgICAgICBBTklNQVRJT05fT1BFUkFUSU9OX0VWRU5UUy5BTklNQVRJT05fU1RBVEVfQ0hBTkdFLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFB1YmxpY1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGlzcG9zZXMgdGhlIGluc3RhbmNlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGlzcG9zZSgpIHtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbkNhbmNlbE1hbmFnZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uU3RhdGVDaGFuZ2VNYW5hZ2VyLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gT3BlcmF0aW9uc1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FuY2VscyB0aGUgYW5pbWF0aW9uLlxyXG4gICAgICogQHBhcmFtIGFsaWFzZXMgQWxpYXNlcyBvZiB0aGUgcGFydHMgdG8gY2FuY2VsIG9yIG51bGwgdG8gY2FuY2VsIGFsbCB0aGUgcGFydHMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjYW5jZWxBbmltYXRpb24oYWxpYXNlczogc3RyaW5nW10pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KFxyXG4gICAgICAgICAgICBBTklNQVRJT05fT1BFUkFUSU9OX0VWRU5UUy5BTklNQVRJT05fQ0FOQ0VMLFxyXG4gICAgICAgICAgICB7IGFsaWFzZXMgOiBhbGlhc2VzIH0gYXMgSUFuaW1hdGlvbkNhbmNlbEV2ZW50QXJncyxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGF1c2VzIHRoZSBlbmdpbmUgYW5pbWF0aW9uLlxyXG4gICAgICogQHBhcmFtIGFsaWFzZXMgQWxpYXNlcyBvZiB0aGUgYW5pbWF0aW9uIHBhcnRzIHRvIHBhdXNlIG9yIG51bGwgdG8gcGF1c2UgYWxsIHRoZSBwYXJ0cy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHBhdXNlKGFsaWFzZXM6IHN0cmluZ1tdKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdChcclxuICAgICAgICAgICAgQU5JTUFUSU9OX09QRVJBVElPTl9FVkVOVFMuQU5JTUFUSU9OX1NUQVRFX0NIQU5HRSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYWxpYXNlczogYWxpYXNlcyxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBBbmltYXRpb25QbGF5U3RhdGVWYWx1ZS5wYXVzZWQsXHJcbiAgICAgICAgICAgIH0gYXMgSUFuaW1hdGlvblN0YXRlQ2hhbmdlRXZlbnRBcmdzLFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXN1bWVzIHRoZSBlbmdpbmUgYW5pbWF0aW9uLlxyXG4gICAgICogQHBhcmFtIGFsaWFzZXMgQWxpYXNlcyBvZiB0aGUgYW5pbWF0aW9uIHBhcnRzIHRvIHJlc3VtZSBvciBudWxsIHRvIHJlc3VtZSBhbGwgdGhlIHBhcnRzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVzdW1lKGFsaWFzZXM6IHN0cmluZ1tdKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdChcclxuICAgICAgICAgICAgQU5JTUFUSU9OX09QRVJBVElPTl9FVkVOVFMuQU5JTUFUSU9OX1NUQVRFX0NIQU5HRSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYWxpYXNlczogYWxpYXNlcyxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBBbmltYXRpb25QbGF5U3RhdGVWYWx1ZS5ydW5uaW5nLFxyXG4gICAgICAgICAgICB9IGFzIElBbmltYXRpb25TdGF0ZUNoYW5nZUV2ZW50QXJncyxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyBhbiBhbmltYXRpb24gcGFydC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYW5pbWF0aW9uRmxvdyBBbmltYXRpb24gZmxvdyB0aGF0IGNvbnRhaW5zIHRoZSBhbm1hdGlvbiBwYXJ0IHRvIGhhbmRsZS5cclxuICAgICAqIEBwYXJhbSBwYXJ0IEFuaW1hdGlvbiBwYXJ0IHRvIGhhbmRsZS5cclxuICAgICAqIEBwYXJhbSBldmVudEVtaXR0ZXIgRXZlbnQgZW1pdHRlciBmb3IgdGhlIGFuaW1hdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmVkIG9uY2UgdGhlIGFuaW1hdGlvbiBvZiB0aGUgcGFydCBpcyBmaW5pc2hlZC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGhhbmRsZVRhc2tQYXJ0KHBhcnQ6IElBbmltYXRpb25GbG93UGFydCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHBhcnQucGVuZGluZ09wZXJhdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGNhbmNlbDoge1xyXG4gICAgICAgICAgICAgICAgaXNQZW5kaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG9wZXJhdGlvblRva2VuOiB0aGlzLmFuaW1hdGlvbkNhbmNlbE1hbmFnZXIuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnQuYWxpYXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXZlbnRBcmdzOiBJQW5pbWF0aW9uQ2FuY2VsRXZlbnRBcmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQucGVuZGluZ09wZXJhdGlvbnMuY2FuY2VsLmlzUGVuZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuYW5pbWF0aW9uQ2FuY2VsTWFuYWdlci51bnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuYWxpYXMsIHBhcnQucGVuZGluZ09wZXJhdGlvbnMuY2FuY2VsLm9wZXJhdGlvblRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwYXVzZToge1xyXG4gICAgICAgICAgICAgICAgaXNQZW5kaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG9wZXJhdGlvblRva2VuOiB0aGlzLmFuaW1hdGlvblN0YXRlQ2hhbmdlTWFuYWdlci5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgcGFydC5hbGlhcyxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihldmVudEFyZ3M6IElBbmltYXRpb25TdGF0ZUNoYW5nZUV2ZW50QXJncykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0LnBlbmRpbmdPcGVyYXRpb25zLnBhdXNlLmlzUGVuZGluZyA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudEFyZ3MudmFsdWUgPT09IEFuaW1hdGlvblBsYXlTdGF0ZVZhbHVlLnBhdXNlZDtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gc3VwZXIuaGFuZGxlVGFza1BhcnQocGFydCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQZXJmb3JtcyBhIHRhc2sgcGFydC5cclxuICAgICAqIEBwYXJhbSBwYXJ0IFRhc2sgcGFydCB0byBiZSBwZXJmb3JtZWQuXHJcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmVkIG9uY2UgdGhlIHBhcnQgdGFzayBpcyBwZXJmb3JtZWQuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBwZXJmb3JtVGFzayhwYXJ0OiBJQW5pbWF0aW9uRmxvd1BhcnQpOiBQcm9taXNlTGlrZTx7fSB8IHZvaWQ+IHtcclxuXHJcbiAgICAgICAgaWYgKHBhcnQucGVuZGluZ09wZXJhdGlvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25DYW5jZWxNYW5hZ2VyLnVuc3Vic2NyaWJlKHBhcnQuYWxpYXMsIHBhcnQucGVuZGluZ09wZXJhdGlvbnMuY2FuY2VsLm9wZXJhdGlvblRva2VuKTtcclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25TdGF0ZUNoYW5nZU1hbmFnZXIudW5zdWJzY3JpYmUocGFydC5hbGlhcywgcGFydC5wZW5kaW5nT3BlcmF0aW9ucy5wYXVzZS5vcGVyYXRpb25Ub2tlbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwcm9taXNlczogQXJyYXk8UHJvbWlzZTx2b2lkPj4gPSBuZXcgQXJyYXkocGFydC5lbGVtZW50cy5sZW5ndGgpO1xyXG5cclxuICAgICAgICAvLyAyLiBQZXJmb3JtIHRoZSBhbmltYXRpb24uXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0LmVsZW1lbnRzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIHByb21pc2VzW2ldID0gdGhpcy5oYW5kbGVBbmltYXRpb25PdmVyRWxlbWVudChwYXJ0LmVsZW1lbnRzW2ldLCBwYXJ0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwYXJ0LnBlbmRpbmdPcGVyYXRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0LnBlbmRpbmdPcGVyYXRpb25zLnBhdXNlLmlzUGVuZGluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXVzZShbcGFydC5hbGlhc10pO1xyXG4gICAgICAgICAgICAgICAgcGFydC5wZW5kaW5nT3BlcmF0aW9ucy5wYXVzZS5pc1BlbmRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHBhcnQucGVuZGluZ09wZXJhdGlvbnMuY2FuY2VsLmlzUGVuZGluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxBbmltYXRpb24oW3BhcnQuYWxpYXNdKTtcclxuICAgICAgICAgICAgICAgIHBhcnQucGVuZGluZ09wZXJhdGlvbnMuY2FuY2VsLmlzUGVuZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBFbGVtZW50IGFuaW1hdGlvblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgYW5pbWF0aW9uIG92ZXIgYW4gZWxlbWVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBlbGVtZW50IHRvIGJlIGFuaW1hdGVkLlxyXG4gICAgICogQHBhcmFtIHBhcnQgUGFydCB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50IHRvIGJlIGFuaW1hdGVkLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2ZWQgb25jZSB0aGUgYW5pbWF0aW9uIG92ZXIgdGhlIGVsZW1lbnQgaXMgZmluaXNoZWQuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBoYW5kbGVBbmltYXRpb25PdmVyRWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCwgcGFydDogSUFuaW1hdGlvbkZsb3dQYXJ0KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGVzOiBzdHJpbmdbXSA9IHBhcnQuc3R5bGVzO1xyXG5cclxuICAgICAgICBpZiAoc3R5bGVzKSB7XHJcbiAgICAgICAgICAgIGlmIChzdHlsZXMubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJdFxcJ3MgcmVxdWlyZWQgdG8gaGF2ZSBhdCBsZWFzdCBvbmUgY2xhc3MgdG8gZ2VuZXJhdGUgYW4gYW5pbWF0aW9uLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJdFxcJ3MgcmVxdWlyZWQgdG8gaGF2ZSBhbiBhcnJheSBvZiBzdHlsZXMgdG8gZ2VuZXJhdGUgYW4gYW5pbWF0aW9uLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFuaW1hdGlvbkZ1bmN0aW9uczogQXJyYXk8KChldmVudDogVHJhbnNpdGlvbkV2ZW50KSA9PiB2b2lkKT4gPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50QW5pbWF0aW9uSW5kZXg6IG51bWJlciA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb25BbmltYXRpb25DYW5jZWwgPSBmdW5jdGlvbihhcmdzOiBJQW5pbWF0aW9uQ2FuY2VsRXZlbnRBcmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzdW1lIHRoZSBhbmltYXRpb24gaWYgaXQgaXMgcGF1c2VkLlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQW5pbWF0aW9uUGxheVN0YXRlQ2hhbmdlKHthbGlhc2VzOiBhcmdzLmFsaWFzZXMsIHZhbHVlOiBBbmltYXRpb25QbGF5U3RhdGVWYWx1ZS5ydW5uaW5nfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChDQVJPVVNFTF9TVFlMRVMuQ0xFQVJfQU5JTUFUSU9OKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gY3VycmVudEFuaW1hdGlvbkluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShzdHlsZXNbY3VycmVudEFuaW1hdGlvbkluZGV4XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGF0LnVucmVnaXN0ZXJBbmltYXRpb25MaXN0ZW5lcihlbGVtZW50LCBhbmltYXRpb25GdW5jdGlvbnNbY3VycmVudEFuaW1hdGlvbkluZGV4XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENBUk9VU0VMX1NUWUxFUy5DTEVBUl9BTklNQVRJT04pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmFuaW1hdGlvbkNhbmNlbE1hbmFnZXIudW5zdWJzY3JpYmUocGFydC5hbGlhcywgY2FuY2VsVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYW5pbWF0aW9uU3RhdGVDaGFuZ2VNYW5hZ2VyLnVuc3Vic2NyaWJlKHBhcnQuYWxpYXMsIHBsYXlTdGF0ZUNoYW5nZXRva2VuKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxUb2tlbiA9IHRoYXQuYW5pbWF0aW9uQ2FuY2VsTWFuYWdlci5zdWJzY3JpYmUocGFydC5hbGlhcywgb25BbmltYXRpb25DYW5jZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG9uQW5pbWF0aW9uUGxheVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24oYXJnczogSUFuaW1hdGlvblN0YXRlQ2hhbmdlRXZlbnRBcmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFuaW1hdGlvblBsYXlTdGF0ZVZhbHVlLnBhdXNlZCA9PT0gYXJncy52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENBUk9VU0VMX1NUWUxFUy5BTklNQVRJT05fUEFVU0VEKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKENBUk9VU0VMX1NUWUxFUy5BTklNQVRJT05fUEFVU0VEKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoQW5pbWF0aW9uUGxheVN0YXRlVmFsdWUucnVubmluZyA9PT0gYXJncy52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0FST1VTRUxfU1RZTEVTLkFOSU1BVElPTl9QQVVTRUQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0FST1VTRUxfU1RZTEVTLkFOSU1BVElPTl9QQVVTRUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwbGF5U3RhdGVDaGFuZ2V0b2tlbiA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hbmltYXRpb25TdGF0ZUNoYW5nZU1hbmFnZXIuc3Vic2NyaWJlKHBhcnQuYWxpYXMsIG9uQW5pbWF0aW9uUGxheVN0YXRlQ2hhbmdlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHN0eWxlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbkZ1bmN0aW9ucy5wdXNoKGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihldmVudDogVHJhbnNpdGlvbkV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoc3R5bGVzW2luZGV4IC0gMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC51bnJlZ2lzdGVyQW5pbWF0aW9uTGlzdGVuZXIoZWxlbWVudCwgYW5pbWF0aW9uRnVuY3Rpb25zW2luZGV4IC0gMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5yZWdpc3RlckFuaW1hdGlvbkxpc3RlbmVyKGVsZW1lbnQsIGFuaW1hdGlvbkZ1bmN0aW9uc1tpbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHN0eWxlc1tpbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEFuaW1hdGlvbkluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSAoaSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgY2xlYXIgZnVuY3Rpb25cclxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkZ1bmN0aW9ucy5wdXNoKGZ1bmN0aW9uKGV2ZW50OiBUcmFuc2l0aW9uRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0FST1VTRUxfU1RZTEVTLkNMRUFSX0FOSU1BVElPTik7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHN0eWxlc1tzdHlsZXMubGVuZ3RoIC0gMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDQVJPVVNFTF9TVFlMRVMuQ0xFQVJfQU5JTUFUSU9OKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LnVucmVnaXN0ZXJBbmltYXRpb25MaXN0ZW5lcihlbGVtZW50LCBhbmltYXRpb25GdW5jdGlvbnNbYW5pbWF0aW9uRnVuY3Rpb25zLmxlbmd0aCAtIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50QW5pbWF0aW9uSW5kZXggPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYW5pbWF0aW9uQ2FuY2VsTWFuYWdlci51bnN1YnNjcmliZShwYXJ0LmFsaWFzLCBjYW5jZWxUb2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hbmltYXRpb25TdGF0ZUNoYW5nZU1hbmFnZXIudW5zdWJzY3JpYmUocGFydC5hbGlhcywgcGxheVN0YXRlQ2hhbmdldG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoYXQucmVnaXN0ZXJBbmltYXRpb25MaXN0ZW5lcihlbGVtZW50LCBhbmltYXRpb25GdW5jdGlvbnNbMF0pO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHN0eWxlc1swXSk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50QW5pbWF0aW9uSW5kZXggPSAwO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgZW5kIG9mIGEgdHJhbnNpdGlvbiBvdmVyIGFuIGVsZW1lbnQuXHJcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBFbGVtZW50IHdob3NlIGV2ZW50IHdpbGwgYmUgaGFuZGxlZC5cclxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciBFdmVudCBsaXN0ZW5lci5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZWdpc3RlckFuaW1hdGlvbkxpc3RlbmVyKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBsaXN0ZW5lcjogKGVsZW1lbnQ6IFRyYW5zaXRpb25FdmVudCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgbGlzdGVuZXIpO1xyXG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2Via2l0QW5pbWF0aW9uRW5kJywgbGlzdGVuZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmVzIGFuIGV2ZW50IGhhbmRsZXIgZnJvbSB0aGUgbGlzdCBvZiBsaXN0ZW5lcnMgb2YgYW4gZWxlbWVudFxyXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGFyZ2V0IGVsZW1lbnQuXHJcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgTGlzdGVuZXIgdG8gYmUgdW5zdWJzY3JpYmVkLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHVucmVnaXN0ZXJBbmltYXRpb25MaXN0ZW5lcihlbGVtZW50OiBIVE1MRWxlbWVudCwgbGlzdGVuZXI6IChlbGVtZW50OiBUcmFuc2l0aW9uRXZlbnQpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGxpc3RlbmVyKTtcclxuICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dlYmtpdEFuaW1hdGlvbkVuZCcsIGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxufVxyXG4iLCJleHBvcnQgY29uc3QgQU5JTUFUSU9OX09QRVJBVElPTl9FVkVOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEZvcmNlcyB0aGUgY2FuY2VsYXRpb24gb2YgdGhlIGN1cnJlbnQgYW5pbWF0aW9uLlxyXG4gICAgICovXHJcbiAgICBBTklNQVRJT05fQ0FOQ0VMOiAnYW5pbS5jYW5jZWwnLFxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGFuZ2VzIHRoZSBhbmltYXRpb24gcGxheSBzdGF0ZSBvZiB0aGUgZWxlbWVudHMgb2YgdGhlIGFuaW1hdGlvbi5cclxuICAgICAqL1xyXG4gICAgQU5JTUFUSU9OX1NUQVRFX0NIQU5HRTogJ2FuaW0uc3RhdGUuY2hhbmdlJyxcclxufTtcclxuIiwiLyoqXHJcbiAqIFJlcHJlc2VudHMgdGhlIHBsYXkgc3RhdGUgb2YgYW4gYW5pbWF0aW9uXHJcbiAqL1xyXG5leHBvcnQgZW51bSBBbmltYXRpb25QbGF5U3RhdGVWYWx1ZSB7XHJcbiAgICAvKipcclxuICAgICAqIFZhbHVlIHRvIHJlcHJlc2VudCBhIHBhdXNlZCBzdGF0dXMuXHJcbiAgICAgKi9cclxuICAgIHBhdXNlZCxcclxuICAgIC8qKlxyXG4gICAgICogVmFsdWUgdG8gcmVwcmVzZW50IGEgcnVubmluZyBzdGF0dXMuXHJcbiAgICAgKi9cclxuICAgIHJ1bm5pbmcsXHJcbn1cclxuIiwiLyoqXG4gKiBDYXJvdXNlbCBjbGFzc2VzIHVzZWQgZm9yIG11bHRpcGxlIHB1cnBvc2VzLlxuICovXG5leHBvcnQgY29uc3QgQ0FST1VTRUxfU1RZTEVTID0ge1xuICAgIEFOSU1BVElPTl9QQVVTRUQ6ICdzb3JhLWFuaW1hdGlvbi1wYXVzZWQnLFxuICAgIENBUk9VU0VMOiAnc29yYS1jYXJvdXNlbCcsXG4gICAgQ0xFQVJfQU5JTUFUSU9OOiAnc29yYS1jbGVhci1hbmltYXRpb25zJyxcbiAgICBTTElERTogJ3NvcmEtc2xpZGUnLFxuICAgIFdSQVBQRVI6ICdzb3JhLXdyYXBwZXInLFxufTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgZ2VuZXJpYyBjYXJvdXNlbC5cbiAqXG4gKiAxLiBBbnkgY2Fyb3VzZWwgaGFzIGVsZW1lbnRzLlxuICogMi4gQW55IGNhcm91c2VsIGhhcyBhIHRvcG9sb2d5LlxuICogMy4gQW55IGNhcm91c2VsIGhhcyB0cmFuc2l0aW9ucy5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENhcm91c2VsQmFzZSB7XG4gICAgLyoqXG4gICAgICogQ2Fyb3VzZWwgaGFuZGxlci5cbiAgICAgKiAzLiBBbnkgY2Fyb3VzZWwgaGFzIHRyYW5zaXRpb25zLlxuICAgICAqIEBwYXJhbSBhY3Rpb24gYWN0aW9uIHRvIGJlIGhhbmRsZWRcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBvcHRpb25zIGZvciB0aGUgYWN0aW9uLlxuICAgICAqL1xuICAgIHB1YmxpYyBhYnN0cmFjdCBoYW5kbGUoYWN0aW9uOiBzdHJpbmcsIG9wdGlvbnM6IHtba2V5OiBzdHJpbmddOiBhbnl9KTogdm9pZDtcbn1cbiIsImltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XG5pbXBvcnQgeyBTaW5nbGVBbmltYXRpb25FbmdpbmUgfSBmcm9tICcuLi8uLi9hbmltYXRpb24vYW5pbWF0aW9uLWVuZ2luZSc7XG5pbXBvcnQgeyBJQW5pbWF0aW9uRmxvd1BhcnQgfSBmcm9tICcuLi8uLi9hbmltYXRpb24vYW5pbWF0aW9uLWZsb3ctcGFydCc7XG5pbXBvcnQgeyBBbmltYXRpb25QbGF5U3RhdGVWYWx1ZSB9IGZyb20gJy4uLy4uL2FuaW1hdGlvbi9hbmltYXRpb24tcGxheS1zdGF0ZSc7XG5pbXBvcnQgeyBDYW5jZWxhYmxlQ29sbGVjdGlvbkNoYW5nZUV2ZW50QXJncyB9IGZyb20gJy4uLy4uL2NvbGxlY3Rpb24vY2FuY2VsYWJsZS1jb2xsZWN0aW9uLWNoYW5nZS1hcmdzJztcbmltcG9ydCB7IENvbGxlY3Rpb25DaGFuZ2VFdmVudEFyZ3MgfSBmcm9tICcuLi8uLi9jb2xsZWN0aW9uL2NvbGxlY3Rpb24tY2hhbmdlLWFyZ3MnO1xuaW1wb3J0IHsgQ09MTEVDVElPTl9NQU5BR0VSX0VWRU5UUyB9IGZyb20gJy4uLy4uL2NvbGxlY3Rpb24vY29sbGVjdGlvbi1tYW5hZ2VyJztcbmltcG9ydCB7IEh0bWxDaGlsZHJlbk1hbmFnZXIgfSBmcm9tICcuLi8uLi9jb2xsZWN0aW9uL2h0bWwtY2hpbGRyZW4tbWFuYWdlcic7XG5pbXBvcnQgeyBJVGFza0Zsb3cgfSBmcm9tICcuLi8uLi90YXNrL2Zsb3cvdGFzay1mbG93JztcbmltcG9ydCB7XG4gICAgQ0FST1VTRUxfU1RZTEVTLFxuICAgIENhcm91c2VsQmFzZSxcbn0gZnJvbSAnLi4vY2Fyb3VzZWwtYmFzZSc7XG5pbXBvcnQge1xuICAgIElTaW5nbGVTbGlkZUNhcm91c2VsQW5pbWF0aW9uRW5kRXZlbnRBcmdzLFxuICAgIElTaW5nbGVTbGlkZUNhcm91c2VsQW5pbWF0aW9uUGxheVN0YXRlQ2hhbmdlRXZlbnRBcmdzLFxuICAgIElTaW5nbGVTbGlkZUNhcm91c2VsQW5pbWF0aW9uU3RhcnRFdmVudEFyZ3MsXG4gICAgSVNpbmdsZVNsaWRlQ2Fyb3VzZWxDYW5jZWxBbmltYXRpb25FdmVudEFyZ3MsXG59IGZyb20gJy4vYW5pbWF0aW9uLWV2ZW50cyc7XG5pbXBvcnQgeyBJQ2Fyb3VzZWxBbmltYXRpb25DaGlsZHJlblN0eWxlcyB9IGZyb20gJy4vY2Fyb3VzZWwtYW5pbWF0aW9uJztcbmltcG9ydCB7IElTaW5nbGVTbGlkZUNhcm91c2VsQ3JlYXRlV2FpdFByb21pc2VPcHRpb25zIH0gZnJvbSAnLi9jcmVhdGUtd2FpdC1wcm9taXNlLW9wdGlvbnMnO1xuaW1wb3J0IHsgSVNpbmdsZVNsaWRlQ2Fyb3VzZWxDcmVhdGlvbk9wdGlvbnMgfSBmcm9tICcuL2NyZWF0aW9uLW9wdGlvbnMnO1xuaW1wb3J0IHsgSVNpbmdsZVNsaWRlQ2Fyb3VzZWxHb1RvQW5pbWF0aW9uU3RhdHVzIH0gZnJvbSAnLi9nby10by1hbmltYXRpb24tc3RhdHVzJztcbmltcG9ydCB7IElTaW5nbGVTbGlkZUNhcm91c2VsR290b09wdGlvbnMgfSBmcm9tICcuL2dvLXRvLW9wdGlvbnMnO1xuXG4vKiAjcmVnaW9uIENvbnN0YW50cyAqL1xuXG4vKipcbiAqIEFjdGlvbnMgYXZhaWFibGUgZm9yIHRoZSBTaW5nbGVTbGlkZUNhcm91c2VsLlxuICovXG5leHBvcnQgY29uc3QgU0lOR0xFX1NMSURFX0NBUk9VU0VMX0FDVElPTlMgPSB7XG4gICAgR09fVE86ICd0bycsXG4gICAgR09fVE9fTkVYVDogJ25leHQnLFxuICAgIEdPX1RPX1BSRVZJT1VTOiAncHJldicsXG59O1xuXG4vKipcbiAqIEV2ZW50cyBkaXJlY3RseSBoYW5kbGVkIGJ5IHRoZSBjYXJvdXNlbC5cbiAqL1xuZXhwb3J0IGNvbnN0IFNJTkdMRV9TTElERV9DQVJPVVNFTF9FVkVOVFMgPSB7XG4gICAgT05fQU5JTUFUSU9OX0VORDogJ2Nhci5hbmltLm91dCcsXG4gICAgT05fQU5JTUFUSU9OX1BMQVlfU1RBVEVfQ0hBTkdFOiAnY2FyLmFuaW0uc3RhdGUuY2gnLFxuICAgIE9OX0FOSU1BVElPTl9TVEFSVDogJ2Nhci5hbmltLmluJyxcbiAgICBPTl9DQU5DRUxfQU5JTUFUSU9OOiAnY2FyLmFuaW0uY2FuY2VsJyxcbn07XG5cbmV4cG9ydCBjb25zdCBTSU5HTEVfU0xJREVfQ0FST1VTRUxfUEFSVFNfQUxJQVNFUyA9IHtcbiAgICBFTlRFUjogJ2VudGVyLXBhcnQnLFxuICAgIExFQVZFOiAnbGVhdmUtcGFydCcsXG59O1xuXG4vKipcbiAqIENhcm91c2VsIGNsYXNzZXMgdXNlZCBmb3IgbXVsdGlwbGUgcHVycG9zZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBTSU5HTEVfU0xJREVfQ0FST1VTRUxfU1RZTEVTID0ge1xuICAgIC8qKlxuICAgICAqIFN0eWxlIHRvIGFwcGx5IHRvIGhpZGRlbiBzbGlkZXMuXG4gICAgICovXG4gICAgU0xJREVfSElEREVOOiAnc29yYS1oaWRkZW4nLFxuICAgIC8qKlxuICAgICAqIFN0eWxlIHRvIGFwcGx5IHRvIGFjaGlldmUgcG9zaXRpb246IHJlbGF0aXZlLlxuICAgICAqL1xuICAgIFNPUkFfUkVMQVRJVkU6ICdzb3JhLXJlbGF0aXZlJyxcbn07XG5cbi8qICNlbmRyZWdpb24gKi9cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2Fyb3VzZWwgd2l0aCBhIHNpbmdsZSBhY3RpdmUgc2xpZGUgYXQgYSB0aW1lLlxuICovXG5leHBvcnQgY2xhc3MgU2luZ2xlU2xpZGVDYXJvdXNlbCBleHRlbmRzIENhcm91c2VsQmFzZSB7XG5cbiAgICAvLyNyZWdpb24gQXR0cmlidXRlc1xuXG4gICAgLyoqXG4gICAgICogQWN0aXZlIGluZGV4IG9mIHRoZSBlbGVtZW50cyBvZiB0aGUgY2Fyb3VzZWwuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGFjdGl2ZUluZGV4OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBDdXJyZW50IGFjdGl2ZSBhbmltYXRpb25cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgY3VycmVudEFuaW1hdGlvbjogSVNpbmdsZVNsaWRlQ2Fyb3VzZWxHb3RvT3B0aW9ucztcblxuICAgIC8qKlxuICAgICAqIGNvbGxlY3Rpb24gbWFuYWdlclxuICAgICAqL1xuICAgIHByb3RlY3RlZCBlbGVtZW50c01hbmFnZXI6IEh0bWxDaGlsZHJlbk1hbmFnZXI7XG5cbiAgICAvKipcbiAgICAgKiBFbmdpbmUgYW5pbWF0aW9uLlxuICAgICAqL1xuICAgIHByb3RlY3RlZCBlbmdpbmVBbmltYXRpb246IFNpbmdsZUFuaW1hdGlvbkVuZ2luZTtcblxuICAgIC8qKlxuICAgICAqIEZsYWcgdG8gZGV0ZXJtaW5lIGlmIHRoZSBjYXJvdXNlbCBhbmltYXRpb24gaXMgcGF1c2VkLlxuICAgICAqL1xuICAgIHByb3RlY3RlZCBwYXVzZWQ6IGJvb2xlYW47XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIC8vI3JlZ2lvbiBFdmVudHNcblxuICAgIC8qKlxuICAgICAqIEV2ZW50IGVtaXR0ZXIgZm9yIHRoaXMgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgZXZlbnRFbWl0dGVyOiBFdmVudEVtaXR0ZXI7XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAcGFyYW0gZWxlbWVudCBET00gZWxlbWVudCBhc3NvY2lhdGVkIHRvIHRoZSBjYXJvdXNlbC5cbiAgICAgKi9cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoZWxlbWVudDogSFRNTEVsZW1lbnQsIG9wdGlvbnM6IElTaW5nbGVTbGlkZUNhcm91c2VsQ3JlYXRpb25PcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgZWxlbWVudCBtdXN0IG5vdCBiZSBudWxsLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0FST1VTRUxfU1RZTEVTLkNBUk9VU0VMKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY2Fyb3VzZWwgZWxlbWVudCBtdXN0IGNvbnRhaW4gdGhlIGNsYXNzIFwiJyArIENBUk9VU0VMX1NUWUxFUy5DQVJPVVNFTCArICdcIi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNvcmFXcmFwcGVyID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIENBUk9VU0VMX1NUWUxFUy5XUkFQUEVSKTtcblxuICAgICAgICBpZiAoc29yYVdyYXBwZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgZWxlbWVudCBoYXMgbm8gY2hpbGQgd2l0aCBjbGFzcyBcXCdzb3JhLXdyYXBwZXJcXCcuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjaGlsZHJlbjogSFRNTEVsZW1lbnRbXSA9IG5ldyBBcnJheSgpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc29yYVdyYXBwZXIuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChzb3JhV3JhcHBlci5jaGlsZHJlbltpXS5jbGFzc0xpc3QuY29udGFpbnMoQ0FST1VTRUxfU1RZTEVTLlNMSURFKSkge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goc29yYVdyYXBwZXIuY2hpbGRyZW5baV0gYXMgSFRNTEVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hY3RpdmVJbmRleCA9IG9wdGlvbnMuaW5kZXggfHwgMDtcbiAgICAgICAgdGhpcy5jdXJyZW50QW5pbWF0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuZWxlbWVudHNNYW5hZ2VyID0gbmV3IEh0bWxDaGlsZHJlbk1hbmFnZXIoY2hpbGRyZW4sIHRoaXMuZXZlbnRFbWl0dGVyLCBzb3JhV3JhcHBlciBhcyBIVE1MRWxlbWVudCk7XG5cbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlSW5kZXggPCAwIHx8IHRoaXMuYWN0aXZlSW5kZXggPj0gdGhpcy5lbGVtZW50c01hbmFnZXIuZ2V0TGVuZ3RoKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBvcHRpb25zLmluZGV4LiBUaGVyZSBpcyBubyBlbGVtZW50IHdpdGggaW5kZXggJyArIG9wdGlvbnMuaW5kZXggKyAnLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKGkgPT09IHRoaXMuYWN0aXZlSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbltpXS5jbGFzc0xpc3QuYWRkKFNJTkdMRV9TTElERV9DQVJPVVNFTF9TVFlMRVMuU09SQV9SRUxBVElWRSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuW2ldLmNsYXNzTGlzdC5hZGQoU0lOR0xFX1NMSURFX0NBUk9VU0VMX1NUWUxFUy5TTElERV9ISURERU4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgLy8gQWRkIGxpc3RlbmVyc1xuICAgICAgICBjb25zdCBvbkJlZm9yZUNoYW5nZSA9IGZ1bmN0aW9uKGV2ZW50QXJnczogQ2FuY2VsYWJsZUNvbGxlY3Rpb25DaGFuZ2VFdmVudEFyZ3M8SFRNTEVsZW1lbnQ+KSB7XG4gICAgICAgICAgICBjb25zdCBpbmRleE1hcCA9IGV2ZW50QXJncy5nZXRJbmRleE1hcCgpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gaW5kZXhNYXBbdGhhdC5hY3RpdmVJbmRleF0pIHtcbiAgICAgICAgICAgICAgICBldmVudEFyZ3Muc2V0UHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBvbkFmdGVyQ2hhbmdlID0gZnVuY3Rpb24oZXZlbnRBcmdzOiBDb2xsZWN0aW9uQ2hhbmdlRXZlbnRBcmdzPEhUTUxFbGVtZW50Pikge1xuICAgICAgICAgICAgaWYgKCFldmVudEFyZ3MuZ2V0UHJldmVudERlZmF1bHQoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4TWFwID0gZXZlbnRBcmdzLmdldEluZGV4TWFwKCk7XG4gICAgICAgICAgICAgICAgdGhhdC5hY3RpdmVJbmRleCA9IGluZGV4TWFwW3RoYXQuYWN0aXZlSW5kZXhdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuYWRkTGlzdGVuZXIoQ09MTEVDVElPTl9NQU5BR0VSX0VWRU5UUy5jb2xsZWN0aW9uQmVmb3JlQ2hhbmdlLCBvbkJlZm9yZUNoYW5nZSk7XG4gICAgICAgIHRoaXMuYWRkTGlzdGVuZXIoQ09MTEVDVElPTl9NQU5BR0VSX0VWRU5UUy5jb2xsZWN0aW9uQWZ0ZXJDaGFuZ2UsIG9uQWZ0ZXJDaGFuZ2UpO1xuXG4gICAgICAgIHRoaXMuZW5naW5lQW5pbWF0aW9uID0gbmV3IFNpbmdsZUFuaW1hdGlvbkVuZ2luZSgpO1xuICAgIH1cblxuICAgIC8vI3JlZ2lvbiBQdWJsaWNcblxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZXMgYSBsaXN0ZW5lciB0byBhbiBldmVudCBvZiB0aGUgY2Fyb3VzZWwuXG4gICAgICogQHBhcmFtIGV2ZW50IEV2ZW50IHRvIGxpc3Rlbi5cbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgTGlzdGVuZXIgdG8gc3Vic2NyaWJlLlxuICAgICAqL1xuICAgIHB1YmxpYyBhZGRMaXN0ZW5lcihldmVudDogc3RyaW5nIHwgc3ltYm9sLCBsaXN0ZW5lcjogKC4uLiBhcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5hZGRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBwcm9taXNlIHRoYXQgd2FpdHMgZm9yIGEgdGltZS4gVGhlIGFtb3VudCBvZiB0aW1lXG4gICAgICogQHBhcmFtIG9wdGlvbnMgSVNpbmdsZVNsaWRlQ2Fyb3VzZWxDcmVhdGVXYWl0UHJvbWlzZU9wdGlvbnMuXG4gICAgICovXG4gICAgcHVibGljIGNyZWF0ZVdhaXRQcm9taXNlKG9wdGlvbnM6IElTaW5nbGVTbGlkZUNhcm91c2VsQ3JlYXRlV2FpdFByb21pc2VPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgbGFzdFRpbWVSdW46IG51bWJlcjtcbiAgICAgICAgICAgIHZhciB0aW1lVG9XYWl0ID0gb3B0aW9ucy5taWxsaXM7XG5cbiAgICAgICAgICAgIGlmICh0aGF0LnBhdXNlZCkge1xuICAgICAgICAgICAgICAgIGxhc3RUaW1lUnVuID0gbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHdhaXRJbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0sIHRpbWVUb1dhaXQpO1xuICAgICAgICAgICAgICAgIGxhc3RUaW1lUnVuID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBvbkNhbmNlbEFuaW1hdGlvbjogKCkgPT4gdm9pZCA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnN0b3BPbkNhbmNlbEFuaW1hdGlvbikge1xuICAgICAgICAgICAgICAgIG9uQ2FuY2VsQW5pbWF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUxpc3RlbmVycygpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGF0LmFkZExpc3RlbmVyKFNJTkdMRV9TTElERV9DQVJPVVNFTF9FVkVOVFMuT05fQ0FOQ0VMX0FOSU1BVElPTiwgb25DYW5jZWxBbmltYXRpb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBvblBsYXlTdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uKGFyZ3M6IElTaW5nbGVTbGlkZUNhcm91c2VsQW5pbWF0aW9uUGxheVN0YXRlQ2hhbmdlRXZlbnRBcmdzKSB7XG4gICAgICAgICAgICAgICAgaWYgKEFuaW1hdGlvblBsYXlTdGF0ZVZhbHVlLnBhdXNlZCA9PT0gYXJncy52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBQYXVzZVxuICAgICAgICAgICAgICAgICAgICB0aW1lVG9XYWl0ID0gdGltZVRvV2FpdCAtIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxhc3RUaW1lUnVuKTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh3YWl0SW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoQW5pbWF0aW9uUGxheVN0YXRlVmFsdWUucnVubmluZyA9PT0gYXJncy52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZXN1bWVcbiAgICAgICAgICAgICAgICAgICAgbGFzdFRpbWVSdW4gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoMCA8IHRpbWVUb1dhaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXRJbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQucmVtb3ZlTGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNJTkdMRV9TTElERV9DQVJPVVNFTF9FVkVOVFMuT05fQU5JTUFUSU9OX1BMQVlfU1RBVEVfQ0hBTkdFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblBsYXlTdGF0ZUNoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IG9uQ2FuY2VsQW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQucmVtb3ZlTGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTSU5HTEVfU0xJREVfQ0FST1VTRUxfRVZFTlRTLk9OX0NBTkNFTF9BTklNQVRJT04sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNhbmNlbEFuaW1hdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGltZVRvV2FpdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZUxpc3RlbmVycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQucmVtb3ZlTGlzdGVuZXIoU0lOR0xFX1NMSURFX0NBUk9VU0VMX0VWRU5UUy5PTl9BTklNQVRJT05fUExBWV9TVEFURV9DSEFOR0UsIG9uUGxheVN0YXRlQ2hhbmdlKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBvbkNhbmNlbEFuaW1hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnJlbW92ZUxpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgU0lOR0xFX1NMSURFX0NBUk9VU0VMX0VWRU5UUy5PTl9DQU5DRUxfQU5JTUFUSU9OLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DYW5jZWxBbmltYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhhdC5hZGRMaXN0ZW5lcihTSU5HTEVfU0xJREVfQ0FST1VTRUxfRVZFTlRTLk9OX0FOSU1BVElPTl9QTEFZX1NUQVRFX0NIQU5HRSwgb25QbGF5U3RhdGVDaGFuZ2UpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGb3JjZXMgdGhlIGNhcm91c2VsIHRvIGNoYW5nZSBpdHMgYWN0aXZlIHNsaWRlLiBBbnkgYW5pbWF0aW9uIHdpbGwgYmUgY2FuY2VsZWQgaW4gdGhlIHByb2Nlc3MuXG4gICAgICogQHBhcmFtIGFjdGl2ZUluZGV4IEluZGV4IG9mIHRoZSBuZXcgYWN0aXZlIHNsaWRlIG9mIHRoZSBjYXJvdXNlbC5cbiAgICAgKi9cbiAgICBwdWJsaWMgZm9yY2VBY3RpdmVTbGlkZShhY3RpdmVJbmRleDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50QXJnczogSVNpbmdsZVNsaWRlQ2Fyb3VzZWxDYW5jZWxBbmltYXRpb25FdmVudEFyZ3MgPSB7IGFjdGl2ZUluZGV4OiBhY3RpdmVJbmRleCB9O1xuXG4gICAgICAgIHRoaXMuZW5naW5lQW5pbWF0aW9uLmNhbmNlbEFuaW1hdGlvbihudWxsKTtcbiAgICAgICAgLy8gVGhlIGNhbGwgb3ZlciBjYW5jZWxBbmltYXRpb24gd2lsbCByZXN1bWUgYW55IHBhdXNlZCBhbmltYXRpb24uXG4gICAgICAgIHRoaXMucGF1c2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWN0aXZlSW5kZXggPSBhY3RpdmVJbmRleDtcbiAgICAgICAgdGhpcy5yZXNldENhcm91c2VsU3RydWN0dXJlKGFjdGl2ZUluZGV4KTtcblxuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KFNJTkdMRV9TTElERV9DQVJPVVNFTF9FVkVOVFMuT05fQ0FOQ0VMX0FOSU1BVElPTiwgZXZlbnRBcmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPYnRhaW5zIHRoZSBhY3RpdmUgc2xpZGUgb2YgdGhlIGNhcm91c2VsXG4gICAgICovXG4gICAgcHVibGljIGdldEFjdGl2ZUVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50c01hbmFnZXIuZ2V0Q29sbGVjdGlvbigpW3RoaXMuYWN0aXZlSW5kZXhdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9idGFpbnMgdGhlIGFjdGl2ZSBpbmRleCBpbiB0aGUgZWxlbWVudHMgYXJyYXkgb2YgdGhlIGNhcm91c2VsXG4gICAgICovXG4gICAgcHVibGljIGdldEFjdGl2ZUluZGV4KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZUluZGV4O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNvbGxlY3Rpb24gbWFuYWdlciBvZiB0aGUgaW5zdGFuY2UuXG4gICAgICogQHJldHVybnMgQ29sbGVjdGlvbiBtYW5hZ2VyIG9mIHRoZSBzbGlkZSBlbGVtZW50cy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0RWxlbWVudHNNYW5hZ2VyKCk6IEh0bWxDaGlsZHJlbk1hbmFnZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50c01hbmFnZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGUgY2Fyb3VzZWwgaGFzIGFuIGFjdGl2ZSBhbmltYXRpb24sIGV2ZW4gaWYgdGhlIGFuaW1hdGlvbiBpcyBQYXVzZWQuXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgY2Fyb3VzZWwgaGFzIGFuIGFjdGl2ZSBhbmltYXRpb24uXG4gICAgICovXG4gICAgcHVibGljIGhhc0FjdGl2ZUFuaW1hdGlvbigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5jdXJyZW50QW5pbWF0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBoYW5kbGUoYWN0aW9uOiBzdHJpbmcsIG9wdGlvbnM6IHtba2V5OiBzdHJpbmddOiBhbnl9KTogSVNpbmdsZVNsaWRlQ2Fyb3VzZWxHb1RvQW5pbWF0aW9uU3RhdHVzIHtcbiAgICAgICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgU0lOR0xFX1NMSURFX0NBUk9VU0VMX0FDVElPTlMuR09fVE86XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCB8fCB0eXBlb2Ygb3B0aW9ucy5pbmRleCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIG9wdGlvbnMgZm9yIFxcJycgKyBTSU5HTEVfU0xJREVfQ0FST1VTRUxfQUNUSU9OUy5HT19UTyArICdcXCcuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUdvVG8ob3B0aW9ucyBhcyBJU2luZ2xlU2xpZGVDYXJvdXNlbEdvdG9PcHRpb25zKTtcbiAgICAgICAgICAgIGNhc2UgU0lOR0xFX1NMSURFX0NBUk9VU0VMX0FDVElPTlMuR09fVE9fTkVYVDpcbiAgICAgICAgICAgICAgICBvcHRpb25zLmluZGV4ID0gKHRoaXMuYWN0aXZlSW5kZXggKyAxKSAlIHRoaXMuZWxlbWVudHNNYW5hZ2VyLmdldExlbmd0aCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZShTSU5HTEVfU0xJREVfQ0FST1VTRUxfQUNUSU9OUy5HT19UTywgb3B0aW9ucyk7XG4gICAgICAgICAgICBjYXNlIFNJTkdMRV9TTElERV9DQVJPVVNFTF9BQ1RJT05TLkdPX1RPX1BSRVZJT1VTOlxuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzTGVuZ3RoID0gdGhpcy5lbGVtZW50c01hbmFnZXIuZ2V0TGVuZ3RoKCk7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5pbmRleCA9ICgodGhpcy5hY3RpdmVJbmRleCAtIDEpICUgZWxlbWVudHNMZW5ndGggKyBlbGVtZW50c0xlbmd0aCkgJSBlbGVtZW50c0xlbmd0aDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGUoU0lOR0xFX1NMSURFX0NBUk9VU0VMX0FDVElPTlMuR09fVE8sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBjYXJvdXNlbCBhbmltYXRpb24gaXMgcGF1c2VkLlxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGNhcm91c2VsIGlzIHBhdXNlZCBhbmQgZmFsc2UgaW4gYW55IG90aGVyIGNhc2UuXG4gICAgICovXG4gICAgcHVibGljIGlzUGF1c2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXVzZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGF1c2VzIHRoZSBhbmltYXRpb25zIGN1cnJlbnRseSBoYW5kbGVkIGJ5IHRoZSBjYXJvdXNlbC5cbiAgICAgKi9cbiAgICBwdWJsaWMgcGF1c2UoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5wYXVzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lQW5pbWF0aW9uLnBhdXNlKG51bGwpO1xuICAgICAgICAgICAgdGhpcy5wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdChcbiAgICAgICAgICAgICAgICBTSU5HTEVfU0xJREVfQ0FST1VTRUxfRVZFTlRTLk9OX0FOSU1BVElPTl9QTEFZX1NUQVRFX0NIQU5HRSxcbiAgICAgICAgICAgICAgICB7IHZhbHVlIDogQW5pbWF0aW9uUGxheVN0YXRlVmFsdWUucGF1c2VkIH0gYXMgSVNpbmdsZVNsaWRlQ2Fyb3VzZWxBbmltYXRpb25QbGF5U3RhdGVDaGFuZ2VFdmVudEFyZ3MsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVW5zdWJzY3JpYmVzIGEgbGlzdGVuZXIgdG8gYW4gZXZlbnQgb2YgdGhlIGNhcm91c2VsLlxuICAgICAqIEBwYXJhbSBldmVudCBFdmVudCBhc3NvY2lhdGVkLlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciBMaXN0ZW5lciB0byB1bnN1YnNjcmliZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVtb3ZlTGlzdGVuZXIoZXZlbnQ6IHN0cmluZyB8IHN5bWJvbCwgbGlzdGVuZXI6ICguLi4gYXJnczogYW55W10pID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXN1bWVzIHRoZSBhbmltYXRpb25zIGN1cnJlbnRseSBoYW5kbGVkIGJ5IHRoZSBjYXJvdXNlbC5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVzdW1lKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5wYXVzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lQW5pbWF0aW9uLnJlc3VtZShudWxsKTtcbiAgICAgICAgICAgIHRoaXMucGF1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KFxuICAgICAgICAgICAgICAgIFNJTkdMRV9TTElERV9DQVJPVVNFTF9FVkVOVFMuT05fQU5JTUFUSU9OX1BMQVlfU1RBVEVfQ0hBTkdFLFxuICAgICAgICAgICAgICAgIHsgdmFsdWU6IEFuaW1hdGlvblBsYXlTdGF0ZVZhbHVlLnJ1bm5pbmcgfSBhcyBJU2luZ2xlU2xpZGVDYXJvdXNlbEFuaW1hdGlvblBsYXlTdGF0ZUNoYW5nZUV2ZW50QXJncyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIC8vI3JlZ2lvbiBQcm90ZWN0ZWRcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYW5pbWF0aW9uIGZsb3cgYmFzZWQgb24gYW5pbWF0aW9uIG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZW50ZXJFbGVtZW50IEVsZW1lbnQgdG8gYXBwbHkgdGhlIGVudGVyIGFuaW1hdGlvbi5cbiAgICAgKiBAcGFyYW0gbGVhdmVFbGVtZW50IEVsZW1lbnQgdG8gYXBwbHkgdGhlIGxlYXZlIGFuaW1hdGlvbi5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBBbmltYXRpb24gb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEFuaW1hdGlvbiBmbG93IGZyb20gdGhlIGFuaW1hdGlvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIHByb3RlY3RlZCBnZW5lcmF0ZUdvVG9BbmltYXRpb25GbG93KFxuICAgICAgICBlbnRlckVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgICAgICBsZWF2ZUVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgICAgICBvcHRpb25zOiBJU2luZ2xlU2xpZGVDYXJvdXNlbEdvdG9PcHRpb25zLFxuICAgICk6IElUYXNrRmxvdzxJQW5pbWF0aW9uRmxvd1BhcnQ+IHtcbiAgICAgICAgY29uc3QgaW5uZXJQYXJ0czogSUFuaW1hdGlvbkZsb3dQYXJ0W10gPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYWxpYXM6IFNJTkdMRV9TTElERV9DQVJPVVNFTF9QQVJUU19BTElBU0VTLkVOVEVSLFxuICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBbIGVudGVyRWxlbWVudCBdLFxuICAgICAgICAgICAgICAgIHN0eWxlczogb3B0aW9ucy5lbnRlckFuaW1hdGlvbi5zbGlkZVN0eWxlcyxcbiAgICAgICAgICAgICAgICB3aGVuOiBudWxsLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhbGlhczogU0lOR0xFX1NMSURFX0NBUk9VU0VMX1BBUlRTX0FMSUFTRVMuTEVBVkUsXG4gICAgICAgICAgICAgICAgZWxlbWVudHM6IFsgbGVhdmVFbGVtZW50IF0sXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBvcHRpb25zLmxlYXZlQW5pbWF0aW9uLnNsaWRlU3R5bGVzLFxuICAgICAgICAgICAgICAgIHdoZW46IG51bGwsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnN0IGdlbmVyYXRlQ2hpbGRyZW5QYXJ0cyA9IGZ1bmN0aW9uKFxuICAgICAgICAgICAgcGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgICAgICAgICBjaGlsZHJlblN0eWxlczogSUNhcm91c2VsQW5pbWF0aW9uQ2hpbGRyZW5TdHlsZXNbXSxcbiAgICAgICAgICAgIGFsaWFzQmFzZTogc3RyaW5nLFxuICAgICAgICApIHtcbiAgICAgICAgICAgIGlmIChjaGlsZHJlblN0eWxlcykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW5TdHlsZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJQYXJ0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWFzOiBhbGlhc0Jhc2UgKyBpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogZnVuY3Rpb24oKTogSFRNTEVsZW1lbnRbXSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudHM6IEhUTUxFbGVtZW50W10gPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmltYXRpb25PYmplY3Q6IElDYXJvdXNlbEFuaW1hdGlvbkNoaWxkcmVuU3R5bGVzID0gY2hpbGRyZW5TdHlsZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGRyZW5FbGVtZW50cyA9IHBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChhbmltYXRpb25PYmplY3Quc2VsZWN0b3IpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZHJlbkVsZW1lbnQgb2YgY2hpbGRyZW5FbGVtZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5wdXNoKGNoaWxkcmVuRWxlbWVudCBhcyBIVE1MRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSAoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlczogY2hpbGRyZW5TdHlsZXNbaV0uc3R5bGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2hlbjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGdlbmVyYXRlQ2hpbGRyZW5QYXJ0cyhcbiAgICAgICAgICAgIGVudGVyRWxlbWVudCxcbiAgICAgICAgICAgIG9wdGlvbnMuZW50ZXJBbmltYXRpb24uY2hpbGRyZW5TdHlsZXMsXG4gICAgICAgICAgICBTSU5HTEVfU0xJREVfQ0FST1VTRUxfUEFSVFNfQUxJQVNFUy5FTlRFUixcbiAgICAgICAgKTtcbiAgICAgICAgZ2VuZXJhdGVDaGlsZHJlblBhcnRzKFxuICAgICAgICAgICAgbGVhdmVFbGVtZW50LFxuICAgICAgICAgICAgb3B0aW9ucy5sZWF2ZUFuaW1hdGlvbi5jaGlsZHJlblN0eWxlcyxcbiAgICAgICAgICAgIFNJTkdMRV9TTElERV9DQVJPVVNFTF9QQVJUU19BTElBU0VTLkxFQVZFLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGlubmVyUGFydHNNYXA6IHsgW2tleTogc3RyaW5nXTogSUFuaW1hdGlvbkZsb3dQYXJ0IH0gPSB7IH07XG5cbiAgICAgICAgZm9yIChjb25zdCBpbm5lclBhcnQgb2YgaW5uZXJQYXJ0cykge1xuICAgICAgICAgICAgaW5uZXJQYXJ0c01hcFtpbm5lclBhcnQuYWxpYXNdID0gaW5uZXJQYXJ0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFuaW1hdGlvbkZsb3c6IElUYXNrRmxvdzxJQW5pbWF0aW9uRmxvd1BhcnQ+ID0ge1xuICAgICAgICAgICAgcGFydHM6IGlubmVyUGFydHMsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGFuaW1hdGlvbkZsb3c7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBjYXJvdXNlbCBzdHJ1Y3R1cmUuIFNldHMgYSBuZXcgYWN0aXZlIGVsZW1lbnQgZm9yIHRoZSBjYXJvdXNlbC5cbiAgICAgKiBAcGFyYW0gYWN0aXZlSW5kZXggQ3VycmVudCBhY3RpdmUgaW5kZXguXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHJlc2V0Q2Fyb3VzZWxTdHJ1Y3R1cmUoYWN0aXZlSW5kZXg6IG51bWJlcikge1xuICAgICAgICAvLyBUaGlzIG9wZXJhdGlvbiBpcyBhdG9taWMgaW4gYSBzaW5nbGUtdGhyZWFkIGVudmlyb25tZW50LCBzbyB3ZSBjYW4gc3RvcmUgdGhlIGNvbGxlY3Rpb24uXG4gICAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLmVsZW1lbnRzTWFuYWdlci5nZXRDb2xsZWN0aW9uKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sbGVjdGlvbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgd2hpbGUgKGNvbGxlY3Rpb25baV0uY2xhc3NMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uW2ldLmNsYXNzTGlzdC5yZW1vdmUoY29sbGVjdGlvbltpXS5jbGFzc0xpc3QuaXRlbSgwKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbGxlY3Rpb25baV0uY2xhc3NMaXN0LmFkZChDQVJPVVNFTF9TVFlMRVMuU0xJREUpO1xuXG4gICAgICAgICAgICBpZiAoaSA9PT0gYWN0aXZlSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uW2ldLmNsYXNzTGlzdC5hZGQoU0lOR0xFX1NMSURFX0NBUk9VU0VMX1NUWUxFUy5TT1JBX1JFTEFUSVZFKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbltpXS5jbGFzc0xpc3QuYWRkKFNJTkdMRV9TTElERV9DQVJPVVNFTF9TVFlMRVMuU0xJREVfSElEREVOKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgLy8jcmVnaW9uIFByaXZhdGVcblxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIEdvVG8gb3BlcmF0aW9uLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgd2l0aCB0aGUgaW5kZXggYW5kIHRoZSBjdXN0b20gYW5pbWF0aW9uIHRvIGRpc3BsYXkuXG4gICAgICovXG4gICAgcHJpdmF0ZSBoYW5kbGVHb1RvKG9wdGlvbnM6IElTaW5nbGVTbGlkZUNhcm91c2VsR290b09wdGlvbnMpOiBJU2luZ2xlU2xpZGVDYXJvdXNlbEdvVG9BbmltYXRpb25TdGF0dXMge1xuICAgICAgICBpZiAob3B0aW9ucy5pbmRleCA8IDAgfHwgb3B0aW9ucy5pbmRleCA+PSB0aGlzLmVsZW1lbnRzTWFuYWdlci5nZXRMZW5ndGgoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGluZGV4LiBUaGVyZSBpcyBubyBlbGVtZW50IHdpdGggaW5kZXggJyArIG9wdGlvbnMuaW5kZXggKyAnLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuaW5kZXggPT09IHRoaXMuYWN0aXZlSW5kZXgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbmRleC4gSXRcXCdzIG5vdCBhbGxvd2VkIHRvIGdvIHRvIHRoZSBjdXJyZW50IGFjdGl2ZSBzbGlkZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChudWxsID09IHRoaXMuY3VycmVudEFuaW1hdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50QW5pbWF0aW9uID0gb3B0aW9ucztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAnSXRcXCdzIG5vdCBhbGxvd2VkIHRvIHN0YXJ0IGFuIGFuaW1hdGlvbiB3aGlsZSBhbiBleGlzdGluZyBhbmltYXRpb24gb3ZlciBhbiBzbGlkZSBlbGVtZW50IGlzIGFjdGl2ZScsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb2xkQWN0aXZlRWxlbWVudCA9IHRoaXMuZWxlbWVudHNNYW5hZ2VyLmdldENvbGxlY3Rpb24oKVt0aGlzLmFjdGl2ZUluZGV4XTtcbiAgICAgICAgdmFyIG5ld0FjdGl2ZUluZGV4OiBudW1iZXIgPSBvcHRpb25zLmluZGV4O1xuXG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoU0lOR0xFX1NMSURFX0NBUk9VU0VMX0VWRU5UUy5PTl9BTklNQVRJT05fU1RBUlQsIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgIH0gYXMgSVNpbmdsZVNsaWRlQ2Fyb3VzZWxBbmltYXRpb25TdGFydEV2ZW50QXJncyk7XG5cbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgY29uc3Qgb25CZWZvcmVDaGFuZ2UgPSBmdW5jdGlvbihldmVudEFyZ3M6IENhbmNlbGFibGVDb2xsZWN0aW9uQ2hhbmdlRXZlbnRBcmdzPEhUTUxFbGVtZW50Pikge1xuICAgICAgICAgICAgY29uc3QgaW5kZXhNYXAgPSBldmVudEFyZ3MuZ2V0SW5kZXhNYXAoKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IGluZGV4TWFwW25ld0FjdGl2ZUluZGV4XSkge1xuICAgICAgICAgICAgICAgIGV2ZW50QXJncy5zZXRQcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG9uQWZ0ZXJDaGFuZ2UgPSBmdW5jdGlvbihldmVudEFyZ3M6IENvbGxlY3Rpb25DaGFuZ2VFdmVudEFyZ3M8SFRNTEVsZW1lbnQ+KSB7XG4gICAgICAgICAgICBpZiAoIWV2ZW50QXJncy5nZXRQcmV2ZW50RGVmYXVsdCgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXhNYXAgPSBldmVudEFyZ3MuZ2V0SW5kZXhNYXAoKTtcbiAgICAgICAgICAgICAgICBuZXdBY3RpdmVJbmRleCA9IGluZGV4TWFwW25ld0FjdGl2ZUluZGV4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmFkZExpc3RlbmVyKENPTExFQ1RJT05fTUFOQUdFUl9FVkVOVFMuY29sbGVjdGlvbkJlZm9yZUNoYW5nZSwgb25CZWZvcmVDaGFuZ2UpO1xuICAgICAgICB0aGlzLmFkZExpc3RlbmVyKENPTExFQ1RJT05fTUFOQUdFUl9FVkVOVFMuY29sbGVjdGlvbkFmdGVyQ2hhbmdlLCBvbkFmdGVyQ2hhbmdlKTtcblxuICAgICAgICBjb25zdCBuZXdBY3RpdmVFbGVtZW50ID0gdGhpcy5lbGVtZW50c01hbmFnZXIuZ2V0Q29sbGVjdGlvbigpW25ld0FjdGl2ZUluZGV4XTtcblxuICAgICAgICBuZXdBY3RpdmVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoU0lOR0xFX1NMSURFX0NBUk9VU0VMX1NUWUxFUy5TTElERV9ISURERU4pO1xuXG4gICAgICAgIHZhciBhbmltYXRpb25DYW5jZWxlZCA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IGNhbmNlbEFuaW1hdGlvbkhhbmRsZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGFuaW1hdGlvbkNhbmNlbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoYXQuY3VycmVudEFuaW1hdGlvbiA9IG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYW5pbWF0aW9uRmxvdyA9IHRoaXMuZ2VuZXJhdGVHb1RvQW5pbWF0aW9uRmxvdyhuZXdBY3RpdmVFbGVtZW50LCBvbGRBY3RpdmVFbGVtZW50LCBvcHRpb25zKTtcbiAgICAgICAgY29uc3QgYW5pbWF0aW9uUHJvbWlzZXM6IEFycmF5PFByb21pc2U8dm9pZD4+ID0gdGhpcy5lbmdpbmVBbmltYXRpb24uaGFuZGxlKGFuaW1hdGlvbkZsb3cpO1xuICAgICAgICBjb25zdCBBTklNQVRJT05fRU5URVJfSU5ERVg6IG51bWJlciA9IDA7XG4gICAgICAgIGNvbnN0IEFOSU1BVElPTl9MRUFWRV9JTkRFWDogbnVtYmVyID0gMTtcblxuICAgICAgICBjb25zdCBoaWRlTGVhdmVTbGlkZUFmdGVyQW5pbWF0aW9uRW5kcyA9IG5ldyBQcm9taXNlPHZvaWQ+KGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgYW5pbWF0aW9uUHJvbWlzZXNbQU5JTUFUSU9OX0xFQVZFX0lOREVYXS50aGVuKGZ1bmN0aW9uKGFuaW1hdGlvbk9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFuaW1hdGlvbkNhbmNlbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG9sZEFjdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChTSU5HTEVfU0xJREVfQ0FST1VTRUxfU1RZTEVTLlNMSURFX0hJRERFTik7XG4gICAgICAgICAgICAgICAgICAgIG9sZEFjdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShTSU5HTEVfU0xJREVfQ0FST1VTRUxfU1RZTEVTLlNPUkFfUkVMQVRJVkUpO1xuICAgICAgICAgICAgICAgICAgICBuZXdBY3RpdmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoU0lOR0xFX1NMSURFX0NBUk9VU0VMX1NUWUxFUy5TT1JBX1JFTEFUSVZFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRMaXN0ZW5lcihTSU5HTEVfU0xJREVfQ0FST1VTRUxfRVZFTlRTLk9OX0NBTkNFTF9BTklNQVRJT04sIGNhbmNlbEFuaW1hdGlvbkhhbmRsZXIpO1xuXG4gICAgICAgIGNvbnN0IHNvcmFIYW5kbGVyU3RhdHVzOiBQcm9taXNlPHZvaWQ+ID0gbmV3IFByb21pc2U8dm9pZD4oZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uUHJvbWlzZXNbQU5JTUFUSU9OX0VOVEVSX0lOREVYXSxcbiAgICAgICAgICAgICAgICBoaWRlTGVhdmVTbGlkZUFmdGVyQW5pbWF0aW9uRW5kcyxcbiAgICAgICAgICAgIF0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhbmltYXRpb25DYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmFjdGl2ZUluZGV4ID0gbmV3QWN0aXZlSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuY3VycmVudEFuaW1hdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhhdC5yZW1vdmVMaXN0ZW5lcihDT0xMRUNUSU9OX01BTkFHRVJfRVZFTlRTLmNvbGxlY3Rpb25CZWZvcmVDaGFuZ2UsIG9uQmVmb3JlQ2hhbmdlKTtcbiAgICAgICAgICAgICAgICB0aGF0LnJlbW92ZUxpc3RlbmVyKENPTExFQ1RJT05fTUFOQUdFUl9FVkVOVFMuY29sbGVjdGlvbkFmdGVyQ2hhbmdlLCBvbkFmdGVyQ2hhbmdlKTtcbiAgICAgICAgICAgICAgICB0aGF0LnJlbW92ZUxpc3RlbmVyKFNJTkdMRV9TTElERV9DQVJPVVNFTF9FVkVOVFMuT05fQ0FOQ0VMX0FOSU1BVElPTiwgY2FuY2VsQW5pbWF0aW9uSGFuZGxlcik7XG5cbiAgICAgICAgICAgICAgICB0aGF0LmV2ZW50RW1pdHRlci5lbWl0KFxuICAgICAgICAgICAgICAgICAgICBTSU5HTEVfU0xJREVfQ0FST1VTRUxfRVZFTlRTLk9OX0FOSU1BVElPTl9FTkQsXG4gICAgICAgICAgICAgICAgICAgIHt9IGFzIElTaW5nbGVTbGlkZUNhcm91c2VsQW5pbWF0aW9uRW5kRXZlbnRBcmdzLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYW5pbWF0aW9uUHJvbWlzZXM6IGFuaW1hdGlvblByb21pc2VzLFxuICAgICAgICAgICAgcGFydEVuZEV2ZW50QWNjZXNzOiB0aGF0LmVuZ2luZUFuaW1hdGlvbi5nZXRQYXJ0RW5kTGlzdGVuZXJBY2Nlc3MoKSxcbiAgICAgICAgICAgIHBhcnRTdGFydEV2ZW50QWNjZXNzOiB0aGF0LmVuZ2luZUFuaW1hdGlvbi5nZXRQYXJ0U3RhcnRMaXN0ZW5lckFjY2VzcygpLFxuICAgICAgICAgICAgc29yYUhhbmRsZXJTdGF0dXM6IHNvcmFIYW5kbGVyU3RhdHVzLFxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbGxlY3Rpb25DaGFuZ2VFdmVudEFyZ3MgfSBmcm9tICcuL2NvbGxlY3Rpb24tY2hhbmdlLWFyZ3MnO1xyXG5cclxuZXhwb3J0IGNsYXNzIENhbmNlbGFibGVDb2xsZWN0aW9uQ2hhbmdlRXZlbnRBcmdzPFQ+IGV4dGVuZHMgQ29sbGVjdGlvbkNoYW5nZUV2ZW50QXJnczxUPiB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2UuXHJcbiAgICAgKiBAcGFyYW0gaW5kZXhNYXAgSW5kZXggbWFwLCBmcm9tIG9sZCBpbmRleGVzIHRvIG5ldyBpbmRleGVzLlxyXG4gICAgICogQHBhcmFtIG5ld0VsZW1lbnRzIE5ldyBFbGVtZW50cyBhcnJheS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGluZGV4TWFwOiB7W29sZEluZGV4OiBudW1iZXJdOiBudW1iZXJ9LCBuZXdFbGVtZW50czogVFtdKSB7XHJcbiAgICAgICAgc3VwZXIoaW5kZXhNYXAsIG5ld0VsZW1lbnRzLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBwcmV2ZW50IGRlZmF1bHQgYWN0aW9uIGZsYWcgdG8gdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFByZXZlbnREZWZhdWx0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucHJldmVudERlZmF1bHQgPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBDb2xsZWN0aW9uQ2hhbmdlRXZlbnRBcmdzPFQ+IHtcclxuICAgIC8qKlxyXG4gICAgICogTWFwIGZyb20gb2xkIGluZGV4ZXMgdG8gbmV3IGluZGV4ZXNcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGluZGV4TWFwOiB7W29sZEluZGV4OiBudW1iZXJdOiBudW1iZXJ9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBuZXcgRWxlbWVudHMgYXJyYXlcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIG5ld0VsZW1lbnRzOiBUW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGbGFnIHRvIHByZXZlbnQgdGhlIGRlZmF1bHQgYWN0aW9uICh1cGRhdGUgdGhlIGNvbGxlY3Rpb24pXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBwcmV2ZW50RGVmYXVsdDogYm9vbGVhbjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2UuXHJcbiAgICAgKiBAcGFyYW0gaW5kZXhNYXAgSW5kZXggbWFwLCBmcm9tIG9sZCBpbmRleGVzIHRvIG5ldyBpbmRleGVzLlxyXG4gICAgICogQHBhcmFtIG5ld0VsZW1lbnRzIE5ldyBFbGVtZW50cyBhcnJheS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGluZGV4TWFwOiB7W29sZEluZGV4OiBudW1iZXJdOiBudW1iZXJ9LCBuZXdFbGVtZW50czogVFtdLCBwcmV2ZW50RGVmYXVsdDogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuaW5kZXhNYXAgPSBpbmRleE1hcDtcclxuICAgICAgICB0aGlzLm5ld0VsZW1lbnRzID0gbmV3RWxlbWVudHM7XHJcbiAgICAgICAgdGhpcy5wcmV2ZW50RGVmYXVsdCA9IHByZXZlbnREZWZhdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGNsb25lIGNvcHkgb2YgdGhlIGluZGV4IG1hcC5cclxuICAgICAqIFRoZSBpbmRleCBtYXAga2V5cyBhcmUgdGhlIG9sZCBpbmRleGVzIG9mIHRoZSBjb2xsZWN0aW9uLlxyXG4gICAgICogVGhlIGluZGV4IG1hcCB2YWx1ZXMgYXJlIHRoZSBuZXcgaW5kZXhlcyBmb3IgdGhlIG9sZCBvbmVzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0SW5kZXhNYXAoKToge1tvbGRJbmRleDogbnVtYmVyXTogbnVtYmVyfSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHRoaXMuaW5kZXhNYXApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGNsb25lIGNvcHkgb2YgdGhlIGNvbGxlY3Rpb24gdGhhdCBjb3VsZCBiZSB0aGUgbmV3IGNvbGxlY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXROZXdFbGVtZW50cygpOiB7W2luZGV4OiBudW1iZXJdOiBUfSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHRoaXMubmV3RWxlbWVudHMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgcHJldmVudCBkZWZhdWx0IGFjdGlvbiBmbGFnLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0UHJldmVudERlZmF1bHQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJldmVudERlZmF1bHQ7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJztcclxuaW1wb3J0IHsgQ2FuY2VsYWJsZUNvbGxlY3Rpb25DaGFuZ2VFdmVudEFyZ3MgfSBmcm9tICcuL2NhbmNlbGFibGUtY29sbGVjdGlvbi1jaGFuZ2UtYXJncyc7XHJcbmltcG9ydCB7IENvbGxlY3Rpb25DaGFuZ2VFdmVudEFyZ3MgfSBmcm9tICcuL2NvbGxlY3Rpb24tY2hhbmdlLWFyZ3MnO1xyXG5cclxuZXhwb3J0IGNvbnN0IENPTExFQ1RJT05fTUFOQUdFUl9FVkVOVFMgPSB7XHJcbiAgICBjb2xsZWN0aW9uQWZ0ZXJDaGFuZ2U6ICdjb2xsLmNoLmEnLFxyXG4gICAgY29sbGVjdGlvbkJlZm9yZUNoYW5nZTogJ2NvbGwuY2guYicsXHJcbn07XHJcblxyXG4vKipcclxuICogQ29sbGVjdGlvbiBtYW5hZ2VyLlxyXG4gKiBIYW5kbGVzIGEgY29sbGVjdGlvbiBvZiBpdGVtcyBhbmQgZW1pdHMgZXZlbnRzIG9uIG1vZGlmaWNhdGlvbnMgb2YgdGhlIG1hbmFnZWQgY29sbGVjdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb2xsZWN0aW9uTWFuYWdlcjxUPiB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb2xsZWN0aW9uIHRvIG1hbmFnZVxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgY29sbGVjdGlvbjogVFtdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZlbnQgZW1pdHRlciB1c2VkIHRvIGVtaXQgZXZlbnRzXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBldmVudEVtaXR0ZXI6IEV2ZW50RW1pdHRlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGNsYXNzLlxyXG4gICAgICogQHBhcmFtIGNvbGxlY3Rpb24gQ29sbGVjdGlvbiB0byBtYW5hZ2UuXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRFbWl0dGVyIEV2ZW50IGVtaXR0ZXIgdXNlZCB0byBlbWl0IGV2ZW50cy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb246IFRbXSwgZXZlbnRFbWl0dGVyOiBFdmVudEVtaXR0ZXIpIHtcclxuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xyXG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyID0gZXZlbnRFbWl0dGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBQdWJsaWNcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGNvbGxlY3Rpb24gb2YgZWxlbWVudHMgbWFuYWdlZC5cclxuICAgICAqIFRoaXMgaXMgdGhlIHJlYWwgY29sbGVjdGlvbiBtYW5hZ2VkIGJ5IHRoZSBpbnN0YW5jZS5cclxuICAgICAqIE9ubHkgcmVhZCBvcGVyYXRpb25zIHNob3VsZCBiZSBwZXJmb3JtZWQgZGlyZWN0bHkgaW4gdGhlIGNvbGxlY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRDb2xsZWN0aW9uKCk6IFRbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9idGFpbnMgdGhlIGxlbmd0aCBvZiB0aGUgY29sbGVjdGlvbi5cclxuICAgICAqIEByZXR1cm5zIExlbmd0aCBvZiB0aGUgY29sbGVjdGlvbiBtYW5hZ2VkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0TGVuZ3RoKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGVjdGlvbi5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnNlcnRzIGEgY29sbGVjdGlvbiBvZiBlbGVtZW50cyBhdCB0aGUgc2VsZWN0ZWQgaW5kZXhlcy5cclxuICAgICAqIEBwYXJhbSBlbGVtZW50cyBDb2xsZWN0aW9uIG9mIGluZGV4LWVsZW1lbnQgcGFpcnMgcmVwcmVzZW50aW5nIHRoZSBlbGVtZW50cyB0byBiZSBpbnNlcnRlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGluc2VydEVsZW1lbnRzKGVsZW1lbnRzOiB7W2luZGV4OiBudW1iZXJdOiBUfSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxJbnNlcnRFbGVtZW50cyhlbGVtZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGVsZW1lbnRzIG9mIHRoZSBjb2xsZWN0aW9uLlxyXG4gICAgICogQHBhcmFtIGluZGV4ZXMgSW5kZXhlcyBvZiB0aGUgY29sbGVjdGlvbiB0byBiZSByZW1vdmVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVtb3ZlRWxlbWVudHMoaW5kZXhlczogbnVtYmVyW10pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmludGVybmFsUmVtb3ZlRWxlbWVudHMoaW5kZXhlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnNlcnRzIGEgY29sbGVjdGlvbiBvZiBlbGVtZW50cyBhdCB0aGUgc2VsZWN0ZWQgaW5kZXhlcy5cclxuICAgICAqIEBwYXJhbSBlbGVtZW50cyBDb2xsZWN0aW9uIG9mIGluZGV4LWVsZW1lbnQgcGFpcnMgcmVwcmVzZW50aW5nIHRoZSBlbGVtZW50cyB0byBiZSBpbnNlcnRlZC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGludGVybmFsSW5zZXJ0RWxlbWVudHMoZWxlbWVudHM6IHtbaW5kZXg6IG51bWJlcl06IFR9KTogdm9pZCB7XHJcbiAgICAgICAgdmFyIGtleXM6IG51bWJlcltdID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBlbGVtSW5kZXggaW4gZWxlbWVudHMpIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnRzLmhhc093blByb3BlcnR5KGVsZW1JbmRleCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG51bWJlckVsZW1JbmRleCA9IE51bWJlcihlbGVtSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bWJlckVsZW1JbmRleCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBpbmRleCBwYXJhbSBzaG91bGQgYmUgZ3JlYXRlciBvciBlcXVhbHMgemVyby4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobnVtYmVyRWxlbUluZGV4ID4gdGhpcy5jb2xsZWN0aW9uLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ1RoZSBpbmRleCBwYXJhbSBzaG91bGQgYmUgbGVzcyBvciBlcXVhbHMgdGhlIG51bWJlciBvZiBlbGVtZW50cyBvZiB0aGUgY29sbGVjdGlvbi4nLFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2gobnVtYmVyRWxlbUluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAga2V5cyA9IGtleXMuc29ydChmdW5jdGlvbihudW1iZXIxLCBudW1iZXIyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudW1iZXIxIC0gbnVtYmVyMjtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKDAgPT09IGtleXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5ld0VsZW1lbnRzOiBUW10gPSBuZXcgQXJyYXkodGhpcy5jb2xsZWN0aW9uLmxlbmd0aCArIGtleXMubGVuZ3RoKTtcclxuICAgICAgICBjb25zdCBpbmRleE1hcDoge1tvbGRJbmRleDogbnVtYmVyXTogbnVtYmVyfSA9IHt9O1xyXG5cclxuICAgICAgICBpZiAoMSA9PT0ga2V5cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBrZXlzWzBdO1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudHNbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRleDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdFbGVtZW50c1tpXSA9IHRoaXMuY29sbGVjdGlvbltpXTtcclxuICAgICAgICAgICAgICAgIGluZGV4TWFwW2ldID0gaTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbmV3RWxlbWVudHNbaW5kZXhdID0gZWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBpbmRleCArIDE7IGkgPCBuZXdFbGVtZW50cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgbmV3RWxlbWVudHNbaV0gPSB0aGlzLmNvbGxlY3Rpb25baSAtIDFdO1xyXG4gICAgICAgICAgICAgICAgaW5kZXhNYXBbaSAtIDFdID0gaTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5c1swXTsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdFbGVtZW50c1tpXSA9IHRoaXMuY29sbGVjdGlvbltpXTtcclxuICAgICAgICAgICAgICAgIGluZGV4TWFwW2ldID0gaTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbmV3RWxlbWVudHNba2V5c1swXV0gPSBlbGVtZW50c1trZXlzWzBdXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXhQcmV2aW91cyA9IGtleXNbaSAtIDFdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBrZXlzW2ldO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IGluZGV4UHJldmlvdXMgKyAxOyBqIDwgaW5kZXg7ICsraikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0VsZW1lbnRzW2pdID0gdGhpcy5jb2xsZWN0aW9uW2ogLSBpXTtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleE1hcFtqIC0gaV0gPSBqO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG5ld0VsZW1lbnRzW2luZGV4XSA9IGVsZW1lbnRzW2luZGV4XTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGtleXNba2V5cy5sZW5ndGggLSAxXSArIDE7IGkgPCBuZXdFbGVtZW50cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgbmV3RWxlbWVudHNbaV0gPSB0aGlzLmNvbGxlY3Rpb25baSAtIGtleXMubGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIGluZGV4TWFwW2kgLSBrZXlzLmxlbmd0aF0gPSBpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmludGVybmFsVHJ5VG9DaGFuZ2VDb2xsZWN0aW9uKGluZGV4TWFwLCBuZXdFbGVtZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGVsZW1lbnRzIG9mIHRoZSBjb2xsZWN0aW9uLlxyXG4gICAgICogQHBhcmFtIGluZGV4ZXMgSW5kZXhlcyBvZiB0aGUgY29sbGVjdGlvbiB0byBiZSByZW1vdmVkLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW1vdmVFbGVtZW50cyhpbmRleGVzOiBudW1iZXJbXSk6IHZvaWQge1xyXG4gICAgICAgIC8vIFNvcnQgaW5kZXhlcy5cclxuICAgICAgICBpbmRleGVzID0gaW5kZXhlcy5zb3J0KGZ1bmN0aW9uKG51bWJlcjEsIG51bWJlcjIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bWJlcjEgLSBudW1iZXIyO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBpbmRleE1hcDoge1tvbGRJbmRleDogbnVtYmVyXTogbnVtYmVyfSA9IHt9O1xyXG4gICAgICAgIGNvbnN0IG5ld0VsZW1lbnRzOiBUW10gPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB2YXIgY291bnRlciA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbGxlY3Rpb24ubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgaWYgKGkgPT09IGluZGV4ZXNbY291bnRlcl0pIHtcclxuICAgICAgICAgICAgICAgICsrY291bnRlcjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ld0VsZW1lbnRzW2kgLSBjb3VudGVyXSA9IHRoaXMuY29sbGVjdGlvbltpXTtcclxuICAgICAgICAgICAgICAgIGluZGV4TWFwW2ldID0gaSAtIGNvdW50ZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxUcnlUb0NoYW5nZUNvbGxlY3Rpb24oaW5kZXhNYXAsIG5ld0VsZW1lbnRzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEF0dGVtcHMgdG8gY2hhbmdlIHRoZSBjb2xsZWN0aW9uIG1hbmFnZWQgYnkgdGhpcyBpbnN0YW5jZS5cclxuICAgICAqIEBwYXJhbSBpbmRleE1hcCBNYXAgZnJvbSBvbGQgaW5kZXhlcyB0byBuZXcgaW5kZXhlcy5cclxuICAgICAqIEBwYXJhbSBuZXdFbGVtZW50cyBOZXcgZWxlbWVudHMgdG8gbWFuYWdlIGlmIHRoZSBjaGFuZ2UgaXMgbm90IHByZXZlbnRlZC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGludGVybmFsVHJ5VG9DaGFuZ2VDb2xsZWN0aW9uKFxyXG4gICAgICAgIGluZGV4TWFwOiB7W29sZEluZGV4OiBudW1iZXJdOiBudW1iZXJ9ID0ge30sXHJcbiAgICAgICAgbmV3RWxlbWVudHM6IFRbXSxcclxuICAgICk6IENvbGxlY3Rpb25DaGFuZ2VFdmVudEFyZ3M8VD4ge1xyXG4gICAgICAgIGNvbnN0IGNhbmNlbGFibGVDaGFuZ2VFdmVudEFyZ3MgPSBuZXcgQ2FuY2VsYWJsZUNvbGxlY3Rpb25DaGFuZ2VFdmVudEFyZ3MoaW5kZXhNYXAsIG5ld0VsZW1lbnRzKTtcclxuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KENPTExFQ1RJT05fTUFOQUdFUl9FVkVOVFMuY29sbGVjdGlvbkJlZm9yZUNoYW5nZSwgY2FuY2VsYWJsZUNoYW5nZUV2ZW50QXJncyk7XHJcblxyXG4gICAgICAgIGlmICghY2FuY2VsYWJsZUNoYW5nZUV2ZW50QXJncy5nZXRQcmV2ZW50RGVmYXVsdCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IG5ld0VsZW1lbnRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY2hhbmdlRXZlbnRBcmdzID0gbmV3IENvbGxlY3Rpb25DaGFuZ2VFdmVudEFyZ3M8VD4oXHJcbiAgICAgICAgICAgIGluZGV4TWFwLFxyXG4gICAgICAgICAgICBuZXdFbGVtZW50cyxcclxuICAgICAgICAgICAgY2FuY2VsYWJsZUNoYW5nZUV2ZW50QXJncy5nZXRQcmV2ZW50RGVmYXVsdCgpLFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdChDT0xMRUNUSU9OX01BTkFHRVJfRVZFTlRTLmNvbGxlY3Rpb25BZnRlckNoYW5nZSwgY2hhbmdlRXZlbnRBcmdzKTtcclxuICAgICAgICByZXR1cm4gY2hhbmdlRXZlbnRBcmdzO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XHJcbmltcG9ydCB7IENvbGxlY3Rpb25DaGFuZ2VFdmVudEFyZ3MgfSBmcm9tICcuL2NvbGxlY3Rpb24tY2hhbmdlLWFyZ3MnO1xyXG5pbXBvcnQgeyBDb2xsZWN0aW9uTWFuYWdlciB9IGZyb20gJy4vY29sbGVjdGlvbi1tYW5hZ2VyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBIdG1sQ2hpbGRyZW5NYW5hZ2VyIGV4dGVuZHMgQ29sbGVjdGlvbk1hbmFnZXI8SFRNTEVsZW1lbnQ+IHtcclxuICAgIC8qKlxyXG4gICAgICogUGFyZW50IGVsZW1lbnQgb2YgdGhlIG1lbWJlcnMgb2YgdGhlIGNvbGxlY3Rpb25cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIHBhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uOiBIVE1MRWxlbWVudFtdLCBldmVudEVtaXR0ZXI6IEV2ZW50RW1pdHRlciwgcGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlcihjb2xsZWN0aW9uLCBldmVudEVtaXR0ZXIpO1xyXG5cclxuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXR0ZW1wcyB0byBjaGFuZ2UgdGhlIGNvbGxlY3Rpb24gbWFuYWdlZCBieSB0aGlzIGluc3RhbmNlLlxyXG4gICAgICogQHBhcmFtIGluZGV4TWFwIE1hcCBmcm9tIG9sZCBpbmRleGVzIHRvIG5ldyBpbmRleGVzLlxyXG4gICAgICogQHBhcmFtIG5ld0VsZW1lbnRzIE5ldyBlbGVtZW50cyB0byBtYW5hZ2UgaWYgdGhlIGNoYW5nZSBpcyBub3QgcHJldmVudGVkLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxUcnlUb0NoYW5nZUNvbGxlY3Rpb24oXHJcbiAgICAgICAgaW5kZXhNYXA6IHtbb2xkSW5kZXg6IG51bWJlcl06IG51bWJlcn0gPSB7fSxcclxuICAgICAgICBuZXdFbGVtZW50czogSFRNTEVsZW1lbnRbXSxcclxuICAgICk6IENvbGxlY3Rpb25DaGFuZ2VFdmVudEFyZ3M8SFRNTEVsZW1lbnQ+IHtcclxuICAgICAgICBjb25zdCBldmVudEFyZ3MgPSBzdXBlci5pbnRlcm5hbFRyeVRvQ2hhbmdlQ29sbGVjdGlvbihpbmRleE1hcCwgbmV3RWxlbWVudHMpO1xyXG5cclxuICAgICAgICBpZiAoIWV2ZW50QXJncy5nZXRQcmV2ZW50RGVmYXVsdCgpKSB7XHJcbiAgICAgICAgICAgIC8vIFBlcmZvcm0gRE9NIG1vZGlmaWNhdGlvbnMuXHJcbiAgICAgICAgICAgIHZhciBkZWxldGlvblBpdm90ID0gMDtcclxuICAgICAgICAgICAgdmFyIGluc2VydGlvblBpdm90ID0gMDtcclxuICAgICAgICAgICAgdmFyIG9sZEluZGV4ZXNDb3VudGVyID0gMDtcclxuICAgICAgICAgICAgdmFyIG5ld0luZGV4ZXNDb3VudGVyID0gMDtcclxuXHJcbiAgICAgICAgICAgIC8vIEltcG9ydGFudDogS2V5cyBtdXN0IGJlIGd1YXJhbnRlZWQgdG8gYmUgb3JkZXJlZCFcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gaW5kZXhNYXApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleE1hcC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5TnVtYmVyOiBudW1iZXIgPSBOdW1iZXIoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gb2xkSW5kZXhlc0NvdW50ZXI7IGkgPCBrZXlOdW1iZXI7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgb2xkIGVsZW1lbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLnBhcmVudEVsZW1lbnQuY2hpbGRyZW5baSArIGluc2VydGlvblBpdm90IC0gZGVsZXRpb25QaXZvdF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICArK2RlbGV0aW9uUGl2b3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJbmRleDogbnVtYmVyID0gaW5kZXhNYXBba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gbmV3SW5kZXhlc0NvdW50ZXI7IGkgPCBuZXdJbmRleDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluc2VydCBuZXcgZWxlbWVudHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUobmV3RWxlbWVudHNbaV0sIHRoaXMucGFyZW50RWxlbWVudC5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsraW5zZXJ0aW9uUGl2b3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBvbGRJbmRleGVzQ291bnRlciA9IGtleU51bWJlciArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXhlc0NvdW50ZXIgPSBuZXdJbmRleCArIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBuZXdJbmRleGVzQ291bnRlcjsgaSA8IG5ld0VsZW1lbnRzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQobmV3RWxlbWVudHNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZXZlbnRBcmdzO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBUb2tlbk1hcDxUPiB7XHJcbiAgICAvLyNyZWdpb24gUHJvcGVydGllc1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5uZXIgbWFwLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgaW5uZXJNYXA6IE1hcDxudW1iZXIsIFQ+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTGlzdCBvZiB1bnVzZWQgaW5kZXhlZCBiZWxsb3cgdGhlIG1heGltdW4gdXNlZCBpbmRleC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIHVudXNlZEluZGV4ZXM6IG51bWJlcltdO1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmlubmVyTWFwID0gbmV3IE1hcDxudW1iZXIsIFQ+KCk7XHJcbiAgICAgICAgdGhpcy51bnVzZWRJbmRleGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGFuIGVsZW1lbnQgdG8gdGhlIGFycmF5IGNvbGxlY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gZWxlbSBFbGVtZW50IHRvIGJlIGFkZGVkIHRvIHRoZSBhcnJheS5cclxuICAgICAqIEByZXR1cm5zIGluZGV4IGluIHdoaWNoIHRoZSBlbGVtZW50IGlzIGxvY2F0ZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGQoZWxlbTogVCk6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKDAgPT09IHRoaXMudW51c2VkSW5kZXhlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgbGFzdEluZGV4OiBudW1iZXIgPSB0aGlzLmlubmVyTWFwLnNpemU7XHJcbiAgICAgICAgICAgIHRoaXMuaW5uZXJNYXAuc2V0KGxhc3RJbmRleCwgZWxlbSk7XHJcbiAgICAgICAgICAgIHJldHVybiBsYXN0SW5kZXg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgbGFzdEluZGV4OiBudW1iZXIgPSB0aGlzLnVudXNlZEluZGV4ZXNbdGhpcy51bnVzZWRJbmRleGVzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICAtLXRoaXMudW51c2VkSW5kZXhlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHRoaXMuaW5uZXJNYXAuc2V0KGxhc3RJbmRleCwgZWxlbSk7XHJcbiAgICAgICAgICAgIHJldHVybiBsYXN0SW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT2J0YWlucyB0aGUgYW1vdW50IG9mIGVsZW1lbnRzIGluc2lkZSB0aGUgYXJyYXkuXHJcbiAgICAgKiBAcmV0dXJucyBBbW91bnQgb2YgZWxlbWVudHMgaW5zaWRlIHRoZSBhcnJheS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvdW50KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJNYXAuc2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEl0ZXJhdGVzIG92ZXIgdGhlIGFycmF5IGFuZCBhcHBsaWVzIGEgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gY29uc3VtZXIgRnVuY3Rpb24gdG8gYXBwbHkgdG8gYW55IHBhaXIgb2YgaW5kZXgtZWxlbWVudCBmb3VuZCAodW5kZWZpbmVkIHZhbHVlcyBhcmUgZGlzY2FydGVkKS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGZvcmVhY2goY29uc3VtZXI6ICh2YWx1ZTogVCwga2V5OiBudW1iZXIpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmlubmVyTWFwLmZvckVhY2goZnVuY3Rpb24odmFsdWU6IFQsIGtleTogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN1bWVyKHZhbHVlLCBrZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT2J0YWlucyBhbiBlbGVtZW50IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguXHJcbiAgICAgKiBAcGFyYW0gaW5kZXggSW5kZXggb2YgdGhlIGVsZW1lbnQgdG8gb2J0YWludC5cclxuICAgICAqIEByZXR1cm5zIEVsZW1lbnQgb2J0aWFuZWQgYXQgdGhlIHNwZWNpZmllZCBpbmRleC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldChpbmRleDogbnVtYmVyKTogVCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJNYXAuZ2V0KGluZGV4KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYW4gZWxlbWVudCBhdCB0aGUgcG9zaXRpb24gc3BlY2lmaWVkLlxyXG4gICAgICogQHBhcmFtIGluZGV4IEluZGV4IG9mIHRoZSBlbGVtZW50IHRvIGJlIHJlbW92ZWQuXHJcbiAgICAgKiBAcmV0dXJucyBSZXN1bHQgb2YgdGhlIG9wZXJhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlbW92ZShpbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5uZXJNYXAuaGFzKGluZGV4KSkge1xyXG4gICAgICAgICAgICB0aGlzLmlubmVyTWFwLmRlbGV0ZShpbmRleCk7XHJcbiAgICAgICAgICAgIHRoaXMudW51c2VkSW5kZXhlc1t0aGlzLnVudXNlZEluZGV4ZXMubGVuZ3RoXSA9IGluZGV4O1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFuaW1hdGlvbkVuZ2luZVRlc3RzIH0gZnJvbSAnLi90ZXN0L2FuaW1hdGlvbi9hbmltYXRpb24tZW5naW5lLnRlc3QnO1xyXG5pbXBvcnQgeyBTaW5nbGVTbGlkZUNhcm91c2VsVGVzdHMgfSBmcm9tICcuL3Rlc3QvY2Fyb3VzZWwvc2luZ2xlLXNsaWRlLWNhcm91c2VsLnRlc3QnO1xyXG5pbXBvcnQgeyBDb2xsZWN0aW9uTWFuYWdlclRlc3RzIH0gZnJvbSAnLi90ZXN0L2NvbGxlY3Rpb24vY29sbGVjdGlvbi1tYW5hZ2VyLnRlc3QnO1xyXG5pbXBvcnQgeyBUb2tlbk1hcFRlc3RzIH0gZnJvbSAnLi90ZXN0L2NvbGxlY3Rpb24vdG9rZW4tbWFwLnRlc3QnO1xyXG5cclxuY29uc3Qgc29yYVRlc3QgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcGVyZm9ybVRlc3RzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbmV3IEFuaW1hdGlvbkVuZ2luZVRlc3RzKCkucGVyZm9ybVRlc3RzKCk7XHJcbiAgICAgICAgICAgIG5ldyBDb2xsZWN0aW9uTWFuYWdlclRlc3RzKCkucGVyZm9ybVRlc3RzKCk7XHJcbiAgICAgICAgICAgIG5ldyBTaW5nbGVTbGlkZUNhcm91c2VsVGVzdHMoKS5wZXJmb3JtVGVzdHMoKTtcclxuICAgICAgICAgICAgbmV3IFRva2VuTWFwVGVzdHMoKS5wZXJmb3JtVGVzdHMoKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufSAoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gc29yYVRlc3Q7XHJcbiIsIi8qKlxyXG4gKiBDb25zdHJhaW50IHRoYXQgZGV0ZXJtaW5lcyB0aGUgc3RhcnQgb2YgdGhlIHRhc2sgcGFydC5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVRhc2tQYXJ0V2hlbkNvbnN0cmFpbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBXaGVuIGVudGl0eSB0byBjaGVjayBvbmNlIHRoaXMgY29uc3RyYWludCBpcyBlbnN1cmVkLlxyXG4gICAgICovXHJcbiAgICBhZnRlcjogSVRhc2tQYXJ0V2hlbkNvbnN0cmFpbnQ7XHJcbiAgICAvKipcclxuICAgICAqIFR5cGUgb2YgdGhpcyBjb25zdHJhaW50LlxyXG4gICAgICovXHJcbiAgICBjb25zdHJhaW50VHlwZTogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogQ29uc3RyYWludCB0aGF0IGRldGVybWluZXMgdGhlIHN0YXJ0IG9mIHRoZSB0YXNrIHBhcnQuXHJcbiAqL1xyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVGFza1BhcnRXaGVuQ29uc3RyYWludCBpbXBsZW1lbnRzIElUYXNrUGFydFdoZW5Db25zdHJhaW50IHtcclxuICAgIC8qKlxyXG4gICAgICogV2hlbiBlbnRpdHkgdG8gY2hlY2sgb25jZSB0aGlzIGNvbnN0cmFpbnQgaXMgZW5zdXJlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFmdGVyOiBJVGFza1BhcnRXaGVuQ29uc3RyYWludDtcclxuICAgIC8qKlxyXG4gICAgICogVHlwZSBvZiB0aGlzIGNvbnN0cmFpbnQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJhaW50VHlwZTogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXNrIHBhcnQgY29uc3RyYWludC5cclxuICAgICAqIEBwYXJhbSBhZnRlciBDb25zdHJhaW50IHRvIGFwcGx5IGFmdGVyIHRoaXMgY29uc3RyYWludCBpcyBjaGVja2VkLlxyXG4gICAgICogQHBhcmFtIGNvbnN0cmFpbnRUeXBlIENvbnN0cmFpbnQgdHlwZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGFmdGVyOiBJVGFza1BhcnRXaGVuQ29uc3RyYWludCwgY29uc3RyYWludFR5cGU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuYWZ0ZXIgPSBhZnRlcjtcclxuICAgICAgICB0aGlzLmNvbnN0cmFpbnRUeXBlID0gY29uc3RyYWludFR5cGU7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSVRhc2tQYXJ0V2hlbkNvbnN0cmFpbnQgfSBmcm9tICcuL3Rhc2stZmxvdy13aGVuJztcclxuaW1wb3J0IHtcclxuICAgIFRBU0tfQ09OU1RSQUlOVF9UWVBFUyxcclxuICAgIFRhc2tQYXJ0Q29uc3RyYWludCxcclxufSBmcm9tICcuL3Rhc2stcGFydC1jb25zdHJhaW50JztcclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgd2hlbiBjb25zdHJhaW50IHRoYXQgaXMgY2hlY2tlZCBvbmNlIGEgdGFzayBwYXJ0IHN0YXJ0cy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUYXNrUGFydEJlZ2luQ29uc3RyYWludCBleHRlbmRzIFRhc2tQYXJ0Q29uc3RyYWludCB7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoYWZ0ZXI6IElUYXNrUGFydFdoZW5Db25zdHJhaW50LCBhbGlhczogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoYWZ0ZXIsIGFsaWFzLCBUQVNLX0NPTlNUUkFJTlRfVFlQRVMuU1RBUlQpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7XHJcbiAgICBJVGFza1BhcnRXaGVuQ29uc3RyYWludCxcclxuICAgIFRhc2tQYXJ0V2hlbkNvbnN0cmFpbnQsXHJcbn0gZnJvbSAnLi90YXNrLWZsb3ctd2hlbic7XHJcblxyXG4vKipcclxuICogVGFzayBjb25zdHJhaW50IHR5cGVzXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVEFTS19DT05TVFJBSU5UX1RZUEVTID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXF1aXJlcyB0aGUgZW5kIG9mIGEgdGFzayBwYXJ0LlxyXG4gICAgICovXHJcbiAgICBFTkQ6ICdhbmltLmVuZCcsXHJcbiAgICAvKipcclxuICAgICAqIFJlcXVpcmVzIGEgZ3JvdXAgb2YgY29uc3RyYWludHMuXHJcbiAgICAgKi9cclxuICAgIEdST1VQOiAnZ3JvdXAnLFxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXF1aXJlcyB0aGUgc3RhcnQgb2YgYSB0YXNrIHBhcnQuXHJcbiAgICAgKi9cclxuICAgIFNUQVJUIDogJ2FuaW0uc3RhcnQnLFxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXF1aXJlcyBhbiBhbW91bnQgb2YgdGltZS5cclxuICAgICAqL1xyXG4gICAgV0FJVF9GT1I6ICd3YWl0JyxcclxufTtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBUYXNrUGFydENvbnN0cmFpbnQgZXh0ZW5kcyBUYXNrUGFydFdoZW5Db25zdHJhaW50IHtcclxuICAgIC8qKlxyXG4gICAgICogQWxpYXMgb2YgdGhlIHBhcnQgYWZmZWN0ZWQgYnkgdGhpcyBjb25zdHJhaW50LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWxpYXM6IHN0cmluZztcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFzayBwYXJ0IGNvbnN0cmFpbnQuXHJcbiAgICAgKiBAcGFyYW0gYWZ0ZXIgQ29uc3RyYWludCB0byBhcHBseSBhZnRlciB0aGlzIGNvbnN0cmFpbnQgaXMgY2hlY2tlZC5cclxuICAgICAqIEBwYXJhbSBhbGlhcyBBbGlhc2VzIG9mIHRoZSBwYXJ0cyBhZmZlY3RlZCBieSB0aGlzIGNvbnN0cmFpbnQuXHJcbiAgICAgKiBAcGFyYW0gY29uc3RyYWludFR5cGUgQ29uc3RyYWludCB0eXBlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoYWZ0ZXI6IElUYXNrUGFydFdoZW5Db25zdHJhaW50LCBhbGlhczogc3RyaW5nLCBjb25zdHJhaW50VHlwZTogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoYWZ0ZXIsIGNvbnN0cmFpbnRUeXBlKTtcclxuXHJcbiAgICAgICAgdGhpcy5hbGlhcyA9IGFsaWFzO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IElUYXNrUGFydFdoZW5Db25zdHJhaW50IH0gZnJvbSAnLi90YXNrLWZsb3ctd2hlbic7XHJcbmltcG9ydCB7XHJcbiAgICBUQVNLX0NPTlNUUkFJTlRfVFlQRVMsXHJcbiAgICBUYXNrUGFydENvbnN0cmFpbnQsXHJcbn0gZnJvbSAnLi90YXNrLXBhcnQtY29uc3RyYWludCc7XHJcblxyXG4vKipcclxuICogUmVwcmVzZW50cyBhIHdoZW4gY29uc3RyYWludCB0aGF0IGlzIGNoZWNrZWQgb25jZSBhIHRhc2sgcGFydCBlbmRzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRhc2tQYXJ0RW5kQ29uc3RyYWludCBleHRlbmRzIFRhc2tQYXJ0Q29uc3RyYWludCB7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoYWZ0ZXI6IElUYXNrUGFydFdoZW5Db25zdHJhaW50LCBhbGlhczogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoYWZ0ZXIsIGFsaWFzLCBUQVNLX0NPTlNUUkFJTlRfVFlQRVMuRU5EKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge1xyXG4gICAgSVRhc2tQYXJ0V2hlbkNvbnN0cmFpbnQsXHJcbiAgICBUYXNrUGFydFdoZW5Db25zdHJhaW50LFxyXG59IGZyb20gJy4vdGFzay1mbG93LXdoZW4nO1xyXG5pbXBvcnQgeyBUQVNLX0NPTlNUUkFJTlRfVFlQRVMgfSBmcm9tICcuL3Rhc2stcGFydC1jb25zdHJhaW50JztcclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgd2hlbiBjb25zdHJhaW50IHRoYXQgaXMgY2hlY2tlZCBvbmNlIGFuIGFtb3VudCBvZiB0aW1lIHBhc3Nlcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUYXNrVGltZUNvbnN0cmFpbnQgZXh0ZW5kcyBUYXNrUGFydFdoZW5Db25zdHJhaW50IHtcclxuICAgIC8qKlxyXG4gICAgICogTWlsbGlzZWNvbmRzIHRvIHdhaXQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBtaWxsaXM6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoYWZ0ZXI6IElUYXNrUGFydFdoZW5Db25zdHJhaW50LCBtaWxsaXM6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKGFmdGVyLCBUQVNLX0NPTlNUUkFJTlRfVFlQRVMuV0FJVF9GT1IpO1xyXG4gICAgICAgIHRoaXMubWlsbGlzID0gbWlsbGlzO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XHJcbmltcG9ydCB7IFRva2VuTWFwIH0gZnJvbSAnLi4vLi4vY29sbGVjdGlvbi90b2tlbi1tYXAnO1xyXG5pbXBvcnQgeyBJT3BlcmF0aW9uTWFuYWdlckFjY2VzcyB9IGZyb20gJy4vb3BlcmF0aW9uLW1hbmFnZXItYWNjZXNzJztcclxuXHJcbi8qKlxyXG4gKiBPcGVyYXRpb24gYXJndW1lbnRzXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIElPcGVyYXRpb25BcmdzIHtcclxuICAgIGFsaWFzZXM6IHN0cmluZ1tdO1xyXG59XHJcblxyXG4vKipcclxuICogUmVwcmVzZW50cyBhbiBvcGVyYXRpb24gbWFuYWdlci4gVGhlIG9wZXJhdGlvbiBpcyBwcm9wYWdhdGVkIHVzaW5nIGFuIGV2ZW50LlxyXG4gKiBBbGwgdGhlIHN1YnNjcmliZXJzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgT3BlcmF0aW9uTWFuYWdlcjxBcmdzIGV4dGVuZHMgSU9wZXJhdGlvbkFyZ3M+IGltcGxlbWVudHMgSU9wZXJhdGlvbk1hbmFnZXJBY2Nlc3M8QXJncz4ge1xyXG5cclxuICAgIC8vI3JlZ2lvbiBBdHRyaWJ1dGVzXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGdW5jdGlvbiB0byBiZSBjYWxsZWQgdG8gaGFuZGxlIHRoZSBldmVudC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGNhbGxGdW5jdGlvbjogKGV2ZW50QXJnczogQXJncykgPT4gdm9pZDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFsaWFzIG9mIHRoZSBldmVudC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGV2ZW50QWxpYXM6IHN0cmluZztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2ZW50IGVtbWl0dGVyIG9mIHRoZSBldmVudC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGV2ZW50RW1pdHRlcjogRXZlbnRFbWl0dGVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogT2JqZWN0IHRvIHN0b3JhZ2UgYWxsIHRoZSBmdW5jdGlvbnMgc3Vic2NyaWJlZC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIHN1YnNjcmlwdGlvblN0b3JhZ2U6IHsgW2FsaWFzOiBzdHJpbmddOiBUb2tlbk1hcDwoZXZlbnRBcmdzOiBBcmdzKSA9PiB2b2lkPiB9O1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBvcGVyYXRpb24gbWFuYWdlclxyXG4gICAgICogQHBhcmFtIGV2ZW50QWxpYXMgRXZlbnQgYWxpYXMuXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRFbWl0dGVyIEV2ZW50IGVtaXR0ZXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihldmVudEFsaWFzOiBzdHJpbmcsIGV2ZW50RW1pdHRlcjogRXZlbnRFbWl0dGVyKSB7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jYWxsRnVuY3Rpb24gPSBmdW5jdGlvbihldmVudEFyZ3M6IEFyZ3MpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50QXJncy5hbGlhc2VzID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYWxpYXMgaW4gdGhhdC5zdWJzY3JpcHRpb25TdG9yYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuc3Vic2NyaXB0aW9uU3RvcmFnZS5oYXNPd25Qcm9wZXJ0eShhbGlhcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3Vic2NyaWJlcnMgPSB0aGF0LnN1YnNjcmlwdGlvblN0b3JhZ2VbYWxpYXNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaWJlcnMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlcnMuZm9yZWFjaChmdW5jdGlvbih2YWx1ZTogKGV2ZW50QXJnczogQXJncykgPT4gdm9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlKGV2ZW50QXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYWxpYXMgb2YgZXZlbnRBcmdzLmFsaWFzZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJzY3JpYmVycyA9IHRoYXQuc3Vic2NyaXB0aW9uU3RvcmFnZVthbGlhc107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNjcmliZXJzICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlcnMuZm9yZWFjaChmdW5jdGlvbih2YWx1ZTogKGV2ZW50QXJnczogQXJncykgPT4gdm9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUoZXZlbnRBcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5ldmVudEFsaWFzID0gZXZlbnRBbGlhcztcclxuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlciA9IGV2ZW50RW1pdHRlcjtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvblN0b3JhZ2UgPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuYWRkTGlzdGVuZXIodGhpcy5ldmVudEFsaWFzLCB0aGlzLmNhbGxGdW5jdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwb3NlcyB0aGUgaW5zdGFuY2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLnJlbW92ZUxpc3RlbmVyKHRoaXMuZXZlbnRBbGlhcywgdGhpcy5jYWxsRnVuY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3Vic3RyaWJlcyBhIGhhbmRsZXIgdW5kZXIgYW4gYWxpYXMuXHJcbiAgICAgKiBAcGFyYW0gYWxpYXMgQWxpYXMgb2YgdGhlIGhhbmRsZXIuXHJcbiAgICAgKiBAcGFyYW0gaGFuZGxlciBIYW5kbGVyIHRvIGJlIHN1YnNjcmliZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdWJzY3JpYmUoYWxpYXM6IHN0cmluZywgaGFuZGxlcjogKGV2ZW50QXJnczogQXJncykgPT4gdm9pZCk6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5zdWJzY3JpcHRpb25TdG9yYWdlW2FsaWFzXSkge1xyXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvblN0b3JhZ2VbYWxpYXNdID0gbmV3IFRva2VuTWFwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvblN0b3JhZ2VbYWxpYXNdLmFkZChoYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVuc3Vic2NyaWJlcyBhIGhhbmRsZXIgdW5kZXIgYW4gYWxpYXMuXHJcbiAgICAgKiBAcGFyYW0gYWxpYXMgQWxpYXMgb2YgdGhlIGhhbmRsZXIuXHJcbiAgICAgKiBAcGFyYW0gaW5kZXggSW5kZXggb2YgdGhlIGhhbmRsZXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1bnN1YnNjcmliZShhbGlhczogc3RyaW5nLCBpbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5zdWJzY3JpcHRpb25TdG9yYWdlW2FsaWFzXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9uU3RvcmFnZVthbGlhc10ucmVtb3ZlKGluZGV4KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJztcclxuaW1wb3J0IHsgSVRhc2tGbG93IH0gZnJvbSAnLi9mbG93L3Rhc2stZmxvdyc7XHJcbmltcG9ydCB7IElUYXNrRmxvd1BhcnQgfSBmcm9tICcuL2Zsb3cvdGFzay1mbG93LXBhcnQnO1xyXG5pbXBvcnQge1xyXG4gICAgSVRhc2tGbG93UGFydEVuZEFyZ3MsXHJcbiAgICBJVGFza0Zsb3dQYXJ0U3RhcnRBcmdzLFxyXG59IGZyb20gJy4vZmxvdy90YXNrLWZsb3ctcGFydC1ldmVudC1hcmdzJztcclxuaW1wb3J0IHsgSVRhc2tQYXJ0V2hlbkNvbnN0cmFpbnQgfSBmcm9tICcuL2Zsb3cvdGFzay1mbG93LXdoZW4nO1xyXG5pbXBvcnQgeyBUYXNrUGFydEJlZ2luQ29uc3RyYWludCB9IGZyb20gJy4vZmxvdy90YXNrLXBhcnQtYmVnaW4tY29uc3RyYWludCc7XHJcbmltcG9ydCB7IFRBU0tfQ09OU1RSQUlOVF9UWVBFUyB9IGZyb20gJy4vZmxvdy90YXNrLXBhcnQtY29uc3RyYWludCc7XHJcbmltcG9ydCB7IFRhc2tQYXJ0RW5kQ29uc3RyYWludCB9IGZyb20gJy4vZmxvdy90YXNrLXBhcnQtZW5kLWNvbnN0cmFpbnQnO1xyXG5pbXBvcnQgeyBUYXNrR3JvdXBDb25zdHJhaW50IH0gZnJvbSAnLi9mbG93L3Rhc2stcGFydC1ncm91cC1jb25zdHJhaW50JztcclxuaW1wb3J0IHsgVGFza1RpbWVDb25zdHJhaW50IH0gZnJvbSAnLi9mbG93L3Rhc2stcGFydC10aW1lLWNvbnN0cmFpbnQnO1xyXG5pbXBvcnQgeyBPcGVyYXRpb25NYW5hZ2VyIH0gZnJvbSAnLi9vcGVyYXRpb24vb3BlcmF0aW9uLW1hbmFnZXInO1xyXG5pbXBvcnQgeyBJT3BlcmF0aW9uTWFuYWdlckFjY2VzcyB9IGZyb20gJy4vb3BlcmF0aW9uL29wZXJhdGlvbi1tYW5hZ2VyLWFjY2Vzcyc7XHJcbmltcG9ydCB7IFRBU0tfUEFSVF9XSEVOX0VWRU5UUyB9IGZyb20gJy4vdGFzay1wYXJ0LXdoZW4tZXZlbnRzJztcclxuaW1wb3J0IHsgVGFza1BhcnRXaGVuT3BlcmF0b3IgfSBmcm9tICcuL3Rhc2stcGFydC13aGVuLW9wZXJhdG9yJztcclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgdGFzayBlbmdpbmUuXHJcbiAqL1xyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVGFza0VuZ2luZTxUUGFydCBleHRlbmRzIElUYXNrRmxvd1BhcnQ+IHtcclxuICAgIC8vI3JlZ2lvbiBBdHRyaWJ1dGVzXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUYXNrIGN1cnJlbnRseSBtYW5hZ2VkLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgY3VycmVudFRhc2s6IElUYXNrRmxvdzxUUGFydD47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmVudCBlbWl0dGVyIHRvIHVzZVxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgZXZlbnRFbWl0dGVyOiBFdmVudEVtaXR0ZXI7XHJcblxyXG4gICAgLy8jcmVnaW9uIE9wZXJhdGlvbnNcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1hbmFnZXIgdGhhdCBoYW5kbGVzIHRoZSBwYXJ0IGVuZCBldmVudC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIHBhcnRFbmRNYW5hZ2VyOiBPcGVyYXRpb25NYW5hZ2VyPElUYXNrRmxvd1BhcnRFbmRBcmdzPFRQYXJ0Pj47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYW5hZ2VyIHRoYXQgaGFuZGxlcyB0aGUgcGFydCBzdGFydCBldmVudC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIHBhcnRTdGFydE1hbmFnZXI6IE9wZXJhdGlvbk1hbmFnZXI8SVRhc2tGbG93UGFydFN0YXJ0QXJnczxUUGFydD4+O1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBQdWJsaWNcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5wYXJ0RW5kTWFuYWdlciA9IG5ldyBPcGVyYXRpb25NYW5hZ2VyPElUYXNrRmxvd1BhcnRFbmRBcmdzPFRQYXJ0Pj4oXHJcbiAgICAgICAgICAgIFRBU0tfUEFSVF9XSEVOX0VWRU5UUy5FTkQsXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5wYXJ0U3RhcnRNYW5hZ2VyID0gbmV3IE9wZXJhdGlvbk1hbmFnZXI8SVRhc2tGbG93UGFydFN0YXJ0QXJnczxUUGFydD4+KFxyXG4gICAgICAgICAgICBUQVNLX1BBUlRfV0hFTl9FVkVOVFMuU1RBUlQsXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPYnRhaW5zIHRoZSBhY2Nlc3Mgb2YgdGhlIHBhcnQgZW5kIGV2ZW50LlxyXG4gICAgICogQHJldHVybnMgQWNjZXNzIG9mIHRoZSBwYXJ0IGVuZCBldmVudC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFBhcnRFbmRMaXN0ZW5lckFjY2VzcygpOiBJT3BlcmF0aW9uTWFuYWdlckFjY2VzczxJVGFza0Zsb3dQYXJ0RW5kQXJnczxUUGFydD4+IHtcclxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uKFxyXG4gICAgICAgICAgICAgICAgYWxpYXM6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IChldmVudEFyZ3M6IElUYXNrRmxvd1BhcnRFbmRBcmdzPFRQYXJ0PikgPT4gdm9pZCxcclxuICAgICAgICAgICAgKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGF0LnBhcnRFbmRNYW5hZ2VyLnN1YnNjcmliZShhbGlhcywgaGFuZGxlcik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbihhbGlhczogc3RyaW5nLCBpbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5wYXJ0RW5kTWFuYWdlci51bnN1YnNjcmliZShhbGlhcywgaW5kZXgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPYnRhaW5zIHRoZSBhY2Nlc3Mgb2YgdGhlIHBhcnQgc3RhcnQgZXZlbnQuXHJcbiAgICAgKiBAcmV0dXJucyBBY2Nlc3Mgb2YgdGhlIHBhcnQgc3RhcnQgZXZlbnQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRQYXJ0U3RhcnRMaXN0ZW5lckFjY2VzcygpOiBJT3BlcmF0aW9uTWFuYWdlckFjY2VzczxJVGFza0Zsb3dQYXJ0U3RhcnRBcmdzPFRQYXJ0Pj4ge1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1YnNjcmliZTogZnVuY3Rpb24oXHJcbiAgICAgICAgICAgICAgICBhbGlhczogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogKGV2ZW50QXJnczogSVRhc2tGbG93UGFydFN0YXJ0QXJnczxUUGFydD4pID0+IHZvaWQsXHJcbiAgICAgICAgICAgICk6IG51bWJlciB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5wYXJ0U3RhcnRNYW5hZ2VyLnN1YnNjcmliZShhbGlhcywgaGFuZGxlcik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbihhbGlhczogc3RyaW5nLCBpbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5wYXJ0U3RhcnRNYW5hZ2VyLnVuc3Vic2NyaWJlKGFsaWFzLCBpbmRleCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgYSB0YXNrIGZsb3cuXHJcbiAgICAgKiBAcGFyYW0gdGFza0Zsb3cgVGFzayBmbG93IHRvIGJlIG1hbmFnZWQuXHJcbiAgICAgKiBAcmV0dXJucyBUYXNrIHBhcnQgcHJvbWlzZXMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBoYW5kbGUodGFza0Zsb3c6IElUYXNrRmxvdzxUUGFydD4pOiBBcnJheTxQcm9taXNlPHZvaWQ+PiB7XHJcbiAgICAgICAgaWYgKHRhc2tGbG93ID09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJdFxcJ3MgcmVxdWlyZWQgYSB0YXNrIGZsb3cuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YXNrRmxvdy5wYXJ0cyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSXRcXCdzIHJlcXVpcmVkIGEgdGFzayBmbG93IHdpdGggcGFydHMuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmN1cnJlbnRUYXNrID0gdGFza0Zsb3c7XHJcbiAgICAgICAgY29uc3QgcGFydFByb21pc2VzOiBBcnJheTxQcm9taXNlPHZvaWQ+PiA9IG5ldyBBcnJheSh0YXNrRmxvdy5wYXJ0cy5sZW5ndGgpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhc2tGbG93LnBhcnRzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIHBhcnRQcm9taXNlc1tpXSA9IHRoaXMuaGFuZGxlVGFza1BhcnQodGFza0Zsb3cucGFydHNbaV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBhcnRQcm9taXNlcztcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgYSB0YXNrIHBhcnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhcnQgVGFzayBwYXJ0IHRvIGhhbmRsZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmVkIG9uY2UgdGhlIHBhcnQgb2YgdGhlIHRhc2sgaXMgZmluaXNoZWQuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBoYW5kbGVUYXNrUGFydChwYXJ0OiBUUGFydCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHRoYXQuaGFuZGxlVGFza1BhcnRXaGVuKHBhcnQud2hlbikudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIC8vIDEuIEVtaXQgdGhlIHN0YXJ0IG9mIHRhc2sgcGFydC5cclxuICAgICAgICAgICAgICAgIHRoYXQuZXZlbnRFbWl0dGVyLmVtaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgVEFTS19QQVJUX1dIRU5fRVZFTlRTLlNUQVJULFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpYXNlczogW3BhcnQuYWxpYXNdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0OiBwYXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgIH0gYXMgSVRhc2tGbG93UGFydFN0YXJ0QXJnczxUUGFydD4sXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2U6IFByb21pc2VMaWtlPHt9IHwgdm9pZD4gPSB0aGF0LnBlcmZvcm1UYXNrKHBhcnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAzLiBFbWl0IHRoZSBlbmQgb2YgdGhlIHRhc2sgcGFydCBhbmQgcmVzb2x2ZSB0aGUgcHJvbWlzZS5cclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmV2ZW50RW1pdHRlci5lbWl0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBUQVNLX1BBUlRfV0hFTl9FVkVOVFMuRU5ELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlhc2VzOiBbcGFydC5hbGlhc10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0OiBwYXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGFzIElUYXNrRmxvd1BhcnRFbmRBcmdzPFRQYXJ0PixcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnI6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGVyZm9ybXMgYSB0YXNrIHBhcnQuXHJcbiAgICAgKiBAcGFyYW0gcGFydCBUYXNrIHBhcnQgdG8gYmUgcGVyZm9ybWVkLlxyXG4gICAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZlZCBvbmNlIHRoZSBwYXJ0IHRhc2sgaXMgcGVyZm9ybWVkLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgcGVyZm9ybVRhc2socGFydDogVFBhcnQpOiBQcm9taXNlTGlrZTx7fSB8IHZvaWQ+O1xyXG5cclxuICAgIC8vI3JlZ2lvbiBUYXNrUGFydFdoZW5jb25zdHJhaW50XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSB3aGVuIGVudGl0eSBvZiBhIHRhc2sgcGFydC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gd2hlbkVudGl0eSBXaGVuIGVudGl0eSB0byBoYW5kbGUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZlZCBvbmNlIHRoZSB3aGVuIGVudGl0eSBpcyBjaGVja2VkLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgaGFuZGxlVGFza1BhcnRXaGVuKHdoZW5FbnRpdHk6IElUYXNrUGFydFdoZW5Db25zdHJhaW50KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSB3aGVuRW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHdoZW5FbnRpdHkuY29uc3RyYWludFR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFRBU0tfQ09OU1RSQUlOVF9UWVBFUy5TVEFSVDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5oYW5kbGVUYXNrUGFydFdoZW5QYXJ0QmVnaW5zKHdoZW5FbnRpdHkgYXMgVGFza1BhcnRCZWdpbkNvbnN0cmFpbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNvbHZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUQVNLX0NPTlNUUkFJTlRfVFlQRVMuRU5EOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmhhbmRsZVRhc2tQYXJ0V2hlblBhcnRFbmRzKHdoZW5FbnRpdHkgYXMgVGFza1BhcnRFbmRDb25zdHJhaW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzb2x2ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVEFTS19DT05TVFJBSU5UX1RZUEVTLkdST1VQOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmhhbmRsZVRhc2tQYXJ0V2hlblBhcnRHcm91cCh3aGVuRW50aXR5IGFzIFRhc2tHcm91cENvbnN0cmFpbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNvbHZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUQVNLX0NPTlNUUkFJTlRfVFlQRVMuV0FJVF9GT1I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuaGFuZGxlVGFza1BhcnRXaGVuV2FpdEZvcih3aGVuRW50aXR5IGFzIFRhc2tUaW1lQ29uc3RyYWludClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc29sdmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgd2hlbiBlbnRpdHkgdHlwZS4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgd2hlbiBlbnRpdHkgKFRhc2tQYXJ0QmVnaW5Db25zdHJhaW50KSBvZiBhIHRhc2sgcGFydC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gd2hlbkVudGl0eSBXaGVuIGVudGl0eSB0byBoYW5kbGUuXHJcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmVkIG9uY2UgdGhlIHdoZW4gZW50aXR5IGlzIGNoZWNrZWQuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBoYW5kbGVUYXNrUGFydFdoZW5QYXJ0QmVnaW5zKHdoZW5FbnRpdHk6IFRhc2tQYXJ0QmVnaW5Db25zdHJhaW50KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBjb25zdCBldmVudEhhbmRsZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRoYXQucGFydFN0YXJ0TWFuYWdlci51bnN1YnNjcmliZSh3aGVuRW50aXR5LmFsaWFzLCB0b2tlbik7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB3aGVuRW50aXR5LmFmdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmhhbmRsZVRhc2tQYXJ0V2hlbih3aGVuRW50aXR5LmFmdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNvbHZlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgdG9rZW46IG51bWJlciA9IHRoYXQucGFydFN0YXJ0TWFuYWdlci5zdWJzY3JpYmUod2hlbkVudGl0eS5hbGlhcywgZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgdGhlIHdoZW4gZW50aXR5IChUYXNrUGFydEVuZENvbnN0cmFpbnQpIG9mIGEgdGFzayBwYXJ0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB3aGVuRW50aXR5IFdoZW4gZW50aXR5IHRvIGhhbmRsZS5cclxuICAgICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2ZWQgb25jZSB0aGUgd2hlbiBlbnRpdHkgaXMgY2hlY2tlZC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGhhbmRsZVRhc2tQYXJ0V2hlblBhcnRFbmRzKHdoZW5FbnRpdHk6IFRhc2tQYXJ0RW5kQ29uc3RyYWludCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgY29uc3QgZXZlbnRIYW5kbGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB0aGF0LnBhcnRFbmRNYW5hZ2VyLnVuc3Vic2NyaWJlKHdoZW5FbnRpdHkuYWxpYXMsIHRva2VuKTtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IHdoZW5FbnRpdHkuYWZ0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuaGFuZGxlVGFza1BhcnRXaGVuKHdoZW5FbnRpdHkuYWZ0ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc29sdmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCB0b2tlbjogbnVtYmVyID0gdGhhdC5wYXJ0RW5kTWFuYWdlci5zdWJzY3JpYmUod2hlbkVudGl0eS5hbGlhcywgZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgdGhlIHdoZW4gZW50aXR5IChUYXNrR3JvdXBDb25zdHJhaW50KSBvZiBhIHRhc2sgcGFydC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gd2hlbkVudGl0eSBXaGVuIGVudGl0eSB0byBoYW5kbGUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZlZCBvbmNlIHRoZSB3aGVuIGVudGl0eSBpcyBjaGVja2VkLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgaGFuZGxlVGFza1BhcnRXaGVuUGFydEdyb3VwKHdoZW5FbnRpdHk6IFRhc2tHcm91cENvbnN0cmFpbnQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkUHJvbWlzZXM6IEFycmF5PFByb21pc2U8dm9pZD4+ID0gbmV3IEFycmF5KHdoZW5FbnRpdHkuY29uc3RyYWludHMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2hlbkVudGl0eS5jb25zdHJhaW50cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgY2hpbGRQcm9taXNlc1tpXSA9IG5ldyBQcm9taXNlPHZvaWQ+KGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuaGFuZGxlVGFza1BhcnRXaGVuKHdoZW5FbnRpdHkuY29uc3RyYWludHNbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc29sdmUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChUYXNrUGFydFdoZW5PcGVyYXRvci5BTkQgPT09IHdoZW5FbnRpdHkub3BlcmF0b3IpIHtcclxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKGNoaWxkUHJvbWlzZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChUYXNrUGFydFdoZW5PcGVyYXRvci5PUiA9PT0gd2hlbkVudGl0eS5vcGVyYXRvcikge1xyXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5yYWNlKGNoaWxkUHJvbWlzZXMpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgnVW5leHBlY3RlZCBvcGVyYXRvci4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgd2hlbiBlbnRpdHkgKFRhc2tUaW1lQ29uc3RyYWludCkgb2YgYSB0YXNrIHBhcnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHdoZW5FbnRpdHkgV2hlbiBlbnRpdHkgdG8gaGFuZGxlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2ZWQgb25jZSB0aGUgd2hlbiBlbnRpdHkgaXMgY2hlY2tlZC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGhhbmRsZVRhc2tQYXJ0V2hlbldhaXRGb3Iod2hlbkVudGl0eTogVGFza1RpbWVDb25zdHJhaW50KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHdoZW5FbnRpdHkuYWZ0ZXIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5oYW5kbGVUYXNrUGFydFdoZW4od2hlbkVudGl0eS5hZnRlcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzb2x2ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHdoZW5FbnRpdHkubWlsbGlzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxufVxyXG4iLCIvKipcclxuICogUHJlZml4ZXMgdXNlZCB0byBnYW5lcmF0ZSBhbGlhcyBmb3IgZXZlbnRzIG92ZXIgdGFzayBwYXJ0cy5cclxuICovXHJcbmV4cG9ydCBjb25zdCBUQVNLX1BBUlRfV0hFTl9FVkVOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIFByZWZpeCBmb3IgYW55IGV2ZW50IHJhaXNlZCBvbmNlIGEgdGFzayBwYXJ0IGlzIGVuZGVkLlxyXG4gICAgICovXHJcbiAgICBFTkQ6ICdwYXJ0LmVuZCcsXHJcbiAgICAvKipcclxuICAgICAqIFByZWZpeCBmb3IgYW55IGV2ZW50IHJhaXNlZCBvbmNlIGEgdGFzayBwYXJ0IGlzIHN0YXJ0ZWQuXHJcbiAgICAgKi9cclxuICAgIFNUQVJUOiAncGFydC5zdGFydCcsXHJcbn07XHJcbiIsIi8qKlxyXG4gKiBMb2dpY2FsIG9wZXJhdG9yIHRvIGFwcGx5LlxyXG4gKi9cclxuZXhwb3J0IGVudW0gVGFza1BhcnRXaGVuT3BlcmF0b3Ige1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbmQgb3BlcmF0b3IuXHJcbiAgICAgKi9cclxuICAgIEFORCxcclxuICAgIC8qKlxyXG4gICAgICogT3Igb3BlcmF0b3IuXHJcbiAgICAgKi9cclxuICAgIE9SLFxyXG59XHJcbiIsImltcG9ydCB7IFNpbmdsZUFuaW1hdGlvbkVuZ2luZSB9IGZyb20gJy4uLy4uL2FuaW1hdGlvbi9hbmltYXRpb24tZW5naW5lJztcclxuaW1wb3J0IHsgSUFuaW1hdGlvbkZsb3dQYXJ0IH0gZnJvbSAnLi4vLi4vYW5pbWF0aW9uL2FuaW1hdGlvbi1mbG93LXBhcnQnO1xyXG5pbXBvcnQgeyBJVGFza0Zsb3cgfSBmcm9tICcuLi8uLi90YXNrL2Zsb3cvdGFzay1mbG93JztcclxuaW1wb3J0IHsgSVRhc2tGbG93UGFydEFyZ3MgfSBmcm9tICcuLi8uLi90YXNrL2Zsb3cvdGFzay1mbG93LXBhcnQtZXZlbnQtYXJncyc7XHJcbmltcG9ydCB7IFRhc2tQYXJ0QmVnaW5Db25zdHJhaW50IH0gZnJvbSAnLi4vLi4vdGFzay9mbG93L3Rhc2stcGFydC1iZWdpbi1jb25zdHJhaW50JztcclxuaW1wb3J0IHsgVGFza1BhcnRFbmRDb25zdHJhaW50IH0gZnJvbSAnLi4vLi4vdGFzay9mbG93L3Rhc2stcGFydC1lbmQtY29uc3RyYWludCc7XHJcbmltcG9ydCB7IFRhc2tUaW1lQ29uc3RyYWludCB9IGZyb20gJy4uLy4uL3Rhc2svZmxvdy90YXNrLXBhcnQtdGltZS1jb25zdHJhaW50JztcclxuaW1wb3J0IHsgSU9wZXJhdGlvbk1hbmFnZXJBY2Nlc3MgfSBmcm9tICcuLi8uLi90YXNrL29wZXJhdGlvbi9vcGVyYXRpb24tbWFuYWdlci1hY2Nlc3MnO1xyXG5pbXBvcnQgeyBJVGVzdCB9IGZyb20gJy4uL0lUZXN0JztcclxuXHJcbmV4cG9ydCBjbGFzcyBBbmltYXRpb25FbmdpbmVUZXN0cyBpbXBsZW1lbnRzIElUZXN0IHtcclxuXHJcbiAgICAvLyNyZWdpb24gUHVibGljXHJcblxyXG4gICAgcHVibGljIHBlcmZvcm1UZXN0cygpOiB2b2lkIHtcclxuICAgICAgICBkZXNjcmliZSgnQW5pbWF0aW9uIEVuZ2luZSBUZXN0cycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pdE11c3RCZUluaXRpYWxpemFibGUoKTtcclxuICAgICAgICAgICAgdGhpcy5pdE11c3RCZUFibGVUb1BlcmZvcm1BU2ltcGxlQW5pbWF0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXRNdXN0QmVBYmxlVG9QZXJmb3JtTXVsdGlwbGVBbmltYXRpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXRNdXN0QmVBYmxlVG9QZXJmb3JtQW5pbWF0aW9uc1doZW5BbmltYXRpb25FbmRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXRNdXN0QmVBYmxlVG9QZXJmb3JtQW5pbWF0aW9uc1doZW5BbmltYXRpb25TdGFydHMoKTtcclxuICAgICAgICAgICAgdGhpcy5pdE11c3RCZUFibGVUb1BlcmZvcm1BbmltYXRpb25BZnRlck1pbGxpcygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBQcm90ZWN0ZWRcclxuXHJcbiAgICBwcm90ZWN0ZWQgY2hlY2tBbmltYXRpb248XHJcbiAgICAgICAgVEFyZ3MgZXh0ZW5kcyBJVGFza0Zsb3dQYXJ0QXJnczxUUGFydD4sXHJcbiAgICAgICAgVFBhcnQgZXh0ZW5kcyBJQW5pbWF0aW9uRmxvd1BhcnQsXHJcbiAgICA+KFxyXG4gICAgICAgIGFkZGl0aW9uYWxPcGVyYXRpb25zOiAoZXZlbnRBcmdzOiBUQXJncykgPT4gdm9pZCxcclxuICAgICAgICBvcGVyYXRpb25NYW5hZ2VyQWNjZXNzOiBJT3BlcmF0aW9uTWFuYWdlckFjY2VzczxUQXJncz4sXHJcbiAgICAgICAgcGFydDogVFBhcnQsXHJcbiAgICApOiAoKSA9PiBib29sZWFuIHtcclxuICAgICAgICB2YXIgZXZlbnRSYWlzZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICBjb25zdCBldmVudEhhbmRsZXIgPSBmdW5jdGlvbihldmVudEFyZ3M6IFRBcmdzKSB7XHJcbiAgICAgICAgICAgIGV2ZW50UmFpc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZXZlbnRBcmdzLnBhcnQuc3R5bGVzLmZvckVhY2goZnVuY3Rpb24oc3R5bGU6IHN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHBhcnQuc3R5bGVzKS50b0NvbnRhaW4oc3R5bGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZXhwZWN0KG9wZXJhdGlvbk1hbmFnZXJBY2Nlc3MudW5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICBwYXJ0LmFsaWFzLFxyXG4gICAgICAgICAgICAgICAgaGFuZGxlclRva2VuLFxyXG4gICAgICAgICAgICApKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSBhZGRpdGlvbmFsT3BlcmF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbE9wZXJhdGlvbnMoZXZlbnRBcmdzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgaGFuZGxlclRva2VuOiBudW1iZXIgPVxyXG4gICAgICAgICAgICBvcGVyYXRpb25NYW5hZ2VyQWNjZXNzLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgIHBhcnQuYWxpYXMsXHJcbiAgICAgICAgICAgICAgICBldmVudEhhbmRsZXIsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgeyByZXR1cm4gZXZlbnRSYWlzZWQ7IH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdlbmVyYXRlRGl2RWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgciA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMjU2KTtcclxuICAgICAgICBjb25zdCBnID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAyNTYpO1xyXG4gICAgICAgIGNvbnN0IGIgPSBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDI1Nik7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdyZ2IoJyArIHIudG9TdHJpbmcoKSArICcsICcgKyBnLnRvU3RyaW5nKCkgKyAnLCAnICsgYi50b1N0cmluZygpICsgJyknO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodDogbnVtYmVyID0gMTAwO1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwcml2YXRlIGl0TXVzdEJlSW5pdGlhbGl6YWJsZSgpOiB2b2lkIHtcclxuICAgICAgICBpdCgnbXVzdEJlSW5pdGlhbGl6YWJsZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYW5pbWF0aW9uRW5naW5lOiBTaW5nbGVBbmltYXRpb25FbmdpbmUgPSBuZXcgU2luZ2xlQW5pbWF0aW9uRW5naW5lKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChhbmltYXRpb25FbmdpbmUpLm5vdC50b0JlTnVsbCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXRNdXN0QmVBYmxlVG9QZXJmb3JtQVNpbXBsZUFuaW1hdGlvbigpIHtcclxuICAgICAgICBpdCgnbXVzdEJlQWJsZVRvUGVyZm9ybUFTaW1wbGVBbmltYXRpb24nLCAoZG9uZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5nZW5lcmF0ZURpdkVsZW1lbnQoKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICAgICAgY29uc3QgYW5pbWF0aW9uRW5naW5lOiBTaW5nbGVBbmltYXRpb25FbmdpbmUgPSBuZXcgU2luZ2xlQW5pbWF0aW9uRW5naW5lKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhc2tGbG93OiBJVGFza0Zsb3c8SUFuaW1hdGlvbkZsb3dQYXJ0PiA9IHtcclxuICAgICAgICAgICAgICAgIHBhcnRzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlhczogJ2VsZW0nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogWyBlbGVtZW50IF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlczogWyAnc29yYS1mYWRlLW91dC1hbmltYXRpb24nIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZW46IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRTdGFydEFjY2VzcyA9IGFuaW1hdGlvbkVuZ2luZS5nZXRQYXJ0U3RhcnRMaXN0ZW5lckFjY2VzcygpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0RW5kQWNjZXNzID0gYW5pbWF0aW9uRW5naW5lLmdldFBhcnRFbmRMaXN0ZW5lckFjY2VzcygpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0RW5kVG9rZW4gPSB0aGlzLmNoZWNrQW5pbWF0aW9uKFxyXG4gICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgIHBhcnRFbmRBY2Nlc3MsXHJcbiAgICAgICAgICAgICAgICB0YXNrRmxvdy5wYXJ0c1swXSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgcGFydFN0YXJ0VG9rZW4gPSB0aGlzLmNoZWNrQW5pbWF0aW9uKFxyXG4gICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgIHBhcnRTdGFydEFjY2VzcyxcclxuICAgICAgICAgICAgICAgIHRhc2tGbG93LnBhcnRzWzBdLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCBwcm9taXNlczogQXJyYXk8UHJvbWlzZTx2b2lkPj4gPSBhbmltYXRpb25FbmdpbmUuaGFuZGxlKHRhc2tGbG93KTtcclxuICAgICAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocGFydEVuZFRva2VuKCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocGFydFN0YXJ0VG9rZW4oKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgZG9uZS5mYWlsKGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXRNdXN0QmVBYmxlVG9QZXJmb3JtTXVsdGlwbGVBbmltYXRpb25zKCkge1xyXG4gICAgICAgIGl0KCdtdXN0QmVBYmxlVG9QZXJmb3JtTXVsdGlwbGVBbmltYXRpb25zJywgKGRvbmUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudDEgPSB0aGlzLmdlbmVyYXRlRGl2RWxlbWVudCgpO1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50MiA9IHRoaXMuZ2VuZXJhdGVEaXZFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbWVudDEpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQyKTtcclxuICAgICAgICAgICAgY29uc3QgYW5pbWF0aW9uRW5naW5lOiBTaW5nbGVBbmltYXRpb25FbmdpbmUgPSBuZXcgU2luZ2xlQW5pbWF0aW9uRW5naW5lKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhc2tGbG93OiBJVGFza0Zsb3c8SUFuaW1hdGlvbkZsb3dQYXJ0PiA9IHtcclxuICAgICAgICAgICAgICAgIHBhcnRzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlhczogJ2VsZW0wJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IFsgZWxlbWVudDEgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiBbICdzb3JhLWZhZGUtb3V0LWFuaW1hdGlvbicgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hlbjogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpYXM6ICdlbGVtMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBbIGVsZW1lbnQyIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlczogWyAnc29yYS1mYWRlLW91dC1hbmltYXRpb24nIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZW46IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRTdGFydEFjY2VzcyA9IGFuaW1hdGlvbkVuZ2luZS5nZXRQYXJ0U3RhcnRMaXN0ZW5lckFjY2VzcygpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0RW5kQWNjZXNzID0gYW5pbWF0aW9uRW5naW5lLmdldFBhcnRFbmRMaXN0ZW5lckFjY2VzcygpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0RW5kVG9rZW4xID0gdGhpcy5jaGVja0FuaW1hdGlvbihcclxuICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICBwYXJ0RW5kQWNjZXNzLFxyXG4gICAgICAgICAgICAgICAgdGFza0Zsb3cucGFydHNbMF0sXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRFbmRUb2tlbjIgPSB0aGlzLmNoZWNrQW5pbWF0aW9uKFxyXG4gICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgIHBhcnRFbmRBY2Nlc3MsXHJcbiAgICAgICAgICAgICAgICB0YXNrRmxvdy5wYXJ0c1sxXSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgcGFydFN0YXJ0VG9rZW4xID0gdGhpcy5jaGVja0FuaW1hdGlvbihcclxuICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICBwYXJ0U3RhcnRBY2Nlc3MsXHJcbiAgICAgICAgICAgICAgICB0YXNrRmxvdy5wYXJ0c1swXSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgcGFydFN0YXJ0VG9rZW4yID0gdGhpcy5jaGVja0FuaW1hdGlvbihcclxuICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICBwYXJ0U3RhcnRBY2Nlc3MsXHJcbiAgICAgICAgICAgICAgICB0YXNrRmxvdy5wYXJ0c1sxXSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXM6IEFycmF5PFByb21pc2U8dm9pZD4+ID0gYW5pbWF0aW9uRW5naW5lLmhhbmRsZSh0YXNrRmxvdyk7XHJcbiAgICAgICAgICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHBhcnRFbmRUb2tlbjEoKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChwYXJ0RW5kVG9rZW4yKCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocGFydFN0YXJ0VG9rZW4xKCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocGFydFN0YXJ0VG9rZW4yKCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsZW1lbnQxKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWxlbWVudDIpO1xyXG4gICAgICAgICAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgIGRvbmUuZmFpbChlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGl0TXVzdEJlQWJsZVRvUGVyZm9ybUFuaW1hdGlvbnNXaGVuQW5pbWF0aW9uRW5kcygpIHtcclxuICAgICAgICBpdCgnbXVzdEJlQWJsZVRvUGVyZm9ybUFuaW1hdGlvbnNXaGVuQW5pbWF0aW9uRW5kcycsIChkb25lKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQwID0gdGhpcy5nZW5lcmF0ZURpdkVsZW1lbnQoKTtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudDEgPSB0aGlzLmdlbmVyYXRlRGl2RWxlbWVudCgpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQwKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50MSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuaW1hdGlvbkVuZ2luZTogU2luZ2xlQW5pbWF0aW9uRW5naW5lID0gbmV3IFNpbmdsZUFuaW1hdGlvbkVuZ2luZSgpO1xyXG4gICAgICAgICAgICBjb25zdCB0YXNrRmxvdzogSVRhc2tGbG93PElBbmltYXRpb25GbG93UGFydD4gPSB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0czogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpYXM6ICdlbGVtMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBbIGVsZW1lbnQwIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlczogWyAnc29yYS1mYWRlLW91dC1hbmltYXRpb24nIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZW46IG5ldyBUYXNrUGFydEVuZENvbnN0cmFpbnQobnVsbCwgJ2VsZW0xJyksXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWFzOiAnZWxlbTEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogWyBlbGVtZW50MSBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXM6IFsgJ3NvcmEtZmFkZS1vdXQtYW5pbWF0aW9uJyBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVuOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0U3RhcnRBY2Nlc3MgPSBhbmltYXRpb25FbmdpbmUuZ2V0UGFydFN0YXJ0TGlzdGVuZXJBY2Nlc3MoKTtcclxuICAgICAgICAgICAgY29uc3QgcGFydEVuZEFjY2VzcyA9IGFuaW1hdGlvbkVuZ2luZS5nZXRQYXJ0RW5kTGlzdGVuZXJBY2Nlc3MoKTtcclxuICAgICAgICAgICAgY29uc3QgcGFydEVuZFRva2VuMCA9IHRoaXMuY2hlY2tBbmltYXRpb24oXHJcbiAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgcGFydEVuZEFjY2VzcyxcclxuICAgICAgICAgICAgICAgIHRhc2tGbG93LnBhcnRzWzBdLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0RW5kVG9rZW4xID0gdGhpcy5jaGVja0FuaW1hdGlvbihcclxuICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICBwYXJ0RW5kQWNjZXNzLFxyXG4gICAgICAgICAgICAgICAgdGFza0Zsb3cucGFydHNbMV0sXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRTdGFydFRva2VuMCA9IHRoaXMuY2hlY2tBbmltYXRpb24oXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihldmVudEFyZ3MpIHsgZXhwZWN0KHBhcnRFbmRUb2tlbjEoKSkudG9CZSh0cnVlKTsgfSxcclxuICAgICAgICAgICAgICAgIHBhcnRTdGFydEFjY2VzcyxcclxuICAgICAgICAgICAgICAgIHRhc2tGbG93LnBhcnRzWzBdLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0U3RhcnRUb2tlbjEgPSB0aGlzLmNoZWNrQW5pbWF0aW9uKFxyXG4gICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgIHBhcnRTdGFydEFjY2VzcyxcclxuICAgICAgICAgICAgICAgIHRhc2tGbG93LnBhcnRzWzFdLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCBwcm9taXNlczogQXJyYXk8UHJvbWlzZTx2b2lkPj4gPSBhbmltYXRpb25FbmdpbmUuaGFuZGxlKHRhc2tGbG93KTtcclxuICAgICAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocGFydEVuZFRva2VuMCgpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHBhcnRFbmRUb2tlbjEoKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChwYXJ0U3RhcnRUb2tlbjAoKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChwYXJ0U3RhcnRUb2tlbjEoKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWxlbWVudDApO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGVtZW50MSk7XHJcbiAgICAgICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgZG9uZS5mYWlsKGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXRNdXN0QmVBYmxlVG9QZXJmb3JtQW5pbWF0aW9uc1doZW5BbmltYXRpb25TdGFydHMoKSB7XHJcbiAgICAgICAgaXQoJ211c3RCZUFibGVUb1BlcmZvcm1BbmltYXRpb25zV2hlbkFuaW1hdGlvblN0YXJ0cycsIChkb25lKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQwID0gdGhpcy5nZW5lcmF0ZURpdkVsZW1lbnQoKTtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudDEgPSB0aGlzLmdlbmVyYXRlRGl2RWxlbWVudCgpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQwKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50MSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuaW1hdGlvbkVuZ2luZTogU2luZ2xlQW5pbWF0aW9uRW5naW5lID0gbmV3IFNpbmdsZUFuaW1hdGlvbkVuZ2luZSgpO1xyXG4gICAgICAgICAgICBjb25zdCB0YXNrRmxvdzogSVRhc2tGbG93PElBbmltYXRpb25GbG93UGFydD4gPSB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0czogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpYXM6ICdlbGVtMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBbIGVsZW1lbnQwIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlczogWyAnc29yYS1mYWRlLW91dC1hbmltYXRpb24nIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZW46IG5ldyBUYXNrUGFydEJlZ2luQ29uc3RyYWludChudWxsLCAnZWxlbTEnKSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpYXM6ICdlbGVtMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBbIGVsZW1lbnQxIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlczogWyAnc29yYS1mYWRlLW91dC1hbmltYXRpb24nIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZW46IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRTdGFydEFjY2VzcyA9IGFuaW1hdGlvbkVuZ2luZS5nZXRQYXJ0U3RhcnRMaXN0ZW5lckFjY2VzcygpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0RW5kQWNjZXNzID0gYW5pbWF0aW9uRW5naW5lLmdldFBhcnRFbmRMaXN0ZW5lckFjY2VzcygpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0RW5kVG9rZW4wID0gdGhpcy5jaGVja0FuaW1hdGlvbihcclxuICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICBwYXJ0RW5kQWNjZXNzLFxyXG4gICAgICAgICAgICAgICAgdGFza0Zsb3cucGFydHNbMF0sXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRFbmRUb2tlbjEgPSB0aGlzLmNoZWNrQW5pbWF0aW9uKFxyXG4gICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgIHBhcnRFbmRBY2Nlc3MsXHJcbiAgICAgICAgICAgICAgICB0YXNrRmxvdy5wYXJ0c1sxXSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgcGFydFN0YXJ0VG9rZW4wID0gdGhpcy5jaGVja0FuaW1hdGlvbihcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGV2ZW50QXJncykgeyBleHBlY3QocGFydFN0YXJ0VG9rZW4xKCkpLnRvQmUodHJ1ZSk7IH0sXHJcbiAgICAgICAgICAgICAgICBwYXJ0U3RhcnRBY2Nlc3MsXHJcbiAgICAgICAgICAgICAgICB0YXNrRmxvdy5wYXJ0c1swXSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgcGFydFN0YXJ0VG9rZW4xID0gdGhpcy5jaGVja0FuaW1hdGlvbihcclxuICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICBwYXJ0U3RhcnRBY2Nlc3MsXHJcbiAgICAgICAgICAgICAgICB0YXNrRmxvdy5wYXJ0c1sxXSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXM6IEFycmF5PFByb21pc2U8dm9pZD4+ID0gYW5pbWF0aW9uRW5naW5lLmhhbmRsZSh0YXNrRmxvdyk7XHJcbiAgICAgICAgICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHBhcnRFbmRUb2tlbjAoKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChwYXJ0RW5kVG9rZW4xKCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocGFydFN0YXJ0VG9rZW4wKCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocGFydFN0YXJ0VG9rZW4xKCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsZW1lbnQwKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWxlbWVudDEpO1xyXG4gICAgICAgICAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgIGRvbmUuZmFpbChlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGl0TXVzdEJlQWJsZVRvUGVyZm9ybUFuaW1hdGlvbkFmdGVyTWlsbGlzKCkge1xyXG4gICAgICAgIGl0KCdtdXN0QmVBYmxlVG9QZXJmb3JtQW5pbWF0aW9uQWZ0ZXJNaWxsaXMnLCAoZG9uZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5nZW5lcmF0ZURpdkVsZW1lbnQoKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICAgICAgY29uc3QgYW5pbWF0aW9uRW5naW5lOiBTaW5nbGVBbmltYXRpb25FbmdpbmUgPSBuZXcgU2luZ2xlQW5pbWF0aW9uRW5naW5lKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVUb1dhaXQgPSAxMDAwO1xyXG4gICAgICAgICAgICBjb25zdCB0YXNrRmxvdzogSVRhc2tGbG93PElBbmltYXRpb25GbG93UGFydD4gPSB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0czogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpYXM6ICdlbGVtJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IFsgZWxlbWVudCBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXM6IFsgJ3NvcmEtZmFkZS1vdXQtYW5pbWF0aW9uJyBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVuOiBuZXcgVGFza1RpbWVDb25zdHJhaW50KG51bGwsIHRpbWVUb1dhaXQpLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0U3RhcnRBY2Nlc3MgPSBhbmltYXRpb25FbmdpbmUuZ2V0UGFydFN0YXJ0TGlzdGVuZXJBY2Nlc3MoKTtcclxuICAgICAgICAgICAgY29uc3QgcGFydEVuZEFjY2VzcyA9IGFuaW1hdGlvbkVuZ2luZS5nZXRQYXJ0RW5kTGlzdGVuZXJBY2Nlc3MoKTtcclxuICAgICAgICAgICAgY29uc3QgcGFydEVuZFRva2VuID0gdGhpcy5jaGVja0FuaW1hdGlvbihcclxuICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICBwYXJ0RW5kQWNjZXNzLFxyXG4gICAgICAgICAgICAgICAgdGFza0Zsb3cucGFydHNbMF0sXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRTdGFydFRva2VuID0gdGhpcy5jaGVja0FuaW1hdGlvbihcclxuICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICBwYXJ0U3RhcnRBY2Nlc3MsXHJcbiAgICAgICAgICAgICAgICB0YXNrRmxvdy5wYXJ0c1swXSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXM6IEFycmF5PFByb21pc2U8dm9pZD4+ID0gYW5pbWF0aW9uRW5naW5lLmhhbmRsZSh0YXNrRmxvdyk7XHJcbiAgICAgICAgICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gbm93LmdldFRpbWUoKSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCh0aW1lVG9XYWl0KTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChwYXJ0RW5kVG9rZW4oKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChwYXJ0U3RhcnRUb2tlbigpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBkb25lLmZhaWwoZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFuaW1hdGlvbkZsb3dQYXJ0IH0gZnJvbSAnLi4vLi4vYW5pbWF0aW9uL2FuaW1hdGlvbi1mbG93LXBhcnQnO1xyXG5pbXBvcnQgeyBDQVJPVVNFTF9TVFlMRVMgfSBmcm9tICcuLi8uLi9jYXJvdXNlbC9jYXJvdXNlbC1iYXNlJztcclxuaW1wb3J0IHsgSUNhcm91c2VsQW5pbWF0aW9uIH0gZnJvbSAnLi4vLi4vY2Fyb3VzZWwvc2luZ2xlLXNsaWRlL2Nhcm91c2VsLWFuaW1hdGlvbic7XHJcbmltcG9ydCB7IElTaW5nbGVTbGlkZUNhcm91c2VsR29Ub0FuaW1hdGlvblN0YXR1cyB9IGZyb20gJy4uLy4uL2Nhcm91c2VsL3NpbmdsZS1zbGlkZS9nby10by1hbmltYXRpb24tc3RhdHVzJztcclxuaW1wb3J0IHtcclxuICAgIFNJTkdMRV9TTElERV9DQVJPVVNFTF9BQ1RJT05TLFxyXG4gICAgU0lOR0xFX1NMSURFX0NBUk9VU0VMX1BBUlRTX0FMSUFTRVMsXHJcbiAgICBTSU5HTEVfU0xJREVfQ0FST1VTRUxfU1RZTEVTLFxyXG4gICAgU2luZ2xlU2xpZGVDYXJvdXNlbCxcclxufSBmcm9tICcuLi8uLi9jYXJvdXNlbC9zaW5nbGUtc2xpZGUvc2luZ2xlLXNsaWRlLWNhcm91c2VsJztcclxuaW1wb3J0IHsgSVRhc2tGbG93UGFydEFyZ3MgfSBmcm9tICcuLi8uLi90YXNrL2Zsb3cvdGFzay1mbG93LXBhcnQtZXZlbnQtYXJncyc7XHJcbmltcG9ydCB7IElPcGVyYXRpb25NYW5hZ2VyQWNjZXNzIH0gZnJvbSAnLi4vLi4vdGFzay9vcGVyYXRpb24vb3BlcmF0aW9uLW1hbmFnZXItYWNjZXNzJztcclxuaW1wb3J0IHsgSVRlc3QgfSBmcm9tICcuLi9JVGVzdCc7XHJcblxyXG5pbnRlcmZhY2UgSUdvVG9BbmRDaGVja0RhdGEge1xyXG4gICAgZ29BY3Rpb25TdGF0dXM6IElTaW5nbGVTbGlkZUNhcm91c2VsR29Ub0FuaW1hdGlvblN0YXR1cztcclxuICAgIG5ld0VsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgb2xkRWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTaW5nbGVTbGlkZUNhcm91c2VsVGVzdHMgaW1wbGVtZW50cyBJVGVzdCB7XHJcblxyXG4gICAgcHJvdGVjdGVkIGxvbmdUaW1lTGltaXQ6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5sb25nVGltZUxpbWl0ID0gMTAwMDAwMDAwO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwZXJmb3JtVGVzdHMoKTogdm9pZCB7XHJcbiAgICAgICAgZGVzY3JpYmUoJ1NpbmdsZVNsaWRlQ2Fyb3VzZWwgVGVzdHMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaXRNdXN0QmVJbml0aWFsaXphYmxlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXRNdXN0QmVBYmxlVG9DYW5jZWxBbmltYXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5pdE11c3RCZUFibGVUb0dvVG9TbGlkZXMoKTtcclxuICAgICAgICAgICAgdGhpcy5pdE11c3RCZUFibGVUb0dvVG9TbGlkZXNXaGlsZUFkZGluZ0VsZW1lbnRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXRNdXN0QmVBYmxlVG9Hb1RvU2xpZGVzV2hpbGVSZW1vdmluZ0FuaW1hdGlvbkVsZW1lbnRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXRNdXN0QmVBYmxlVG9Hb1RvU2xpZGVzV2hpbGVSZW1vdmluZ090aGVyRWxlbWVudHMoKTtcclxuICAgICAgICAgICAgdGhpcy5pdE11c3RCZUFibGVUb0hhbmRsZUNoaWxkcmVuQW5pbWF0aW9ucygpO1xyXG4gICAgICAgICAgICB0aGlzLml0TXVzdEJlQWJsZVRvUGF1c2VBbmRSZXN1bWVBbmltYXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5pdE11c3RCZUFibGVUb1J1bkNvbXBsZXhBbmltYXRpb25zKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdlbmVyYXRlQmFzaWNDYXJvdXNlbCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgZGl2RWxlbWVudDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkaXZFbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0FST1VTRUxfU1RZTEVTLkNBUk9VU0VMKTtcclxuICAgICAgICBkaXZFbGVtZW50LmlubmVySFRNTCA9XHJcbmA8ZGl2IGNsYXNzPVwic29yYS13cmFwcGVyXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwic29yYS1zbGlkZVwiPlxyXG4gICAgICAgIDxzcGFuPkNvbnRlbnQgMTwvc3Bhbj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cInNvcmEtc2xpZGVcIj5cclxuICAgICAgICA8c3Bhbj5Db250ZW50IDI8L3NwYW4+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJzb3JhLXNsaWRlXCI+XHJcbiAgICAgICAgPHNwYW4+Q29udGVudCAzPC9zcGFuPlxyXG4gICAgPC9kaXY+XHJcbjwvZGl2PmBcclxuICAgICAgICA7XHJcblxyXG4gICAgICAgIHJldHVybiBkaXZFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGVyZm9ybUdvQW5kQ2hlY2soXHJcbiAgICAgICAgYWN0aW9uOiBzdHJpbmcsXHJcbiAgICAgICAgY2Fyb3VzZWw6IFNpbmdsZVNsaWRlQ2Fyb3VzZWwsXHJcbiAgICAgICAgZW50ZXJBbmltYXRpb246IElDYXJvdXNlbEFuaW1hdGlvbixcclxuICAgICAgICBsZWF2ZUFuaW1hdGlvbjogSUNhcm91c2VsQW5pbWF0aW9uLFxyXG4gICAgICAgIHNob3VsZENoZWNrOiBib29sZWFuID0gdHJ1ZSxcclxuICAgICk6IElHb1RvQW5kQ2hlY2tEYXRhIHtcclxuXHJcbiAgICAgICAgZXhwZWN0KFtcclxuICAgICAgICAgICAgU0lOR0xFX1NMSURFX0NBUk9VU0VMX0FDVElPTlMuR09fVE9fTkVYVCxcclxuICAgICAgICAgICAgU0lOR0xFX1NMSURFX0NBUk9VU0VMX0FDVElPTlMuR09fVE9fUFJFVklPVVMsXHJcbiAgICAgICAgXSkudG9Db250YWluKGFjdGlvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRBY3RpdmVFbGVtZW50ID0gY2Fyb3VzZWwuZ2V0QWN0aXZlRWxlbWVudCgpO1xyXG4gICAgICAgIGNvbnN0IGFjdGl2ZUluZGV4ID0gY2Fyb3VzZWwuZ2V0QWN0aXZlSW5kZXgoKTtcclxuICAgICAgICBjb25zdCBpbmRleGVzID0gY2Fyb3VzZWwuZ2V0RWxlbWVudHNNYW5hZ2VyKCkuZ2V0TGVuZ3RoKCk7XHJcbiAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gZnVuY3Rpb24oYWN0aW9uKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgaWYgKFNJTkdMRV9TTElERV9DQVJPVVNFTF9BQ1RJT05TLkdPX1RPX05FWFQgPT09IGFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChhY3RpdmVJbmRleCArIDEpICUgaW5kZXhlcztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChTSU5HTEVfU0xJREVfQ0FST1VTRUxfQUNUSU9OUy5HT19UT19QUkVWSU9VUyA9PT0gYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKChhY3RpdmVJbmRleCAtIDEpICsgaW5kZXhlcykgJSBpbmRleGVzO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGFjdGlvbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAoYWN0aW9uKTtcclxuXHJcbiAgICAgICAgY29uc3QgbmV4dEVsZW1lbnQgPSBjYXJvdXNlbC5nZXRFbGVtZW50c01hbmFnZXIoKS5nZXRDb2xsZWN0aW9uKClbbmV4dEluZGV4XTtcclxuXHJcbiAgICAgICAgY29uc3QgZ29BY3Rpb25TdGF0dXMgPSBjYXJvdXNlbC5oYW5kbGUoXHJcbiAgICAgICAgICAgIGFjdGlvbixcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW50ZXJBbmltYXRpb246IGVudGVyQW5pbWF0aW9uLFxyXG4gICAgICAgICAgICAgICAgbGVhdmVBbmltYXRpb246IGxlYXZlQW5pbWF0aW9uLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNoZWNrRnVuY3Rpb24gPSBmdW5jdGlvbjxcclxuICAgICAgICAgICAgVEFyZ3MgZXh0ZW5kcyBJVGFza0Zsb3dQYXJ0QXJnczxUUGFydD4sXHJcbiAgICAgICAgICAgIFRQYXJ0IGV4dGVuZHMgSUFuaW1hdGlvbkZsb3dQYXJ0LFxyXG4gICAgICAgID4oXHJcbiAgICAgICAgICAgIHBhcnRBbGlhczogc3RyaW5nLFxyXG4gICAgICAgICAgICBhbmltYXRpb246IElDYXJvdXNlbEFuaW1hdGlvbixcclxuICAgICAgICAgICAgb3BlcmF0aW9uTWFuYWdlckFjY2VzczogSU9wZXJhdGlvbk1hbmFnZXJBY2Nlc3M8VEFyZ3M+LFxyXG4gICAgICAgICk6ICgpID0+IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICB2YXIgZXZlbnRSYWlzZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgY29uc3QgZXZlbnRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnRBcmdzOiBUQXJncykge1xyXG4gICAgICAgICAgICAgICAgZXZlbnRSYWlzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZXZlbnRBcmdzLnBhcnQuc3R5bGVzLmZvckVhY2goZnVuY3Rpb24oc3R5bGU6IHN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChhbmltYXRpb24uc2xpZGVTdHlsZXMpLnRvQ29udGFpbihzdHlsZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChvcGVyYXRpb25NYW5hZ2VyQWNjZXNzLnVuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRBbGlhcyxcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICApKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVyVG9rZW46IG51bWJlciA9XHJcbiAgICAgICAgICAgICAgICBvcGVyYXRpb25NYW5hZ2VyQWNjZXNzLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0QWxpYXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgeyByZXR1cm4gZXZlbnRSYWlzZWQ7IH07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgdGhlIGVuZCBvZiB0aGUgZW50ZXIgYW5pbWF0aW9uLlxyXG4gICAgICAgIGNvbnN0IGVudGVyQW5pbWF0aW9uRW5kU3RhdHVzID0gY2hlY2tGdW5jdGlvbihcclxuICAgICAgICAgICAgU0lOR0xFX1NMSURFX0NBUk9VU0VMX1BBUlRTX0FMSUFTRVMuRU5URVIsXHJcbiAgICAgICAgICAgIGVudGVyQW5pbWF0aW9uLFxyXG4gICAgICAgICAgICBnb0FjdGlvblN0YXR1cy5wYXJ0RW5kRXZlbnRBY2Nlc3MsXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgdGhlIGVuZCBvZiB0aGUgbGVhdmUgYW5pbWF0aW9uXHJcbiAgICAgICAgY29uc3QgbGVhdmVBbmltYXRpb25FbmRTdGF0dXMgPSBjaGVja0Z1bmN0aW9uKFxyXG4gICAgICAgICAgICBTSU5HTEVfU0xJREVfQ0FST1VTRUxfUEFSVFNfQUxJQVNFUy5MRUFWRSxcclxuICAgICAgICAgICAgbGVhdmVBbmltYXRpb24sXHJcbiAgICAgICAgICAgIGdvQWN0aW9uU3RhdHVzLnBhcnRFbmRFdmVudEFjY2VzcyxcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBDaGVjayB0aGUgc3RhcnQgb2YgdGhlIGVudGVyIGFuaW1hdGlvbi5cclxuICAgICAgICBjb25zdCBlbnRlckFuaW1hdGlvblN0YXJ0U3RhdHVzID0gY2hlY2tGdW5jdGlvbihcclxuICAgICAgICAgICAgU0lOR0xFX1NMSURFX0NBUk9VU0VMX1BBUlRTX0FMSUFTRVMuRU5URVIsXHJcbiAgICAgICAgICAgIGVudGVyQW5pbWF0aW9uLFxyXG4gICAgICAgICAgICBnb0FjdGlvblN0YXR1cy5wYXJ0U3RhcnRFdmVudEFjY2VzcyxcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBDaGVjayB0aGUgc3RhcnQgb2YgdGhlIGxlYXZlIGFuaW1hdGlvbi5cclxuICAgICAgICBjb25zdCBsZWF2ZUFuaW1hdGlvblN0YXJ0U3RhdHVzID0gY2hlY2tGdW5jdGlvbihcclxuICAgICAgICAgICAgU0lOR0xFX1NMSURFX0NBUk9VU0VMX1BBUlRTX0FMSUFTRVMuTEVBVkUsXHJcbiAgICAgICAgICAgIGxlYXZlQW5pbWF0aW9uLFxyXG4gICAgICAgICAgICBnb0FjdGlvblN0YXR1cy5wYXJ0U3RhcnRFdmVudEFjY2VzcyxcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBnb0FjdGlvblN0YXR1cy5zb3JhSGFuZGxlclN0YXR1cy50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBleHBlY3QoZW50ZXJBbmltYXRpb25FbmRTdGF0dXMoKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxlYXZlQW5pbWF0aW9uRW5kU3RhdHVzKCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChlbnRlckFuaW1hdGlvblN0YXJ0U3RhdHVzKCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsZWF2ZUFuaW1hdGlvblN0YXJ0U3RhdHVzKCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGlmIChzaG91bGRDaGVjaykge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGN1cnJlbnRBY3RpdmVFbGVtZW50LmNsYXNzTGlzdCkubm90LnRvQ29udGFpbihTSU5HTEVfU0xJREVfQ0FST1VTRUxfU1RZTEVTLlNPUkFfUkVMQVRJVkUpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGN1cnJlbnRBY3RpdmVFbGVtZW50LmNsYXNzTGlzdCkudG9Db250YWluKFNJTkdMRV9TTElERV9DQVJPVVNFTF9TVFlMRVMuU0xJREVfSElEREVOKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChuZXh0RWxlbWVudC5jbGFzc0xpc3QpLnRvQ29udGFpbihTSU5HTEVfU0xJREVfQ0FST1VTRUxfU1RZTEVTLlNPUkFfUkVMQVRJVkUpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KG5leHRFbGVtZW50LmNsYXNzTGlzdCkubm90LnRvQ29udGFpbihTSU5HTEVfU0xJREVfQ0FST1VTRUxfU1RZTEVTLlNMSURFX0hJRERFTik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZ29BY3Rpb25TdGF0dXM6IGdvQWN0aW9uU3RhdHVzLFxyXG4gICAgICAgICAgICBuZXdFbGVtZW50OiBuZXh0RWxlbWVudCxcclxuICAgICAgICAgICAgb2xkRWxlbWVudCA6IGN1cnJlbnRBY3RpdmVFbGVtZW50LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwZXJmb3JtR29OZXh0KFxyXG4gICAgICAgIGNhcm91c2VsOiBTaW5nbGVTbGlkZUNhcm91c2VsLFxyXG4gICAgICAgIGVudGVyQW5pbWF0aW9uOiBJQ2Fyb3VzZWxBbmltYXRpb24sXHJcbiAgICAgICAgbGVhdmVBbmltYXRpb246IElDYXJvdXNlbEFuaW1hdGlvbixcclxuICAgICAgICBzaG91bGRDaGVjazogYm9vbGVhbiA9IHRydWUsXHJcbiAgICApOiBJR29Ub0FuZENoZWNrRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyZm9ybUdvQW5kQ2hlY2soXHJcbiAgICAgICAgICAgIFNJTkdMRV9TTElERV9DQVJPVVNFTF9BQ1RJT05TLkdPX1RPX05FWFQsXHJcbiAgICAgICAgICAgIGNhcm91c2VsLFxyXG4gICAgICAgICAgICBlbnRlckFuaW1hdGlvbixcclxuICAgICAgICAgICAgbGVhdmVBbmltYXRpb24sXHJcbiAgICAgICAgICAgIHNob3VsZENoZWNrLFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwZXJmb3JtR29QcmV2aW91cyhcclxuICAgICAgICBjYXJvdXNlbDogU2luZ2xlU2xpZGVDYXJvdXNlbCxcclxuICAgICAgICBlbnRlckFuaW1hdGlvbjogSUNhcm91c2VsQW5pbWF0aW9uLFxyXG4gICAgICAgIGxlYXZlQW5pbWF0aW9uOiBJQ2Fyb3VzZWxBbmltYXRpb24sXHJcbiAgICAgICAgc2hvdWxkQ2hlY2s6IGJvb2xlYW4gPSB0cnVlLFxyXG4gICAgKTogSUdvVG9BbmRDaGVja0RhdGEge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcmZvcm1Hb0FuZENoZWNrKFxyXG4gICAgICAgICAgICBTSU5HTEVfU0xJREVfQ0FST1VTRUxfQUNUSU9OUy5HT19UT19QUkVWSU9VUyxcclxuICAgICAgICAgICAgY2Fyb3VzZWwsXHJcbiAgICAgICAgICAgIGVudGVyQW5pbWF0aW9uLFxyXG4gICAgICAgICAgICBsZWF2ZUFuaW1hdGlvbixcclxuICAgICAgICAgICAgc2hvdWxkQ2hlY2ssXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGl0TXVzdEJlSW5pdGlhbGl6YWJsZSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgICAgICBpdCgnbXVzdEJlSW5pdGlhbGl6YWJsZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGl2RWxlbWVudDogSFRNTEVsZW1lbnQgPSB0aGF0LmdlbmVyYXRlQmFzaWNDYXJvdXNlbCgpO1xyXG4gICAgICAgICAgICBjb25zdCBjYXJvdXNlbDogU2luZ2xlU2xpZGVDYXJvdXNlbCA9IG5ldyBTaW5nbGVTbGlkZUNhcm91c2VsKGRpdkVsZW1lbnQsIHsgaW5kZXg6IDAgfSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjYXJvdXNlbCkubm90LnRvQmVOdWxsKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSBkaXZFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgQ0FST1VTRUxfU1RZTEVTLldSQVBQRVIpO1xyXG4gICAgICAgICAgICBleHBlY3Qod3JhcHBlci5sZW5ndGgpLnRvQmUoMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gZGl2RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gICAgICAgICAgICAgICAgJy4nICsgQ0FST1VTRUxfU1RZTEVTLldSQVBQRVIgKyAnID4gLicgKyBDQVJPVVNFTF9TVFlMRVMuU0xJREUsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjaGlsZHJlbi5sZW5ndGgpLnRvQmUoMyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjaGlsZHJlblswXS5jbGFzc0xpc3QpLnRvQ29udGFpbihTSU5HTEVfU0xJREVfQ0FST1VTRUxfU1RZTEVTLlNPUkFfUkVMQVRJVkUpO1xyXG4gICAgICAgICAgICBleHBlY3QoY2hpbGRyZW5bMF0uY2xhc3NMaXN0KS5ub3QudG9Db250YWluKFNJTkdMRV9TTElERV9DQVJPVVNFTF9TVFlMRVMuU0xJREVfSElEREVOKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChjaGlsZHJlbltpXS5jbGFzc0xpc3QpLm5vdC50b0NvbnRhaW4oU0lOR0xFX1NMSURFX0NBUk9VU0VMX1NUWUxFUy5TT1JBX1JFTEFUSVZFKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChjaGlsZHJlbltpXS5jbGFzc0xpc3QpLnRvQ29udGFpbihTSU5HTEVfU0xJREVfQ0FST1VTRUxfU1RZTEVTLlNMSURFX0hJRERFTik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGl0TXVzdEJlQWJsZVRvQ2FuY2VsQW5pbWF0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGl0KCdtdXN0QmVBYmxlVG9DYW5jZWxBbmltYXRpb24nLCAoZG9uZSkgPT4ge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBnb05leHQoY2Fyb3VzZWw6IFNpbmdsZVNsaWRlQ2Fyb3VzZWwpOiBJR29Ub0FuZENoZWNrRGF0YSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5wZXJmb3JtR29OZXh0KFxyXG4gICAgICAgICAgICAgICAgICAgIGNhcm91c2VsLFxyXG4gICAgICAgICAgICAgICAgICAgIHsgc2xpZGVTdHlsZXM6IFsnc29yYS1mYWRlLWluLWFuaW1hdGlvbiddIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBzbGlkZVN0eWxlczogWydzb3JhLWZhZGUtb3V0LWFuaW1hdGlvbiddIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkaXZFbGVtZW50OiBIVE1MRWxlbWVudCA9IHRoYXQuZ2VuZXJhdGVCYXNpY0Nhcm91c2VsKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhcm91c2VsOiBTaW5nbGVTbGlkZUNhcm91c2VsID0gbmV3IFNpbmdsZVNsaWRlQ2Fyb3VzZWwoZGl2RWxlbWVudCwgeyBpbmRleDogMCB9KTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXZFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGlvblByb21pc2UgPSBuZXcgUHJvbWlzZTx2b2lkPihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFuaW1hdGlvblN0YXR1cyA9IGdvTmV4dChjYXJvdXNlbCk7XHJcbiAgICAgICAgICAgICAgICBjYXJvdXNlbC5mb3JjZUFjdGl2ZVNsaWRlKDIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGhpcmRFbGVtZW50ID0gY2Fyb3VzZWwuZ2V0RWxlbWVudHNNYW5hZ2VyKCkuZ2V0Q29sbGVjdGlvbigpWzJdO1xyXG5cclxuICAgICAgICAgICAgICAgIGV4cGVjdCh0aGlyZEVsZW1lbnQuY2xhc3NMaXN0KS5ub3QudG9Db250YWluKFNJTkdMRV9TTElERV9DQVJPVVNFTF9TVFlMRVMuU0xJREVfSElEREVOKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdCh0aGlyZEVsZW1lbnQuY2xhc3NMaXN0KS50b0NvbnRhaW4oU0lOR0xFX1NMSURFX0NBUk9VU0VMX1NUWUxFUy5TT1JBX1JFTEFUSVZFKTtcclxuXHJcbiAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uU3RhdHVzLmdvQWN0aW9uU3RhdHVzLnNvcmFIYW5kbGVyU3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgXSkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvbGRBY3RpdmVFbGVtZW50ID0gYW5pbWF0aW9uU3RhdHVzLm9sZEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3QWN0aXZlRWxlbWVudCA9IGFuaW1hdGlvblN0YXR1cy5uZXdFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QobmV3QWN0aXZlRWxlbWVudCkudG9CZShjYXJvdXNlbC5nZXRFbGVtZW50c01hbmFnZXIoKS5nZXRDb2xsZWN0aW9uKClbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChuZXdBY3RpdmVFbGVtZW50LmNsYXNzTGlzdCkubm90LnRvQ29udGFpbihTSU5HTEVfU0xJREVfQ0FST1VTRUxfU1RZTEVTLlNPUkFfUkVMQVRJVkUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChuZXdBY3RpdmVFbGVtZW50LmNsYXNzTGlzdCkudG9Db250YWluKFNJTkdMRV9TTElERV9DQVJPVVNFTF9TVFlMRVMuU0xJREVfSElEREVOKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KG9sZEFjdGl2ZUVsZW1lbnQpLnRvQmUoY2Fyb3VzZWwuZ2V0RWxlbWVudHNNYW5hZ2VyKCkuZ2V0Q29sbGVjdGlvbigpWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3Qob2xkQWN0aXZlRWxlbWVudC5jbGFzc0xpc3QpLm5vdC50b0NvbnRhaW4oU0lOR0xFX1NMSURFX0NBUk9VU0VMX1NUWUxFUy5TT1JBX1JFTEFUSVZFKTtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3Qob2xkQWN0aXZlRWxlbWVudC5jbGFzc0xpc3QpLnRvQ29udGFpbihTSU5HTEVfU0xJREVfQ0FST1VTRUxfU1RZTEVTLlNMSURFX0hJRERFTik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZXhlY3V0aW9uUHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkaXZFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBkb25lLmZhaWwoZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpdE11c3RCZUFibGVUb0dvVG9TbGlkZXMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgaXQoJ211c3RCZUFibGVUb0dvVG9TbGlkZXMnLCBmdW5jdGlvbihkb25lKSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdvTmV4dChjYXJvdXNlbDogU2luZ2xlU2xpZGVDYXJvdXNlbCk6IElHb1RvQW5kQ2hlY2tEYXRhIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGF0LnBlcmZvcm1Hb05leHQoXHJcbiAgICAgICAgICAgICAgICAgICAgY2Fyb3VzZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgeyBzbGlkZVN0eWxlczogWydzb3JhLWZhZGUtaW4tYW5pbWF0aW9uJ10gfSxcclxuICAgICAgICAgICAgICAgICAgICB7IHNsaWRlU3R5bGVzOiBbJ3NvcmEtZmFkZS1vdXQtYW5pbWF0aW9uJ10gfSxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ29QcmV2aW91cyhjYXJvdXNlbDogU2luZ2xlU2xpZGVDYXJvdXNlbCk6IElHb1RvQW5kQ2hlY2tEYXRhIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGF0LnBlcmZvcm1Hb1ByZXZpb3VzKFxyXG4gICAgICAgICAgICAgICAgICAgIGNhcm91c2VsLFxyXG4gICAgICAgICAgICAgICAgICAgIHsgc2xpZGVTdHlsZXM6IFsnc29yYS1mYWRlLWluLWFuaW1hdGlvbiddIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBzbGlkZVN0eWxlczogWydzb3JhLWZhZGUtb3V0LWFuaW1hdGlvbiddIH0sXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkaXZFbGVtZW50OiBIVE1MRWxlbWVudCA9IHRoYXQuZ2VuZXJhdGVCYXNpY0Nhcm91c2VsKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhcm91c2VsOiBTaW5nbGVTbGlkZUNhcm91c2VsID0gbmV3IFNpbmdsZVNsaWRlQ2Fyb3VzZWwoZGl2RWxlbWVudCwgeyBpbmRleDogMCB9KTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXZFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGlvblByb21pc2UgPSBuZXcgUHJvbWlzZTx2b2lkPihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFuaW1hdGlvblN0YXR1cyA9IGdvTmV4dChjYXJvdXNlbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkQWN0aXZlRWxlbWVudCA9IGFuaW1hdGlvblN0YXR1cy5vbGRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3QWN0aXZlRWxlbWVudCA9IGFuaW1hdGlvblN0YXR1cy5uZXdFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGV4cGVjdChvbGRBY3RpdmVFbGVtZW50KS50b0JlKGNhcm91c2VsLmdldEVsZW1lbnRzTWFuYWdlcigpLmdldENvbGxlY3Rpb24oKVswXSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QobmV3QWN0aXZlRWxlbWVudCkudG9CZShjYXJvdXNlbC5nZXRFbGVtZW50c01hbmFnZXIoKS5nZXRDb2xsZWN0aW9uKClbMV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25TdGF0dXMuZ29BY3Rpb25TdGF0dXMuc29yYUhhbmRsZXJTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBdKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuaW1hdGlvblN0YXR1cyA9IGdvUHJldmlvdXMoY2Fyb3VzZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvbGRBY3RpdmVFbGVtZW50ID0gYW5pbWF0aW9uU3RhdHVzLm9sZEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3QWN0aXZlRWxlbWVudCA9IGFuaW1hdGlvblN0YXR1cy5uZXdFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBleHBlY3Qob2xkQWN0aXZlRWxlbWVudCkudG9CZShjYXJvdXNlbC5nZXRFbGVtZW50c01hbmFnZXIoKS5nZXRDb2xsZWN0aW9uKClbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChuZXdBY3RpdmVFbGVtZW50KS50b0JlKGNhcm91c2VsLmdldEVsZW1lbnRzTWFuYWdlcigpLmdldENvbGxlY3Rpb24oKVswXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uU3RhdHVzLmdvQWN0aW9uU3RhdHVzLnNvcmFIYW5kbGVyU3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgIF0pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGV4ZWN1dGlvblByb21pc2UudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgZG9uZS5mYWlsKGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIHRoaXMubG9uZ1RpbWVMaW1pdCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpdE11c3RCZUFibGVUb0dvVG9TbGlkZXNXaGlsZUFkZGluZ0VsZW1lbnRzKCkge1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGl0KCdtdXN0QmVBYmxlVG9Hb1RvU2xpZGVzV2hpbGVBZGRpbmdFbGVtZW50cycsIGZ1bmN0aW9uKGRvbmUpIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gZ29OZXh0KGNhcm91c2VsOiBTaW5nbGVTbGlkZUNhcm91c2VsKTogSUdvVG9BbmRDaGVja0RhdGEge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQucGVyZm9ybUdvTmV4dChcclxuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbCxcclxuICAgICAgICAgICAgICAgICAgICB7IHNsaWRlU3R5bGVzOiBbJ3NvcmEtZmFkZS1pbi1hbmltYXRpb24nXSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgc2xpZGVTdHlsZXM6IFsnc29yYS1mYWRlLW91dC1hbmltYXRpb24nXSB9LFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnb1ByZXZpb3VzKGNhcm91c2VsOiBTaW5nbGVTbGlkZUNhcm91c2VsKTogSUdvVG9BbmRDaGVja0RhdGEge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQucGVyZm9ybUdvUHJldmlvdXMoXHJcbiAgICAgICAgICAgICAgICAgICAgY2Fyb3VzZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgeyBzbGlkZVN0eWxlczogWydzb3JhLWZhZGUtaW4tYW5pbWF0aW9uJ10gfSxcclxuICAgICAgICAgICAgICAgICAgICB7IHNsaWRlU3R5bGVzOiBbJ3NvcmEtZmFkZS1vdXQtYW5pbWF0aW9uJ10gfSxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRpdkVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gdGhhdC5nZW5lcmF0ZUJhc2ljQ2Fyb3VzZWwoKTtcclxuICAgICAgICAgICAgY29uc3QgY2Fyb3VzZWw6IFNpbmdsZVNsaWRlQ2Fyb3VzZWwgPSBuZXcgU2luZ2xlU2xpZGVDYXJvdXNlbChkaXZFbGVtZW50LCB7IGluZGV4OiAwIH0pO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdkVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZXhlY3V0aW9uUHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvblN0YXR1cyA9IGdvTmV4dChjYXJvdXNlbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudDAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQwLmNsYXNzTGlzdC5hZGQoQ0FST1VTRUxfU1RZTEVTLlNMSURFKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQwLmNsYXNzTGlzdC5hZGQoU0lOR0xFX1NMSURFX0NBUk9VU0VMX1NUWUxFUy5TTElERV9ISURERU4pO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudDAuaW5uZXJIVE1MID0gJ05ldyBDb250ZW50IDAnO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQxLmNsYXNzTGlzdC5hZGQoQ0FST1VTRUxfU1RZTEVTLlNMSURFKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQxLmNsYXNzTGlzdC5hZGQoU0lOR0xFX1NMSURFX0NBUk9VU0VMX1NUWUxFUy5TTElERV9ISURERU4pO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudDEuaW5uZXJIVE1MID0gJ05ldyBDb250ZW50IDEnO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQyLmNsYXNzTGlzdC5hZGQoQ0FST1VTRUxfU1RZTEVTLlNMSURFKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQyLmNsYXNzTGlzdC5hZGQoU0lOR0xFX1NMSURFX0NBUk9VU0VMX1NUWUxFUy5TTElERV9ISURERU4pO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudDIuaW5uZXJIVE1MID0gJ05ldyBDb250ZW50IDInO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQzLmNsYXNzTGlzdC5hZGQoQ0FST1VTRUxfU1RZTEVTLlNMSURFKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQzLmNsYXNzTGlzdC5hZGQoU0lOR0xFX1NMSURFX0NBUk9VU0VMX1NUWUxFUy5TTElERV9ISURERU4pO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudDMuaW5uZXJIVE1MID0gJ05ldyBDb250ZW50IDMnO1xyXG4gICAgICAgICAgICAgICAgY2Fyb3VzZWwuZ2V0RWxlbWVudHNNYW5hZ2VyKCkuaW5zZXJ0RWxlbWVudHMoe1xyXG4gICAgICAgICAgICAgICAgICAgIDA6IGVsZW1lbnQwLFxyXG4gICAgICAgICAgICAgICAgICAgIDE6IGVsZW1lbnQxLFxyXG4gICAgICAgICAgICAgICAgICAgIDI6IGVsZW1lbnQyLFxyXG4gICAgICAgICAgICAgICAgICAgIDM6IGVsZW1lbnQzLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGNhcm91c2VsLmdldEVsZW1lbnRzTWFuYWdlcigpLmdldExlbmd0aCgpKS50b0JlKDcpO1xyXG5cclxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25TdGF0dXMuZ29BY3Rpb25TdGF0dXMuc29yYUhhbmRsZXJTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBdKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZEFjdGl2ZUVsZW1lbnQgPSBhbmltYXRpb25TdGF0dXMub2xkRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdBY3RpdmVFbGVtZW50ID0gYW5pbWF0aW9uU3RhdHVzLm5ld0VsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChuZXdBY3RpdmVFbGVtZW50KS50b0JlKGNhcm91c2VsLmdldEVsZW1lbnRzTWFuYWdlcigpLmdldENvbGxlY3Rpb24oKVs1XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KG9sZEFjdGl2ZUVsZW1lbnQpLnRvQmUoY2Fyb3VzZWwuZ2V0RWxlbWVudHNNYW5hZ2VyKCkuZ2V0Q29sbGVjdGlvbigpWzRdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uU3RhdHVzID0gZ29QcmV2aW91cyhjYXJvdXNlbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uU3RhdHVzLmdvQWN0aW9uU3RhdHVzLnNvcmFIYW5kbGVyU3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgIF0pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZEFjdGl2ZUVsZW1lbnQgPSBhbmltYXRpb25TdGF0dXMub2xkRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3QWN0aXZlRWxlbWVudCA9IGFuaW1hdGlvblN0YXR1cy5uZXdFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KG5ld0FjdGl2ZUVsZW1lbnQpLnRvQmUoY2Fyb3VzZWwuZ2V0RWxlbWVudHNNYW5hZ2VyKCkuZ2V0Q29sbGVjdGlvbigpWzRdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KG9sZEFjdGl2ZUVsZW1lbnQpLnRvQmUoY2Fyb3VzZWwuZ2V0RWxlbWVudHNNYW5hZ2VyKCkuZ2V0Q29sbGVjdGlvbigpWzVdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvblN0YXR1cyA9IGdvUHJldmlvdXMoY2Fyb3VzZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uU3RhdHVzLmdvQWN0aW9uU3RhdHVzLnNvcmFIYW5kbGVyU3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkQWN0aXZlRWxlbWVudCA9IGFuaW1hdGlvblN0YXR1cy5vbGRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3QWN0aXZlRWxlbWVudCA9IGFuaW1hdGlvblN0YXR1cy5uZXdFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChuZXdBY3RpdmVFbGVtZW50KS50b0JlKGNhcm91c2VsLmdldEVsZW1lbnRzTWFuYWdlcigpLmdldENvbGxlY3Rpb24oKVszXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3Qob2xkQWN0aXZlRWxlbWVudCkudG9CZShjYXJvdXNlbC5nZXRFbGVtZW50c01hbmFnZXIoKS5nZXRDb2xsZWN0aW9uKClbNF0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBleGVjdXRpb25Qcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdkVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgIGRvbmUuZmFpbChlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSwgdGhpcy5sb25nVGltZUxpbWl0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGl0TXVzdEJlQWJsZVRvR29Ub1NsaWRlc1doaWxlUmVtb3ZpbmdBbmltYXRpb25FbGVtZW50cygpIHtcclxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgICAgICBpdCgnbXVzdEJlQWJsZVRvR29Ub1NsaWRlc1doaWxlUmVtb3ZpbmdBbmltYXRpb25FbGVtZW50cycsIGZ1bmN0aW9uKGRvbmUpIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gZ29OZXh0KGNhcm91c2VsOiBTaW5nbGVTbGlkZUNhcm91c2VsKTogSUdvVG9BbmRDaGVja0RhdGEge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQucGVyZm9ybUdvTmV4dChcclxuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbCxcclxuICAgICAgICAgICAgICAgICAgICB7IHNsaWRlU3R5bGVzOiBbJ3NvcmEtZmFkZS1pbi1hbmltYXRpb24nXSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgc2xpZGVTdHlsZXM6IFsnc29yYS1mYWRlLW91dC1hbmltYXRpb24nXSB9LFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGl2RWxlbWVudDogSFRNTEVsZW1lbnQgPSB0aGF0LmdlbmVyYXRlQmFzaWNDYXJvdXNlbCgpO1xyXG4gICAgICAgICAgICBjb25zdCBjYXJvdXNlbDogU2luZ2xlU2xpZGVDYXJvdXNlbCA9IG5ldyBTaW5nbGVTbGlkZUNhcm91c2VsKGRpdkVsZW1lbnQsIHsgaW5kZXg6IDAgfSk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2RWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBleGVjdXRpb25Qcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4oZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbmltYXRpb25TdGF0dXMgPSBnb05leHQoY2Fyb3VzZWwpO1xyXG4gICAgICAgICAgICAgICAgY2Fyb3VzZWwuZ2V0RWxlbWVudHNNYW5hZ2VyKCkucmVtb3ZlRWxlbWVudHMoWzAsIDFdKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChjYXJvdXNlbC5nZXRFbGVtZW50c01hbmFnZXIoKS5nZXRDb2xsZWN0aW9uKCkubGVuZ3RoKS50b0JlKDMpO1xyXG5cclxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25TdGF0dXMuZ29BY3Rpb25TdGF0dXMuc29yYUhhbmRsZXJTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBdKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZEFjdGl2ZUVsZW1lbnQgPSBhbmltYXRpb25TdGF0dXMub2xkRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdBY3RpdmVFbGVtZW50ID0gYW5pbWF0aW9uU3RhdHVzLm5ld0VsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChvbGRBY3RpdmVFbGVtZW50KS50b0JlKGNhcm91c2VsLmdldEVsZW1lbnRzTWFuYWdlcigpLmdldENvbGxlY3Rpb24oKVswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KG5ld0FjdGl2ZUVsZW1lbnQpLnRvQmUoY2Fyb3VzZWwuZ2V0RWxlbWVudHNNYW5hZ2VyKCkuZ2V0Q29sbGVjdGlvbigpWzFdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBleGVjdXRpb25Qcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdkVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgIGRvbmUuZmFpbChlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCB0aGlzLmxvbmdUaW1lTGltaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXRNdXN0QmVBYmxlVG9Hb1RvU2xpZGVzV2hpbGVSZW1vdmluZ090aGVyRWxlbWVudHMoKSB7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgaXQoJ211c3RCZUFibGVUb0dvVG9TbGlkZXNXaGlsZVJlbW92aW5nT3RoZXJFbGVtZW50cycsIGZ1bmN0aW9uKGRvbmUpIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gZ29OZXh0KGNhcm91c2VsOiBTaW5nbGVTbGlkZUNhcm91c2VsKTogSUdvVG9BbmRDaGVja0RhdGEge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQucGVyZm9ybUdvTmV4dChcclxuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbCxcclxuICAgICAgICAgICAgICAgICAgICB7IHNsaWRlU3R5bGVzOiBbJ3NvcmEtZmFkZS1pbi1hbmltYXRpb24nXSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgc2xpZGVTdHlsZXM6IFsnc29yYS1mYWRlLW91dC1hbmltYXRpb24nXSB9LFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGl2RWxlbWVudDogSFRNTEVsZW1lbnQgPSB0aGF0LmdlbmVyYXRlQmFzaWNDYXJvdXNlbCgpO1xyXG4gICAgICAgICAgICBjb25zdCBjYXJvdXNlbDogU2luZ2xlU2xpZGVDYXJvdXNlbCA9IG5ldyBTaW5nbGVTbGlkZUNhcm91c2VsKGRpdkVsZW1lbnQsIHsgaW5kZXg6IDAgfSk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2RWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBleGVjdXRpb25Qcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4oZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbmltYXRpb25TdGF0dXMgPSBnb05leHQoY2Fyb3VzZWwpO1xyXG4gICAgICAgICAgICAgICAgY2Fyb3VzZWwuZ2V0RWxlbWVudHNNYW5hZ2VyKCkucmVtb3ZlRWxlbWVudHMoWzJdKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChjYXJvdXNlbC5nZXRFbGVtZW50c01hbmFnZXIoKS5nZXRDb2xsZWN0aW9uKCkubGVuZ3RoKS50b0JlKDIpO1xyXG5cclxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25TdGF0dXMuZ29BY3Rpb25TdGF0dXMuc29yYUhhbmRsZXJTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBdKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZEFjdGl2ZUVsZW1lbnQgPSBhbmltYXRpb25TdGF0dXMub2xkRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdBY3RpdmVFbGVtZW50ID0gYW5pbWF0aW9uU3RhdHVzLm5ld0VsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChvbGRBY3RpdmVFbGVtZW50KS50b0JlKGNhcm91c2VsLmdldEVsZW1lbnRzTWFuYWdlcigpLmdldENvbGxlY3Rpb24oKVswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KG5ld0FjdGl2ZUVsZW1lbnQpLnRvQmUoY2Fyb3VzZWwuZ2V0RWxlbWVudHNNYW5hZ2VyKCkuZ2V0Q29sbGVjdGlvbigpWzFdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBleGVjdXRpb25Qcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdkVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgIGRvbmUuZmFpbChlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCB0aGlzLmxvbmdUaW1lTGltaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXRNdXN0QmVBYmxlVG9IYW5kbGVDaGlsZHJlbkFuaW1hdGlvbnMoKSB7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgICAgIGl0KCdtdXN0QmVBYmxlVG9IYW5kbGVDaGlsZHJlbkFuaW1hdGlvbnMnLCBmdW5jdGlvbihkb25lKSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdvTmV4dChjYXJvdXNlbDogU2luZ2xlU2xpZGVDYXJvdXNlbCk6IElHb1RvQW5kQ2hlY2tEYXRhIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGF0LnBlcmZvcm1Hb05leHQoY2Fyb3VzZWwsXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlblN0eWxlczogWyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ3NwYW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiBbICdzb3JhLWZhZGUtaW4tYW5pbWF0aW9uJyBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlU3R5bGVzOiBbICdzb3JhLWZhZGUtaW4tYW5pbWF0aW9uJyBdLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlblN0eWxlczogWyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ3NwYW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiBbICdzb3JhLWZhZGUtb3V0LWFuaW1hdGlvbicgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZVN0eWxlczogWyAnc29yYS1mYWRlLW91dC1hbmltYXRpb24nIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdvUHJldmlvdXMoY2Fyb3VzZWw6IFNpbmdsZVNsaWRlQ2Fyb3VzZWwpOiBJR29Ub0FuZENoZWNrRGF0YSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5wZXJmb3JtR29QcmV2aW91cyhjYXJvdXNlbCxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuU3R5bGVzOiBbIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnc3BhbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXM6IFsgJ3NvcmEtZmFkZS1pbi1hbmltYXRpb24nIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVTdHlsZXM6IFsgJ3NvcmEtZmFkZS1pbi1hbmltYXRpb24nIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuU3R5bGVzOiBbIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnc3BhbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXM6IFsgJ3NvcmEtZmFkZS1vdXQtYW5pbWF0aW9uJyBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlU3R5bGVzOiBbICdzb3JhLWZhZGUtb3V0LWFuaW1hdGlvbicgXSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGl2RWxlbWVudDogSFRNTEVsZW1lbnQgPSB0aGF0LmdlbmVyYXRlQmFzaWNDYXJvdXNlbCgpO1xyXG4gICAgICAgICAgICBjb25zdCBjYXJvdXNlbDogU2luZ2xlU2xpZGVDYXJvdXNlbCA9IG5ldyBTaW5nbGVTbGlkZUNhcm91c2VsKGRpdkVsZW1lbnQsIHsgaW5kZXg6IDAgfSk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2RWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBleGVjdXRpb25Qcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4oZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uU3RhdHVzID0gZ29OZXh0KGNhcm91c2VsKTtcclxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25TdGF0dXMuZ29BY3Rpb25TdGF0dXMuc29yYUhhbmRsZXJTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBdKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZEFjdGl2ZUVsZW1lbnQgPSBhbmltYXRpb25TdGF0dXMub2xkRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdBY3RpdmVFbGVtZW50ID0gYW5pbWF0aW9uU3RhdHVzLm5ld0VsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KG9sZEFjdGl2ZUVsZW1lbnQpLnRvQmUoY2Fyb3VzZWwuZ2V0RWxlbWVudHNNYW5hZ2VyKCkuZ2V0Q29sbGVjdGlvbigpWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QobmV3QWN0aXZlRWxlbWVudCkudG9CZShjYXJvdXNlbC5nZXRFbGVtZW50c01hbmFnZXIoKS5nZXRDb2xsZWN0aW9uKClbMV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25TdGF0dXMgPSBnb1ByZXZpb3VzKGNhcm91c2VsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25TdGF0dXMuZ29BY3Rpb25TdGF0dXMuc29yYUhhbmRsZXJTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgXSkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkQWN0aXZlRWxlbWVudCA9IGFuaW1hdGlvblN0YXR1cy5vbGRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdBY3RpdmVFbGVtZW50ID0gYW5pbWF0aW9uU3RhdHVzLm5ld0VsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChvbGRBY3RpdmVFbGVtZW50KS50b0JlKGNhcm91c2VsLmdldEVsZW1lbnRzTWFuYWdlcigpLmdldENvbGxlY3Rpb24oKVsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChuZXdBY3RpdmVFbGVtZW50KS50b0JlKGNhcm91c2VsLmdldEVsZW1lbnRzTWFuYWdlcigpLmdldENvbGxlY3Rpb24oKVswXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBleGVjdXRpb25Qcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdkVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgIGRvbmUuZmFpbChlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCB0aGlzLmxvbmdUaW1lTGltaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXRNdXN0QmVBYmxlVG9QYXVzZUFuZFJlc3VtZUFuaW1hdGlvbigpIHtcclxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgaXQoJ211c3RCZUFibGVUb1BhdXNlQW5kUmVzdW1lQW5pbWF0aW9uJywgZnVuY3Rpb24oZG9uZSkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBnb05leHQoY2Fyb3VzZWw6IFNpbmdsZVNsaWRlQ2Fyb3VzZWwpOiBJR29Ub0FuZENoZWNrRGF0YSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5wZXJmb3JtR29OZXh0KFxyXG4gICAgICAgICAgICAgICAgICAgIGNhcm91c2VsLFxyXG4gICAgICAgICAgICAgICAgICAgIHsgc2xpZGVTdHlsZXM6IFsnc29yYS1mYWRlLWluLWFuaW1hdGlvbicsICdzb3JhLW9mZnNldC1sZWZ0LWluLWFuaW1hdGlvbicgXX0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBzbGlkZVN0eWxlczogWydzb3JhLWZhZGUtb3V0LWFuaW1hdGlvbicsICdzb3JhLW9mZnNldC1sZWZ0LW91dC1hbmltYXRpb24nIF0gfSxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRpdkVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gdGhhdC5nZW5lcmF0ZUJhc2ljQ2Fyb3VzZWwoKTtcclxuICAgICAgICAgICAgY29uc3QgY2Fyb3VzZWw6IFNpbmdsZVNsaWRlQ2Fyb3VzZWwgPSBuZXcgU2luZ2xlU2xpZGVDYXJvdXNlbChkaXZFbGVtZW50LCB7IGluZGV4OiAwIH0pO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdkVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZXhlY3V0aW9uUHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gY2Fyb3VzZWwuZ2V0QWN0aXZlSW5kZXgoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFuaW1hdGlvblN0YXR1cyA9IGdvTmV4dChjYXJvdXNlbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkQWN0aXZlRWxlbWVudCA9IGFuaW1hdGlvblN0YXR1cy5vbGRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3QWN0aXZlRWxlbWVudCA9IGFuaW1hdGlvblN0YXR1cy5uZXdFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KG9sZEFjdGl2ZUVsZW1lbnQpLnRvQmUoY2Fyb3VzZWwuZ2V0RWxlbWVudHNNYW5hZ2VyKCkuZ2V0Q29sbGVjdGlvbigpWzBdKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChuZXdBY3RpdmVFbGVtZW50KS50b0JlKGNhcm91c2VsLmdldEVsZW1lbnRzTWFuYWdlcigpLmdldENvbGxlY3Rpb24oKVsxXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2Fyb3VzZWwucGF1c2UoKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChjYXJvdXNlbC5pc1BhdXNlZCgpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGNhcm91c2VsLmdldEFjdGl2ZUluZGV4KCkpLnRvQmUoY3VycmVudEluZGV4KTtcclxuXHJcbiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZTx2b2lkPihmdW5jdGlvbihyZXNvbHZlQ2gsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QoY2Fyb3VzZWwuaXNQYXVzZWQoKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGNhcm91c2VsLmdldEFjdGl2ZUluZGV4KCkpLnRvQmUoY3VycmVudEluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZUNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7XHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcm91c2VsLnJlc3VtZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvblN0YXR1cy5nb0FjdGlvblN0YXR1cy5zb3JhSGFuZGxlclN0YXR1cyxcclxuICAgICAgICAgICAgICAgIF0pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBleGVjdXRpb25Qcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdkVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgIGRvbmUuZmFpbChlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCB0aGlzLmxvbmdUaW1lTGltaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXRNdXN0QmVBYmxlVG9SdW5Db21wbGV4QW5pbWF0aW9ucygpIHtcclxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgaXQoJ211c3RCZUFibGVUb1J1bkNvbXBsZXhBbmltYXRpb25zJywgZnVuY3Rpb24oZG9uZSkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBnb05leHQoY2Fyb3VzZWw6IFNpbmdsZVNsaWRlQ2Fyb3VzZWwpOiBJR29Ub0FuZENoZWNrRGF0YSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5wZXJmb3JtR29OZXh0KFxyXG4gICAgICAgICAgICAgICAgICAgIGNhcm91c2VsLFxyXG4gICAgICAgICAgICAgICAgICAgIHsgc2xpZGVTdHlsZXM6IFsnc29yYS1mYWRlLWluLWFuaW1hdGlvbicsICdzb3JhLW9mZnNldC1sZWZ0LWluLWFuaW1hdGlvbicgXX0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBzbGlkZVN0eWxlczogWydzb3JhLWZhZGUtb3V0LWFuaW1hdGlvbicsICdzb3JhLW9mZnNldC1sZWZ0LW91dC1hbmltYXRpb24nIF0gfSxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdvUHJldmlvdXMoY2Fyb3VzZWw6IFNpbmdsZVNsaWRlQ2Fyb3VzZWwpOiBJR29Ub0FuZENoZWNrRGF0YSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5wZXJmb3JtR29QcmV2aW91cyhcclxuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbCxcclxuICAgICAgICAgICAgICAgICAgICB7IHNsaWRlU3R5bGVzOiBbJ3NvcmEtZmFkZS1pbi1hbmltYXRpb24nLCAnc29yYS1vZmZzZXQtbGVmdC1pbi1hbmltYXRpb24nIF19LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgc2xpZGVTdHlsZXM6IFsnc29yYS1mYWRlLW91dC1hbmltYXRpb24nLCAnc29yYS1vZmZzZXQtbGVmdC1vdXQtYW5pbWF0aW9uJyBdIH0sXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkaXZFbGVtZW50OiBIVE1MRWxlbWVudCA9IHRoYXQuZ2VuZXJhdGVCYXNpY0Nhcm91c2VsKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhcm91c2VsOiBTaW5nbGVTbGlkZUNhcm91c2VsID0gbmV3IFNpbmdsZVNsaWRlQ2Fyb3VzZWwoZGl2RWxlbWVudCwgeyBpbmRleDogMCB9KTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXZFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGlvblByb21pc2UgPSBuZXcgUHJvbWlzZTx2b2lkPihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFuaW1hdGlvblN0YXR1cyA9IGdvTmV4dChjYXJvdXNlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRBY3RpdmVFbGVtZW50ID0gYW5pbWF0aW9uU3RhdHVzLm9sZEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdBY3RpdmVFbGVtZW50ID0gYW5pbWF0aW9uU3RhdHVzLm5ld0VsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qob2xkQWN0aXZlRWxlbWVudCkudG9CZShjYXJvdXNlbC5nZXRFbGVtZW50c01hbmFnZXIoKS5nZXRDb2xsZWN0aW9uKClbMF0pO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KG5ld0FjdGl2ZUVsZW1lbnQpLnRvQmUoY2Fyb3VzZWwuZ2V0RWxlbWVudHNNYW5hZ2VyKCkuZ2V0Q29sbGVjdGlvbigpWzFdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uU3RhdHVzLmdvQWN0aW9uU3RhdHVzLnNvcmFIYW5kbGVyU3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgXSkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmltYXRpb25TdGF0dXMgPSBnb1ByZXZpb3VzKGNhcm91c2VsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkQWN0aXZlRWxlbWVudCA9IGFuaW1hdGlvblN0YXR1cy5vbGRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0FjdGl2ZUVsZW1lbnQgPSBhbmltYXRpb25TdGF0dXMubmV3RWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3Qob2xkQWN0aXZlRWxlbWVudCkudG9CZShjYXJvdXNlbC5nZXRFbGVtZW50c01hbmFnZXIoKS5nZXRDb2xsZWN0aW9uKClbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChuZXdBY3RpdmVFbGVtZW50KS50b0JlKGNhcm91c2VsLmdldEVsZW1lbnRzTWFuYWdlcigpLmdldENvbGxlY3Rpb24oKVswXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uU3RhdHVzLmdvQWN0aW9uU3RhdHVzLnNvcmFIYW5kbGVyU3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgIF0pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGV4ZWN1dGlvblByb21pc2UudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgZG9uZS5mYWlsKGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIHRoaXMubG9uZ1RpbWVMaW1pdCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJztcclxuaW1wb3J0IHsgQ2FuY2VsYWJsZUNvbGxlY3Rpb25DaGFuZ2VFdmVudEFyZ3MgfSBmcm9tICcuLi8uLi9jb2xsZWN0aW9uL2NhbmNlbGFibGUtY29sbGVjdGlvbi1jaGFuZ2UtYXJncyc7XHJcbmltcG9ydCB7IENvbGxlY3Rpb25DaGFuZ2VFdmVudEFyZ3MgfSBmcm9tICcuLi8uLi9jb2xsZWN0aW9uL2NvbGxlY3Rpb24tY2hhbmdlLWFyZ3MnO1xyXG5pbXBvcnQge1xyXG4gICAgQ09MTEVDVElPTl9NQU5BR0VSX0VWRU5UUyxcclxuICAgIENvbGxlY3Rpb25NYW5hZ2VyLFxyXG59IGZyb20gJy4uLy4uL2NvbGxlY3Rpb24vY29sbGVjdGlvbi1tYW5hZ2VyJztcclxuaW1wb3J0IHsgSVRlc3QgfSBmcm9tICcuLi9JVGVzdCc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29sbGVjdGlvbk1hbmFnZXJUZXN0cyBpbXBsZW1lbnRzIElUZXN0IHtcclxuXHJcbiAgICBwdWJsaWMgcGVyZm9ybVRlc3RzKCk6IHZvaWQge1xyXG4gICAgICAgIGRlc2NyaWJlKCdDb2xsZWN0aW9uIE1hbmFnZXIgVGVzdHMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaXRNdXN0QmVJbml0aWFsaXphYmxlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXRNdXN0QmVBYmxlVG9BZGRFbGVtZW50cygpO1xyXG4gICAgICAgICAgICB0aGlzLml0TXVzdEJlQWJsZVRvUHJldmVudERlZmF1bHRBY3Rpb25XaGVuQWRkaW5nRWxlbWVudHMoKTtcclxuICAgICAgICAgICAgdGhpcy5pdE11c3RCZUFibGVUb1ByZXZlbnREZWZhdWx0QWN0aW9uV2hlblJlbW92aW5nRWxlbWVudHMoKTtcclxuICAgICAgICAgICAgdGhpcy5pdE11c3RCZUFibGVUb1JlbW92ZUVsZW1lbnRzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpdE11c3RCZUluaXRpYWxpemFibGUoKTogdm9pZCB7XHJcbiAgICAgICAgaXQoJ211c3RCZUluaXRpYWxpemFibGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb246IG51bWJlcltdID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICAgICAgY29uc3QgY29sbGVjdGlvbk1hbmFnZXIgPSBuZXcgQ29sbGVjdGlvbk1hbmFnZXIoY29sbGVjdGlvbiwgZXZlbnRFbWl0dGVyKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uTWFuYWdlcikubm90LnRvQmVOdWxsKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uTWFuYWdlci5nZXRDb2xsZWN0aW9uKCkpLnRvQmUoY29sbGVjdGlvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpdE11c3RCZUFibGVUb0FkZEVsZW1lbnRzKCkge1xyXG4gICAgICAgIGl0KCdtdXN0QmVBYmxlVG9BZGRFbGVtZW50cycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29sbGVjdGlvbjogbnVtYmVyW10gPSBbMiwgNSwgN107XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWQ6IG51bWJlcltdID0gWzIsIDEwLCA1LCA4LCA3XTtcclxuICAgICAgICAgICAgY29uc3QgY29sbGVjdGlvbk1hbmFnZXIgPSBuZXcgQ29sbGVjdGlvbk1hbmFnZXI8bnVtYmVyPihjb2xsZWN0aW9uLCBldmVudEVtaXR0ZXIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJlZm9yZUlzRW1pdHRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgYWZ0ZXJJc0VtaXR0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGV2ZW50RW1pdHRlci5vbihcclxuICAgICAgICAgICAgICAgIENPTExFQ1RJT05fTUFOQUdFUl9FVkVOVFMuY29sbGVjdGlvbkJlZm9yZUNoYW5nZSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGV2ZW50QXJnczogQ29sbGVjdGlvbkNoYW5nZUV2ZW50QXJnczxudW1iZXI+KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXhNYXAgPSBldmVudEFyZ3MuZ2V0SW5kZXhNYXAoKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbGxlY3Rpb24ubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGluZGV4TWFwW2ldKS5ub3QudG9CZU51bGwoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlSXNFbWl0dGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBldmVudEVtaXR0ZXIub24oXHJcbiAgICAgICAgICAgICAgICBDT0xMRUNUSU9OX01BTkFHRVJfRVZFTlRTLmNvbGxlY3Rpb25BZnRlckNoYW5nZSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGV2ZW50QXJnczogQ29sbGVjdGlvbkNoYW5nZUV2ZW50QXJnczxudW1iZXI+KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJJc0VtaXR0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGNvbGxlY3Rpb25NYW5hZ2VyLmluc2VydEVsZW1lbnRzKHtcclxuICAgICAgICAgICAgICAgIDE6IDEwLFxyXG4gICAgICAgICAgICAgICAgMzogOCxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QoYmVmb3JlSXNFbWl0dGVkICYmIGFmdGVySXNFbWl0dGVkKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBjb25zdCBhY3R1YWwgPSBjb2xsZWN0aW9uTWFuYWdlci5nZXRDb2xsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChhY3R1YWwubGVuZ3RoKS50b0JlKGV4cGVjdGVkLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4cGVjdGVkLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoYWN0dWFsW2ldKS50b0JlKGV4cGVjdGVkW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXRNdXN0QmVBYmxlVG9QcmV2ZW50RGVmYXVsdEFjdGlvbldoZW5BZGRpbmdFbGVtZW50cygpIHtcclxuICAgICAgICBpdCgnbXVzdEJlQWJsZVRvUHJldmVudERlZmF1bHRBY3Rpb25XaGVuQWRkaW5nRWxlbWVudHMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb246IG51bWJlcltdID0gWzIsIDUsIDddO1xyXG4gICAgICAgICAgICBjb25zdCBldmVudEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb25NYW5hZ2VyID0gbmV3IENvbGxlY3Rpb25NYW5hZ2VyPG51bWJlcj4oY29sbGVjdGlvbiwgZXZlbnRFbWl0dGVyKTtcclxuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSBbMiwgNSwgN107XHJcblxyXG4gICAgICAgICAgICB2YXIgYmVmb3JlSXNFbWl0dGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBhZnRlcklzRW1pdHRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZXZlbnRFbWl0dGVyLm9uKFxyXG4gICAgICAgICAgICAgICAgQ09MTEVDVElPTl9NQU5BR0VSX0VWRU5UUy5jb2xsZWN0aW9uQmVmb3JlQ2hhbmdlLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGV2ZW50QXJnczogQ2FuY2VsYWJsZUNvbGxlY3Rpb25DaGFuZ2VFdmVudEFyZ3M8bnVtYmVyPikge1xyXG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZUlzRW1pdHRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRBcmdzLnNldFByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgZXZlbnRFbWl0dGVyLm9uKFxyXG4gICAgICAgICAgICAgICAgQ09MTEVDVElPTl9NQU5BR0VSX0VWRU5UUy5jb2xsZWN0aW9uQWZ0ZXJDaGFuZ2UsXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihldmVudEFyZ3M6IENvbGxlY3Rpb25DaGFuZ2VFdmVudEFyZ3M8bnVtYmVyPikge1xyXG4gICAgICAgICAgICAgICAgICAgIGFmdGVySXNFbWl0dGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QoZXZlbnRBcmdzLmdldFByZXZlbnREZWZhdWx0KCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY29sbGVjdGlvbk1hbmFnZXIuaW5zZXJ0RWxlbWVudHMoe1xyXG4gICAgICAgICAgICAgICAgMTogMTAsXHJcbiAgICAgICAgICAgICAgICAzOiA4LFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChiZWZvcmVJc0VtaXR0ZWQgJiYgYWZ0ZXJJc0VtaXR0ZWQpLnRvQmUodHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhY3R1YWwgPSBjb2xsZWN0aW9uTWFuYWdlci5nZXRDb2xsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChhY3R1YWwubGVuZ3RoKS50b0JlKGV4cGVjdGVkLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4cGVjdGVkLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoYWN0dWFsW2ldKS50b0JlKGV4cGVjdGVkW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXRNdXN0QmVBYmxlVG9QcmV2ZW50RGVmYXVsdEFjdGlvbldoZW5SZW1vdmluZ0VsZW1lbnRzKCkge1xyXG4gICAgICAgIGl0KCdtdXN0QmVBYmxlVG9QcmV2ZW50RGVmYXVsdEFjdGlvbldoZW5SZW1vdmluZ0VsZW1lbnRzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xsZWN0aW9uOiBudW1iZXJbXSA9IFsyLCAxMCwgNSwgOCwgN107XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ZXNUb0JlUmVtb3ZlZCA9IFsxLCAzXTtcclxuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSBbMiwgMTAsIDUsIDgsIDddO1xyXG4gICAgICAgICAgICBjb25zdCBldmVudEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb25NYW5hZ2VyID0gbmV3IENvbGxlY3Rpb25NYW5hZ2VyPG51bWJlcj4oY29sbGVjdGlvbiwgZXZlbnRFbWl0dGVyKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBiZWZvcmVJc0VtaXR0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIGFmdGVySXNFbWl0dGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBldmVudEVtaXR0ZXIub24oXHJcbiAgICAgICAgICAgICAgICBDT0xMRUNUSU9OX01BTkFHRVJfRVZFTlRTLmNvbGxlY3Rpb25CZWZvcmVDaGFuZ2UsXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihldmVudEFyZ3M6IENhbmNlbGFibGVDb2xsZWN0aW9uQ2hhbmdlRXZlbnRBcmdzPG51bWJlcj4pIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudEFyZ3Muc2V0UHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBiZWZvcmVJc0VtaXR0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGV2ZW50RW1pdHRlci5vbihcclxuICAgICAgICAgICAgICAgIENPTExFQ1RJT05fTUFOQUdFUl9FVkVOVFMuY29sbGVjdGlvbkFmdGVyQ2hhbmdlLFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZXZlbnRBcmdzOiBDb2xsZWN0aW9uQ2hhbmdlRXZlbnRBcmdzPG51bWJlcj4pIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QoZXZlbnRBcmdzLmdldFByZXZlbnREZWZhdWx0KCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJJc0VtaXR0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGNvbGxlY3Rpb25NYW5hZ2VyLnJlbW92ZUVsZW1lbnRzKGluZGV4ZXNUb0JlUmVtb3ZlZCk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QoYmVmb3JlSXNFbWl0dGVkICYmIGFmdGVySXNFbWl0dGVkKS50b0JlKHRydWUpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYWN0dWFsID0gY29sbGVjdGlvbk1hbmFnZXIuZ2V0Q29sbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBleHBlY3QoYWN0dWFsLmxlbmd0aCkudG9CZShleHBlY3RlZC5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleHBlY3RlZC5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGFjdHVhbFtpXSkudG9CZShleHBlY3RlZFtpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGl0TXVzdEJlQWJsZVRvUmVtb3ZlRWxlbWVudHMoKSB7XHJcbiAgICAgICAgaXQoJ211c3RCZUFibGVUb1JlbW92ZUVsZW1lbnRzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xsZWN0aW9uOiBudW1iZXJbXSA9IFsyLCAxMCwgNSwgOCwgN107XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICAgICAgY29uc3QgY29sbGVjdGlvbk1hbmFnZXIgPSBuZXcgQ29sbGVjdGlvbk1hbmFnZXI8bnVtYmVyPihjb2xsZWN0aW9uLCBldmVudEVtaXR0ZXIpO1xyXG4gICAgICAgICAgICB2YXIgYmVmb3JlSXNFbWl0dGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBhZnRlcklzRW1pdHRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaW5kZXhlc1RvQmVSZW1vdmVkID0gWzEsIDNdO1xyXG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZCA9IFsyLCA1LCA3XTtcclxuXHJcbiAgICAgICAgICAgIGV2ZW50RW1pdHRlci5vbihcclxuICAgICAgICAgICAgICAgIENPTExFQ1RJT05fTUFOQUdFUl9FVkVOVFMuY29sbGVjdGlvbkJlZm9yZUNoYW5nZSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGV2ZW50QXJnczogQ29sbGVjdGlvbkNoYW5nZUV2ZW50QXJnczxudW1iZXI+KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXhNYXAgPSBldmVudEFyZ3MuZ2V0SW5kZXhNYXAoKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGluZGV4VG9CZVJlbW92ZWQgb2YgaW5kZXhlc1RvQmVSZW1vdmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChpbmRleE1hcFtpbmRleFRvQmVSZW1vdmVkXSkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBiZWZvcmVJc0VtaXR0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBldmVudEVtaXR0ZXIub24oXHJcbiAgICAgICAgICAgICAgICBDT0xMRUNUSU9OX01BTkFHRVJfRVZFTlRTLmNvbGxlY3Rpb25BZnRlckNoYW5nZSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGV2ZW50QXJnczogQ29sbGVjdGlvbkNoYW5nZUV2ZW50QXJnczxudW1iZXI+KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJJc0VtaXR0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGNvbGxlY3Rpb25NYW5hZ2VyLnJlbW92ZUVsZW1lbnRzKGluZGV4ZXNUb0JlUmVtb3ZlZCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChiZWZvcmVJc0VtaXR0ZWQgJiYgYWZ0ZXJJc0VtaXR0ZWQpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdHVhbCA9IGNvbGxlY3Rpb25NYW5hZ2VyLmdldENvbGxlY3Rpb24oKTtcclxuICAgICAgICAgICAgZXhwZWN0KGFjdHVhbC5sZW5ndGgpLnRvQmUoZXhwZWN0ZWQubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwZWN0ZWQubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChhY3R1YWxbaV0pLnRvQmUoZXhwZWN0ZWRbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiXHJcbmltcG9ydCB7IFRva2VuTWFwIH0gZnJvbSAnLi4vLi4vY29sbGVjdGlvbi90b2tlbi1tYXAnO1xyXG5pbXBvcnQgeyBJVGVzdCB9IGZyb20gJy4uL0lUZXN0JztcclxuXHJcbmV4cG9ydCBjbGFzcyBUb2tlbk1hcFRlc3RzIGltcGxlbWVudHMgSVRlc3Qge1xyXG5cclxuICAgIHB1YmxpYyBwZXJmb3JtVGVzdHMoKTogdm9pZCB7XHJcbiAgICAgICAgZGVzY3JpYmUoJ1Rva2VuIE1hcCBUZXN0cycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pdE11c3RCZUluaXRpYWxpemFibGUoKTtcclxuICAgICAgICAgICAgdGhpcy5pdE11c3RCZUFibGVUb0FkZEVsZW1lbnRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXRNdXN0QmVBYmxlVG9BZGRBbmRSZW1vdmVFbGVtZW50cygpO1xyXG4gICAgICAgICAgICB0aGlzLml0TXVzdEJlQWJsZVRvUmV1c2VVbnVzZWRJbmRleGVzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpdE11c3RCZUluaXRpYWxpemFibGUoKTogdm9pZCB7XHJcbiAgICAgICAgaXQoJ211c3RCZUluaXRpYWxpemFibGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hcCA9IG5ldyBUb2tlbk1hcCgpO1xyXG4gICAgICAgICAgICBleHBlY3QobWFwKS5ub3QudG9CZShudWxsKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1hcC5jb3VudCgpKS50b0JlKDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXRNdXN0QmVBYmxlVG9BZGRFbGVtZW50cygpOiB2b2lkIHtcclxuICAgICAgICBpdCgnbXVzdEJlQWJsZVRvQWRkRWxlbWVudHMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hcCA9IG5ldyBUb2tlbk1hcDx7fT4oKTtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudHNUb0FkZCA9IDY0O1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50c1RvQWRkOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChtYXAuYWRkKGkpKS50b0JlKGkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzVG9BZGQ7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KG1hcC5nZXQoaSkpLnRvQmUoaSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChtYXAuY291bnQoKSkudG9CZShlbGVtZW50c1RvQWRkKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGl0TXVzdEJlQWJsZVRvQWRkQW5kUmVtb3ZlRWxlbWVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgaXQoJ211c3RCZUFibGVUb0FkZEFuZFJlbW92ZUVsZW1lbnRzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtYXAgPSBuZXcgVG9rZW5NYXA8e30+KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzVG9BZGQgPSA2NDtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudHNUb1JlbW92ZSA9IDMyO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzVG9BZGQ7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KG1hcC5hZGQoaSkpLnRvQmUoaSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHNUb0FkZDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QobWFwLmdldChpKSkudG9CZShpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50c1RvUmVtb3ZlOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChtYXAucmVtb3ZlKGkpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobWFwLmNvdW50KCkpLnRvQmUoZWxlbWVudHNUb0FkZCAtIGVsZW1lbnRzVG9SZW1vdmUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXRNdXN0QmVBYmxlVG9SZXVzZVVudXNlZEluZGV4ZXMoKTogdm9pZCB7XHJcbiAgICAgICAgaXQoJ211c3RCZUFibGVUb1JldXNlVW51c2VkSW5kZXhlcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWFwID0gbmV3IFRva2VuTWFwPHt9PigpO1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50c1RvQWRkID0gNjQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzVG9SZW1vdmUgPSAzMjtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50c1RvQWRkOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChtYXAuYWRkKGkpKS50b0JlKGkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzVG9BZGQ7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KG1hcC5nZXQoaSkpLnRvQmUoaSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHNUb1JlbW92ZTsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QobWFwLnJlbW92ZShpKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50c1RvUmVtb3ZlOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChtYXAuYWRkKGkpKS50b0JlTGVzc1RoYW4oZWxlbWVudHNUb1JlbW92ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChtYXAuY291bnQoKSkudG9CZShlbGVtZW50c1RvQWRkKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHtcbiAgaWYgKHNlbGYgPT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcbiAgfVxuXG4gIHJldHVybiBzZWxmO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQ7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfY2xhc3NDYWxsQ2hlY2s7IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jcmVhdGVDbGFzczsiLCJ2YXIgZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKFwiLi9nZXRQcm90b3R5cGVPZlwiKTtcblxudmFyIHN1cGVyUHJvcEJhc2UgPSByZXF1aXJlKFwiLi9zdXBlclByb3BCYXNlXCIpO1xuXG5mdW5jdGlvbiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBSZWZsZWN0LmdldCkge1xuICAgIG1vZHVsZS5leHBvcnRzID0gX2dldCA9IFJlZmxlY3QuZ2V0O1xuICB9IGVsc2Uge1xuICAgIG1vZHVsZS5leHBvcnRzID0gX2dldCA9IGZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHtcbiAgICAgIHZhciBiYXNlID0gc3VwZXJQcm9wQmFzZSh0YXJnZXQsIHByb3BlcnR5KTtcbiAgICAgIGlmICghYmFzZSkgcmV0dXJuO1xuICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGJhc2UsIHByb3BlcnR5KTtcblxuICAgICAgaWYgKGRlc2MuZ2V0KSB7XG4gICAgICAgIHJldHVybiBkZXNjLmdldC5jYWxsKHJlY2VpdmVyKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRlc2MudmFsdWU7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyIHx8IHRhcmdldCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2dldDsiLCJmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobykge1xuICBtb2R1bGUuZXhwb3J0cyA9IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtcbiAgfTtcbiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfZ2V0UHJvdG90eXBlT2Y7IiwidmFyIHNldFByb3RvdHlwZU9mID0gcmVxdWlyZShcIi4vc2V0UHJvdG90eXBlT2ZcIik7XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO1xuICB9XG5cbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgY29uc3RydWN0b3I6IHtcbiAgICAgIHZhbHVlOiBzdWJDbGFzcyxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcbiAgaWYgKHN1cGVyQ2xhc3MpIHNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaW5oZXJpdHM7IiwiZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHtcbiAgICBkZWZhdWx0OiBvYmpcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0OyIsInZhciBfdHlwZW9mID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvdHlwZW9mXCIpO1xuXG52YXIgYXNzZXJ0VGhpc0luaXRpYWxpemVkID0gcmVxdWlyZShcIi4vYXNzZXJ0VGhpc0luaXRpYWxpemVkXCIpO1xuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG4gIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7XG4gICAgcmV0dXJuIGNhbGw7XG4gIH1cblxuICByZXR1cm4gYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuOyIsImZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gICAgby5fX3Byb3RvX18gPSBwO1xuICAgIHJldHVybiBvO1xuICB9O1xuXG4gIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3NldFByb3RvdHlwZU9mOyIsInZhciBnZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoXCIuL2dldFByb3RvdHlwZU9mXCIpO1xuXG5mdW5jdGlvbiBfc3VwZXJQcm9wQmFzZShvYmplY3QsIHByb3BlcnR5KSB7XG4gIHdoaWxlICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpKSB7XG4gICAgb2JqZWN0ID0gZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTtcbiAgICBpZiAob2JqZWN0ID09PSBudWxsKSBicmVhaztcbiAgfVxuXG4gIHJldHVybiBvYmplY3Q7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3N1cGVyUHJvcEJhc2U7IiwiZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZjIgPSBmdW5jdGlvbiBfdHlwZW9mMihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2YyKG9iaik7IH1cblxuZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSBcInN5bWJvbFwiKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiBfdHlwZW9mMihvYmopO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gX3R5cGVvZihvYmopO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF90eXBlb2Y7IiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbnZhciBvYmplY3RDcmVhdGUgPSBPYmplY3QuY3JlYXRlIHx8IG9iamVjdENyZWF0ZVBvbHlmaWxsXG52YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IG9iamVjdEtleXNQb2x5ZmlsbFxudmFyIGJpbmQgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCB8fCBmdW5jdGlvbkJpbmRQb2x5ZmlsbFxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcywgJ19ldmVudHMnKSkge1xuICAgIHRoaXMuX2V2ZW50cyA9IG9iamVjdENyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gIH1cblxuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufVxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG52YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG52YXIgaGFzRGVmaW5lUHJvcGVydHk7XG50cnkge1xuICB2YXIgbyA9IHt9O1xuICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgJ3gnLCB7IHZhbHVlOiAwIH0pO1xuICBoYXNEZWZpbmVQcm9wZXJ0eSA9IG8ueCA9PT0gMDtcbn0gY2F0Y2ggKGVycikgeyBoYXNEZWZpbmVQcm9wZXJ0eSA9IGZhbHNlIH1cbmlmIChoYXNEZWZpbmVQcm9wZXJ0eSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRFbWl0dGVyLCAnZGVmYXVsdE1heExpc3RlbmVycycsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdE1heExpc3RlbmVycztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24oYXJnKSB7XG4gICAgICAvLyBjaGVjayB3aGV0aGVyIHRoZSBpbnB1dCBpcyBhIHBvc2l0aXZlIG51bWJlciAod2hvc2UgdmFsdWUgaXMgemVybyBvclxuICAgICAgLy8gZ3JlYXRlciBhbmQgbm90IGEgTmFOKS5cbiAgICAgIGlmICh0eXBlb2YgYXJnICE9PSAnbnVtYmVyJyB8fCBhcmcgPCAwIHx8IGFyZyAhPT0gYXJnKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImRlZmF1bHRNYXhMaXN0ZW5lcnNcIiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gICAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnO1xuICAgIH1cbiAgfSk7XG59IGVsc2Uge1xuICBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IGRlZmF1bHRNYXhMaXN0ZW5lcnM7XG59XG5cbi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xuLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIHNldE1heExpc3RlbmVycyhuKSB7XG4gIGlmICh0eXBlb2YgbiAhPT0gJ251bWJlcicgfHwgbiA8IDAgfHwgaXNOYU4obikpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJuXCIgYXJndW1lbnQgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uICRnZXRNYXhMaXN0ZW5lcnModGhhdCkge1xuICBpZiAodGhhdC5fbWF4TGlzdGVuZXJzID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICByZXR1cm4gdGhhdC5fbWF4TGlzdGVuZXJzO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmdldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIGdldE1heExpc3RlbmVycygpIHtcbiAgcmV0dXJuICRnZXRNYXhMaXN0ZW5lcnModGhpcyk7XG59O1xuXG4vLyBUaGVzZSBzdGFuZGFsb25lIGVtaXQqIGZ1bmN0aW9ucyBhcmUgdXNlZCB0byBvcHRpbWl6ZSBjYWxsaW5nIG9mIGV2ZW50XG4vLyBoYW5kbGVycyBmb3IgZmFzdCBjYXNlcyBiZWNhdXNlIGVtaXQoKSBpdHNlbGYgb2Z0ZW4gaGFzIGEgdmFyaWFibGUgbnVtYmVyIG9mXG4vLyBhcmd1bWVudHMgYW5kIGNhbiBiZSBkZW9wdGltaXplZCBiZWNhdXNlIG9mIHRoYXQuIFRoZXNlIGZ1bmN0aW9ucyBhbHdheXMgaGF2ZVxuLy8gdGhlIHNhbWUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhbmQgdGh1cyBkbyBub3QgZ2V0IGRlb3B0aW1pemVkLCBzbyB0aGUgY29kZVxuLy8gaW5zaWRlIHRoZW0gY2FuIGV4ZWN1dGUgZmFzdGVyLlxuZnVuY3Rpb24gZW1pdE5vbmUoaGFuZGxlciwgaXNGbiwgc2VsZikge1xuICBpZiAoaXNGbilcbiAgICBoYW5kbGVyLmNhbGwoc2VsZik7XG4gIGVsc2Uge1xuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcbiAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICBsaXN0ZW5lcnNbaV0uY2FsbChzZWxmKTtcbiAgfVxufVxuZnVuY3Rpb24gZW1pdE9uZShoYW5kbGVyLCBpc0ZuLCBzZWxmLCBhcmcxKSB7XG4gIGlmIChpc0ZuKVxuICAgIGhhbmRsZXIuY2FsbChzZWxmLCBhcmcxKTtcbiAgZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIGxpc3RlbmVyc1tpXS5jYWxsKHNlbGYsIGFyZzEpO1xuICB9XG59XG5mdW5jdGlvbiBlbWl0VHdvKGhhbmRsZXIsIGlzRm4sIHNlbGYsIGFyZzEsIGFyZzIpIHtcbiAgaWYgKGlzRm4pXG4gICAgaGFuZGxlci5jYWxsKHNlbGYsIGFyZzEsIGFyZzIpO1xuICBlbHNlIHtcbiAgICB2YXIgbGVuID0gaGFuZGxlci5sZW5ndGg7XG4gICAgdmFyIGxpc3RlbmVycyA9IGFycmF5Q2xvbmUoaGFuZGxlciwgbGVuKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKVxuICAgICAgbGlzdGVuZXJzW2ldLmNhbGwoc2VsZiwgYXJnMSwgYXJnMik7XG4gIH1cbn1cbmZ1bmN0aW9uIGVtaXRUaHJlZShoYW5kbGVyLCBpc0ZuLCBzZWxmLCBhcmcxLCBhcmcyLCBhcmczKSB7XG4gIGlmIChpc0ZuKVxuICAgIGhhbmRsZXIuY2FsbChzZWxmLCBhcmcxLCBhcmcyLCBhcmczKTtcbiAgZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIGxpc3RlbmVyc1tpXS5jYWxsKHNlbGYsIGFyZzEsIGFyZzIsIGFyZzMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXRNYW55KGhhbmRsZXIsIGlzRm4sIHNlbGYsIGFyZ3MpIHtcbiAgaWYgKGlzRm4pXG4gICAgaGFuZGxlci5hcHBseShzZWxmLCBhcmdzKTtcbiAgZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseShzZWxmLCBhcmdzKTtcbiAgfVxufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KHR5cGUpIHtcbiAgdmFyIGVyLCBoYW5kbGVyLCBsZW4sIGFyZ3MsIGksIGV2ZW50cztcbiAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7XG5cbiAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICBpZiAoZXZlbnRzKVxuICAgIGRvRXJyb3IgPSAoZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT0gbnVsbCk7XG4gIGVsc2UgaWYgKCFkb0Vycm9yKVxuICAgIHJldHVybiBmYWxzZTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmIChkb0Vycm9yKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKVxuICAgICAgZXIgPSBhcmd1bWVudHNbMV07XG4gICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdVbmhhbmRsZWQgXCJlcnJvclwiIGV2ZW50LiAoJyArIGVyICsgJyknKTtcbiAgICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGhhbmRsZXIgPSBldmVudHNbdHlwZV07XG5cbiAgaWYgKCFoYW5kbGVyKVxuICAgIHJldHVybiBmYWxzZTtcblxuICB2YXIgaXNGbiA9IHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nO1xuICBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICBzd2l0Y2ggKGxlbikge1xuICAgICAgLy8gZmFzdCBjYXNlc1xuICAgIGNhc2UgMTpcbiAgICAgIGVtaXROb25lKGhhbmRsZXIsIGlzRm4sIHRoaXMpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgZW1pdE9uZShoYW5kbGVyLCBpc0ZuLCB0aGlzLCBhcmd1bWVudHNbMV0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgZW1pdFR3byhoYW5kbGVyLCBpc0ZuLCB0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQ6XG4gICAgICBlbWl0VGhyZWUoaGFuZGxlciwgaXNGbiwgdGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0sIGFyZ3VtZW50c1szXSk7XG4gICAgICBicmVhaztcbiAgICAgIC8vIHNsb3dlclxuICAgIGRlZmF1bHQ6XG4gICAgICBhcmdzID0gbmV3IEFycmF5KGxlbiAtIDEpO1xuICAgICAgZm9yIChpID0gMTsgaSA8IGxlbjsgaSsrKVxuICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIGVtaXRNYW55KGhhbmRsZXIsIGlzRm4sIHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5mdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xuICB2YXIgbTtcbiAgdmFyIGV2ZW50cztcbiAgdmFyIGV4aXN0aW5nO1xuXG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICBpZiAoIWV2ZW50cykge1xuICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzID0gb2JqZWN0Q3JlYXRlKG51bGwpO1xuICAgIHRhcmdldC5fZXZlbnRzQ291bnQgPSAwO1xuICB9IGVsc2Uge1xuICAgIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gICAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICAgIGlmIChldmVudHMubmV3TGlzdGVuZXIpIHtcbiAgICAgIHRhcmdldC5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsXG4gICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZVxuICAgICAgLy8gdGhpcy5fZXZlbnRzIHRvIGJlIGFzc2lnbmVkIHRvIGEgbmV3IG9iamVjdFxuICAgICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gICAgfVxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdO1xuICB9XG5cbiAgaWYgKCFleGlzdGluZykge1xuICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LlxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gICAgKyt0YXJnZXQuX2V2ZW50c0NvdW50O1xuICB9IGVsc2Uge1xuICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV0gPVxuICAgICAgICAgIHByZXBlbmQgPyBbbGlzdGVuZXIsIGV4aXN0aW5nXSA6IFtleGlzdGluZywgbGlzdGVuZXJdO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgICBpZiAocHJlcGVuZCkge1xuICAgICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV4aXN0aW5nLnB1c2gobGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gICAgaWYgKCFleGlzdGluZy53YXJuZWQpIHtcbiAgICAgIG0gPSAkZ2V0TWF4TGlzdGVuZXJzKHRhcmdldCk7XG4gICAgICBpZiAobSAmJiBtID4gMCAmJiBleGlzdGluZy5sZW5ndGggPiBtKSB7XG4gICAgICAgIGV4aXN0aW5nLndhcm5lZCA9IHRydWU7XG4gICAgICAgIHZhciB3ID0gbmV3IEVycm9yKCdQb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuICcgK1xuICAgICAgICAgICAgZXhpc3RpbmcubGVuZ3RoICsgJyBcIicgKyBTdHJpbmcodHlwZSkgKyAnXCIgbGlzdGVuZXJzICcgK1xuICAgICAgICAgICAgJ2FkZGVkLiBVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byAnICtcbiAgICAgICAgICAgICdpbmNyZWFzZSBsaW1pdC4nKTtcbiAgICAgICAgdy5uYW1lID0gJ01heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyc7XG4gICAgICAgIHcuZW1pdHRlciA9IHRhcmdldDtcbiAgICAgICAgdy50eXBlID0gdHlwZTtcbiAgICAgICAgdy5jb3VudCA9IGV4aXN0aW5nLmxlbmd0aDtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlID09PSAnb2JqZWN0JyAmJiBjb25zb2xlLndhcm4pIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJyVzOiAlcycsIHcubmFtZSwgdy5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCBmYWxzZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5wcmVwZW5kTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHByZXBlbmRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgdHJ1ZSk7XG4gICAgfTtcblxuZnVuY3Rpb24gb25jZVdyYXBwZXIoKSB7XG4gIGlmICghdGhpcy5maXJlZCkge1xuICAgIHRoaXMudGFyZ2V0LnJlbW92ZUxpc3RlbmVyKHRoaXMudHlwZSwgdGhpcy53cmFwRm4pO1xuICAgIHRoaXMuZmlyZWQgPSB0cnVlO1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5jYWxsKHRoaXMudGFyZ2V0KTtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuY2FsbCh0aGlzLnRhcmdldCwgYXJndW1lbnRzWzBdKTtcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuY2FsbCh0aGlzLnRhcmdldCwgYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pO1xuICAgICAgY2FzZSAzOlxuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5jYWxsKHRoaXMudGFyZ2V0LCBhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSxcbiAgICAgICAgICAgIGFyZ3VtZW50c1syXSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKVxuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIHRoaXMubGlzdGVuZXIuYXBwbHkodGhpcy50YXJnZXQsIGFyZ3MpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBfb25jZVdyYXAodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgc3RhdGUgPSB7IGZpcmVkOiBmYWxzZSwgd3JhcEZuOiB1bmRlZmluZWQsIHRhcmdldDogdGFyZ2V0LCB0eXBlOiB0eXBlLCBsaXN0ZW5lcjogbGlzdGVuZXIgfTtcbiAgdmFyIHdyYXBwZWQgPSBiaW5kLmNhbGwob25jZVdyYXBwZXIsIHN0YXRlKTtcbiAgd3JhcHBlZC5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICBzdGF0ZS53cmFwRm4gPSB3cmFwcGVkO1xuICByZXR1cm4gd3JhcHBlZDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgdGhpcy5vbih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRPbmNlTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHByZXBlbmRPbmNlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgICAgIHRoaXMucHJlcGVuZExpc3RlbmVyKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuLy8gRW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmIGFuZCBvbmx5IGlmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICB2YXIgbGlzdCwgZXZlbnRzLCBwb3NpdGlvbiwgaSwgb3JpZ2luYWxMaXN0ZW5lcjtcblxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoIWV2ZW50cylcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGxpc3QgPSBldmVudHNbdHlwZV07XG4gICAgICBpZiAoIWxpc3QpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gb2JqZWN0Q3JlYXRlKG51bGwpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdC5saXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpc3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcG9zaXRpb24gPSAtMTtcblxuICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpXS5saXN0ZW5lcjtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAwKVxuICAgICAgICAgIGxpc3Quc2hpZnQoKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHNwbGljZU9uZShsaXN0LCBwb3NpdGlvbik7XG5cbiAgICAgICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKVxuICAgICAgICAgIGV2ZW50c1t0eXBlXSA9IGxpc3RbMF07XG5cbiAgICAgICAgaWYgKGV2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgb3JpZ2luYWxMaXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID1cbiAgICBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnModHlwZSkge1xuICAgICAgdmFyIGxpc3RlbmVycywgZXZlbnRzLCBpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoIWV2ZW50cylcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgICAgIGlmICghZXZlbnRzLnJlbW92ZUxpc3RlbmVyKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gb2JqZWN0Q3JlYXRlKG51bGwpO1xuICAgICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudHNbdHlwZV0pIHtcbiAgICAgICAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMClcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IG9iamVjdENyZWF0ZShudWxsKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHZhciBrZXlzID0gb2JqZWN0S2V5cyhldmVudHMpO1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gb2JqZWN0Q3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICBsaXN0ZW5lcnMgPSBldmVudHNbdHlwZV07XG5cbiAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXJzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzKTtcbiAgICAgIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgIC8vIExJRk8gb3JkZXJcbiAgICAgICAgZm9yIChpID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbmZ1bmN0aW9uIF9saXN0ZW5lcnModGFyZ2V0LCB0eXBlLCB1bndyYXApIHtcbiAgdmFyIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuXG4gIGlmICghZXZlbnRzKVxuICAgIHJldHVybiBbXTtcblxuICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcbiAgaWYgKCFldmxpc3RlbmVyKVxuICAgIHJldHVybiBbXTtcblxuICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpXG4gICAgcmV0dXJuIHVud3JhcCA/IFtldmxpc3RlbmVyLmxpc3RlbmVyIHx8IGV2bGlzdGVuZXJdIDogW2V2bGlzdGVuZXJdO1xuXG4gIHJldHVybiB1bndyYXAgPyB1bndyYXBMaXN0ZW5lcnMoZXZsaXN0ZW5lcikgOiBhcnJheUNsb25lKGV2bGlzdGVuZXIsIGV2bGlzdGVuZXIubGVuZ3RoKTtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiBsaXN0ZW5lcnModHlwZSkge1xuICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCB0cnVlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmF3TGlzdGVuZXJzID0gZnVuY3Rpb24gcmF3TGlzdGVuZXJzKHR5cGUpIHtcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgZmFsc2UpO1xufTtcblxuRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gIGlmICh0eXBlb2YgZW1pdHRlci5saXN0ZW5lckNvdW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudCh0eXBlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbGlzdGVuZXJDb3VudC5jYWxsKGVtaXR0ZXIsIHR5cGUpO1xuICB9XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBsaXN0ZW5lckNvdW50O1xuZnVuY3Rpb24gbGlzdGVuZXJDb3VudCh0eXBlKSB7XG4gIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7XG5cbiAgaWYgKGV2ZW50cykge1xuICAgIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcbiAgcmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50ID4gMCA/IFJlZmxlY3Qub3duS2V5cyh0aGlzLl9ldmVudHMpIDogW107XG59O1xuXG4vLyBBYm91dCAxLjV4IGZhc3RlciB0aGFuIHRoZSB0d28tYXJnIHZlcnNpb24gb2YgQXJyYXkjc3BsaWNlKCkuXG5mdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHtcbiAgZm9yICh2YXIgaSA9IGluZGV4LCBrID0gaSArIDEsIG4gPSBsaXN0Lmxlbmd0aDsgayA8IG47IGkgKz0gMSwgayArPSAxKVxuICAgIGxpc3RbaV0gPSBsaXN0W2tdO1xuICBsaXN0LnBvcCgpO1xufVxuXG5mdW5jdGlvbiBhcnJheUNsb25lKGFyciwgbikge1xuICB2YXIgY29weSA9IG5ldyBBcnJheShuKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpXG4gICAgY29weVtpXSA9IGFycltpXTtcbiAgcmV0dXJuIGNvcHk7XG59XG5cbmZ1bmN0aW9uIHVud3JhcExpc3RlbmVycyhhcnIpIHtcbiAgdmFyIHJldCA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXQubGVuZ3RoOyArK2kpIHtcbiAgICByZXRbaV0gPSBhcnJbaV0ubGlzdGVuZXIgfHwgYXJyW2ldO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIG9iamVjdENyZWF0ZVBvbHlmaWxsKHByb3RvKSB7XG4gIHZhciBGID0gZnVuY3Rpb24oKSB7fTtcbiAgRi5wcm90b3R5cGUgPSBwcm90bztcbiAgcmV0dXJuIG5ldyBGO1xufVxuZnVuY3Rpb24gb2JqZWN0S2V5c1BvbHlmaWxsKG9iaikge1xuICB2YXIga2V5cyA9IFtdO1xuICBmb3IgKHZhciBrIGluIG9iaikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGspKSB7XG4gICAga2V5cy5wdXNoKGspO1xuICB9XG4gIHJldHVybiBrO1xufVxuZnVuY3Rpb24gZnVuY3Rpb25CaW5kUG9seWZpbGwoY29udGV4dCkge1xuICB2YXIgZm4gPSB0aGlzO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmbi5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpO1xuICB9O1xufVxuIl19"}